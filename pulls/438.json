{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/438",
    "id": 103358753,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTAzMzU4NzUz",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/438.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/438.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/438/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/438/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/cdd46814c4abcd7bc9ce73d616347964ac7ac9be",
    "number": 438,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "[trivial] clear stack variable by function",
    "user": {
      "login": "isle2983",
      "id": 20916903,
      "node_id": "MDQ6VXNlcjIwOTE2OTAz",
      "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/isle2983",
      "html_url": "https://github.com/isle2983",
      "followers_url": "https://api.github.com/users/isle2983/followers",
      "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
      "organizations_url": "https://api.github.com/users/isle2983/orgs",
      "repos_url": "https://api.github.com/users/isle2983/repos",
      "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/isle2983/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "The bare `bits = 0;` raises a clang static analysis issue.\r\n\r\n```\r\n--------------------------------------------------------------------------------\r\nAn issue has been found in ./src/ecmult_gen_impl.h:153:5\r\nType:         Dead assignment\r\nDescription:  Value stored to 'bits' is never read\r\n\r\n0: ./src/ecmult_gen_impl.h:153:5 - Value stored to 'bits' is never read\r\n--------------------------------------------------------------------------------\r\n```\r\n\r\nThe line was introduced in 2f6c8019114743e46a741fc6a01f9c6600ccdb5d (when `secp256k1_ecmult_gen()` lived in `src/ecmult_impl.h`) with the purpose of clearing stack variables that might have secret info.\r\n\r\nHowever, without that context, the purpose for clearing isn't obvious from reading the code. Aside from making clang happy, the function name should help it be understood.",
    "labels": [],
    "created_at": "2017-01-26T18:08:08Z",
    "updated_at": "2017-03-15T16:16:07Z",
    "closed_at": "2017-03-15T16:16:07Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "75bd1d8409b3f5f402a2de653a8ae018c0eee7dd",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "isle2983:PR-dead-assignment",
      "ref": "PR-dead-assignment",
      "sha": "cdd46814c4abcd7bc9ce73d616347964ac7ac9be",
      "user": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 80136944,
        "node_id": "MDEwOlJlcG9zaXRvcnk4MDEzNjk0NA==",
        "name": "secp256k1",
        "full_name": "isle2983/secp256k1",
        "owner": {
          "login": "isle2983",
          "id": 20916903,
          "node_id": "MDQ6VXNlcjIwOTE2OTAz",
          "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/isle2983",
          "html_url": "https://github.com/isle2983",
          "followers_url": "https://api.github.com/users/isle2983/followers",
          "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
          "organizations_url": "https://api.github.com/users/isle2983/orgs",
          "repos_url": "https://api.github.com/users/isle2983/repos",
          "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/isle2983/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/isle2983/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/isle2983/secp256k1",
        "archive_url": "https://api.github.com/repos/isle2983/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/isle2983/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/isle2983/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/isle2983/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/isle2983/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/isle2983/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/isle2983/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/isle2983/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/isle2983/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/isle2983/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/isle2983/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/isle2983/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/isle2983/secp256k1/events",
        "forks_url": "https://api.github.com/repos/isle2983/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/isle2983/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/isle2983/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/isle2983/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/isle2983/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/isle2983/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/isle2983/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/isle2983/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/isle2983/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/isle2983/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/isle2983/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/isle2983/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/isle2983/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/isle2983/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/isle2983/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/isle2983/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:isle2983/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/isle2983/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/isle2983/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/isle2983/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/isle2983/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/isle2983/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/isle2983/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/isle2983/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/isle2983/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/isle2983/secp256k1/hooks",
        "svn_url": "https://github.com/isle2983/secp256k1",
        "language": "C",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 1864,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2017-03-27T20:19:25Z",
        "created_at": "2017-01-26T17:24:35Z",
        "updated_at": "2017-01-26T17:24:39Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "9d560f992db26612ce2630b194aef5f44d63a530",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 948,
        "stargazers_count": 1768,
        "watchers_count": 1768,
        "size": 10062,
        "default_branch": "master",
        "open_issues_count": 142,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-06-12T16:38:48Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2023-06-12T17:38:13Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/438"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 15,
    "deletions": 1,
    "changed_files": 2,
    "commits": 2,
    "review_comments": 1,
    "comments": 5
  },
  "events": [
    {
      "event": "commented",
      "id": 275793202,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTc5MzIwMg==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/275793202",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-27T22:33:16Z",
      "updated_at": "2017-01-27T22:36:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "It's a fine structural change, but if you're going to break this out, can you perhaps make it a generic unsigned char clear that takes a point and length (which you'd use sizeof() on here)? --- and try to get the compiler to not optimize it out?  Edit: on second thought, we may prefer a clear function per type, even if all they're doing is wrapping a generic one.\r\n\r\n(As a matter of principle, we should never silence a warning which is potentially hiding an actual problem. In this case the problem is that the compiler will simply optimize out this assignment).",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438#issuecomment-275793202",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTY2NDg2MTg6NzJjMGViYmVhNDEzYTNkMDU4NDdhODQ5ZDYyOTA4MmU1NDA4MjMyZQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/72c0ebbea413a3d05847a849d629082e5408232e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/72c0ebbea413a3d05847a849d629082e5408232e",
      "tree": {
        "sha": "679eacc0978eac427da0c9a7d3bc9a7b7912a470",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/679eacc0978eac427da0c9a7d3bc9a7b7912a470"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/9d560f992db26612ce2630b194aef5f44d63a530",
          "sha": "9d560f992db26612ce2630b194aef5f44d63a530",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/9d560f992db26612ce2630b194aef5f44d63a530"
        }
      ],
      "message": "Example 1 - avoid optimizing out stack variable clearing by using an __attribute__",
      "committer": {
        "name": "isle2983",
        "email": "isle2983@yahoo.com",
        "date": "2017-01-29T21:46:57Z"
      },
      "author": {
        "name": "isle2983",
        "email": "isle2983@yahoo.com",
        "date": "2017-01-29T21:38:21Z"
      },
      "sha": "72c0ebbea413a3d05847a849d629082e5408232e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTY2NDg2MTg6Y2RkNDY4MTRjNGFiY2Q3YmM5Y2U3M2Q2MTYzNDc5NjRhYzdhYzliZQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/cdd46814c4abcd7bc9ce73d616347964ac7ac9be",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/cdd46814c4abcd7bc9ce73d616347964ac7ac9be",
      "tree": {
        "sha": "73dda9afb9151df31c2f4e0fe16464b4fdc0bc72",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/73dda9afb9151df31c2f4e0fe16464b4fdc0bc72"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/72c0ebbea413a3d05847a849d629082e5408232e",
          "sha": "72c0ebbea413a3d05847a849d629082e5408232e",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/72c0ebbea413a3d05847a849d629082e5408232e"
        }
      ],
      "message": "Example 2 - avoid optimizing out stack variable clearing by using the 'volatile' keyword",
      "committer": {
        "name": "isle2983",
        "email": "isle2983@yahoo.com",
        "date": "2017-01-29T21:47:15Z"
      },
      "author": {
        "name": "isle2983",
        "email": "isle2983@yahoo.com",
        "date": "2017-01-29T21:39:58Z"
      },
      "sha": "cdd46814c4abcd7bc9ce73d616347964ac7ac9be"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 940679344,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTQwNjc5MzQ0",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/940679344",
      "actor": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-29T21:59:22Z"
    },
    {
      "event": "commented",
      "id": 275950396,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTk1MDM5Ng==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/275950396",
      "actor": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-29T22:10:34Z",
      "updated_at": "2017-01-29T22:11:32Z",
      "author_association": "NONE",
      "body": "The new branch has two commits with two tentative examples for comment. They focus just on the `bits` variable for the purpose of discussion even though the problem extends to the other `*_clear()` functions.\r\n\r\n\r\nIn the first example commit 72c0ebbea413a3d05847a849d629082e5408232e,  `__attribute__((optimize(\"O0\")))` achieves what we want and the call to `secp256k1_secure_clear()` can be seen at the bottom of the `-03` assembly for `secp256k1_ecmult_gen()`:\r\n\r\n\r\n```\r\n.LBE2707:\r\n\t.loc 6 135 0\r\n\tcmpq\t$64, %rdi\t#, ivtmp.241\r\n\tje\t.L451\t#,\r\n\tsalq\t$34, %rdi\t#, D.9544\r\n\tmovl\t%r11d, 104(%rsp)\t# D.9544, %sfp\r\n\tmovl\t%ebp, %r14d\t# D.9544, D.9552\r\n\tshrq\t$37, %rdi\t#, D.9544\r\n\tmovl\t%r8d, 112(%rsp)\t# D.9544, %sfp\r\n\tmovl\t%r12d, %r15d\t# D.9544, D.9552\r\n\tmovl\t416(%rsp,%rdi,4), %edi\t# gnb.d, D.9552\r\n\tmovl\t%r10d, 96(%rsp)\t# D.9544, %sfp\r\n\tmovl\t%ecx, %r11d\t# D.9544, D.9552\r\n\tmovl\t%esi, 88(%rsp)\t# D.9544, %sfp\r\n\tmovl\t%edx, 80(%rsp)\t# D.9544, %sfp\r\n\tmovl\t%r9d, %r13d\t# D.9544, D.9552\r\n\tmovl\t%eax, 48(%rsp)\t# D.9544, %sfp\r\n\tjmp\t.L452\t#\r\n.L451:\r\n.LVL2579:\r\n.LBB2708:\r\n.LBB2709:\r\n\t.loc 2 222 0\r\n\tleaq\t412(%rsp), %rdi\t#, tmp5277\r\n.LVL2580:\r\n\tmovl\t$4, %esi\t#,\r\n\tcall\tsecp256k1_secure_clear\t#\r\n.LVL2581:\r\n.LBE2709:\r\n.LBE2708:\r\n\t.loc 6 156 0\r\n\taddq\t$1144, %rsp\t#,\r\n```\r\n\r\n(As was assumed, it was indeed being optimized out before, but I didn't quote it here to save space)\r\n\r\n\r\nHowever, compiling the same with `clang`, it throws a warning and doesn't do what we want:\r\n\r\n```\r\n$ clang -I. -g -O3 -Wall -Wextra -Wno-unused-function -c src/gen_context.c -fverbose-asm -S\r\nIn file included from src/gen_context.c:13:\r\nsrc/group_impl.h:217:28: warning: unknown attribute 'optimize' ignored\r\n      [-Wunknown-attributes]\r\nstatic void __attribute__((optimize(\"O0\"))) secp256k1_secure_clear(void ...\r\n                           ^\r\n1 warning generated.\r\n```\r\n\r\nSo, this approach looks like it is not very universal. ugh.\r\n\r\n\r\nTaking a step back and looking at OpenSSL, they clear stack variables with a function named `BN_clear_free()` in `(openssl)/crypto/bn/bn_lib.c` which calls `OPENSSL_cleanse()` in `(openssl)/crypto/mem_clr.c` which is implemented with the `volatile` keyword:\r\n\r\n```\r\n/*\r\n * Pointer to memset is volatile so that compiler must de-reference\r\n * the pointer and can't assume that it points to any function in\r\n * particular (such as memset, which it then might further \"optimize\")\r\n */\r\ntypedef void *(*memset_t)(void *,int,size_t);\r\n\r\nstatic volatile memset_t memset_func = memset;\r\n\r\nvoid OPENSSL_cleanse(void *ptr, size_t len)\r\n{\r\n    memset_func(ptr, 0, len);\r\n}\r\n```\r\n\r\nSo, this approach is also tried in cdd46814c4abcd7bc9ce73d616347964ac7ac9be. The assembly in `-03` turns out a bit different, but still achieves the aim:\r\n\r\n```\r\n.LBE2372:\r\n\t.loc 6 135 0\r\n\tcmpq\t$64, %rax\t#, ivtmp.263\r\n\tje\t.L424\t#,\r\n\tsalq\t$34, %rax\t#, D.9409\r\n\tshrq\t$37, %rax\t#, D.9409\r\n\tmovl\t400(%rsp,%rax,4), %r9d\t# gnb.d, D.9415\r\n\tjmp\t.L425\t#\r\n.L424:\r\n.LVL2528:\r\n.LBB2373:\r\n.LBB2374:\r\n.LBB2375:\r\n\t.loc 2 222 0\r\n\tleaq\t396(%rsp), %rdi\t#, tmp5505\r\n.LVL2529:\r\n\tmovq\tsecure_memset(%rip), %rax\t# secure_memset, D.9410\r\n\tmovl\t$4, %edx\t#,\r\n\txorl\t%esi, %esi\t#\r\n\tcall\t*%rax\t# D.9410\r\n.LVL2530:\r\n.LBE2375:\r\n.LBE2374:\r\n.LBE2373:\r\n\t.loc 6 156 0\r\n\taddq\t$1176, %rsp\t#,\r\n```\r\n\r\nThis works perfectly with `clang` too, so this is definitely more viable.\r\n\r\nAlso, for C++ there is discussion on the internet around a new `memset_s()` call designed for this purpose but it is only introduced in C++11. In the long run, if `memset_s()` makes it to C, that will probably be the preferred way to do this.\r\n\r\n\r\nQuestions:\r\n\r\n1. What kind of benchmarking needs to be done to quantify the performance impacts?\r\n2. Should we look at applying this to all stack vars? or should the focus be a subset of functions that touch private keys?\r\n3. Any cosmetic suggestions for function names/interface/presentation?\r\n",
      "user": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438#issuecomment-275950396",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438"
    },
    {
      "event": "commented",
      "id": 275950656,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NTk1MDY1Ng==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/275950656",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-29T22:14:20Z",
      "updated_at": "2017-01-29T22:20:10Z",
      "author_association": "MEMBER",
      "body": "memset_s is an optional function in C11 (not C++11), and it doesn't seem like compilers are eager to implement it.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438#issuecomment-275950656",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438"
    },
    {
      "event": "commented",
      "id": 279103565,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3OTEwMzU2NQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/279103565",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-11T00:33:17Z",
      "updated_at": "2017-02-11T00:33:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "10:59 < gmaxwell> glibc 2.25 has explicit_bzero\r\n11:01 < gmaxwell> void\r\n11:01 < gmaxwell> explicit_bzero (void *s, size_t len)\r\n11:01 < gmaxwell> {\r\n11:01 < gmaxwell>   memset (s, '\\0', len);\r\n11:01 < gmaxwell>   /* Compiler barrier.  */\r\n11:01 < gmaxwell>   asm volatile (\"\" ::: \"memory\");\r\n11:01 < gmaxwell> }\r\n",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438#issuecomment-279103565",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438"
    },
    {
      "event": "commented",
      "id": 286794339,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI4Njc5NDMzOQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/286794339",
      "actor": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-15T16:16:07Z",
      "updated_at": "2017-03-15T16:16:07Z",
      "author_association": "NONE",
      "body": "closing in favor of #448 ",
      "user": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/438#issuecomment-286794339",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/438"
    },
    {
      "event": "closed",
      "id": 1001193411,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTAwMTE5MzQxMQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/1001193411",
      "actor": {
        "login": "isle2983",
        "id": 20916903,
        "node_id": "MDQ6VXNlcjIwOTE2OTAz",
        "avatar_url": "https://avatars.githubusercontent.com/u/20916903?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/isle2983",
        "html_url": "https://github.com/isle2983",
        "followers_url": "https://api.github.com/users/isle2983/followers",
        "following_url": "https://api.github.com/users/isle2983/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/isle2983/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/isle2983/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/isle2983/subscriptions",
        "organizations_url": "https://api.github.com/users/isle2983/orgs",
        "repos_url": "https://api.github.com/users/isle2983/repos",
        "events_url": "https://api.github.com/users/isle2983/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/isle2983/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-15T16:16:07Z"
    }
  ],
  "comments": []
}