{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674",
    "id": 2553170501,
    "node_id": "PR_kwDOAP4Jqs6YLkpF",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1674.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1674.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/86a6ecd1c64813d0bacdf51df5777f9865850297",
    "number": 1674,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "build: Add SECP256K1_NO_EXPORTS option to avoid default visibility for static builds",
    "user": {
      "login": "theuni",
      "id": 417043,
      "node_id": "MDQ6VXNlcjQxNzA0Mw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theuni",
      "html_url": "https://github.com/theuni",
      "followers_url": "https://api.github.com/users/theuni/followers",
      "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
      "organizations_url": "https://api.github.com/users/theuni/orgs",
      "repos_url": "https://api.github.com/users/theuni/repos",
      "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/theuni/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Yep, yet another visiblity PR :)\r\n\r\nNoticed this when building libbitcoinkernel for Linux. Core needs a way to link a static secp into a (shared or static) kernel without exporting the secp symbols.\r\n\r\nautotools defines `DLL_EXPORT` for dll builds. CMake mimics this behavior and defines `SECP256K1_DLL_EXPORT`.\r\n\r\nThis means that currently Windows builds only export their symbols for shared libraries, and all other platforms export for shared AND static.\r\n\r\nUnfortunately, there's no way to make autotools define a special variable when building for other platforms.\r\n\r\nCMake could define a variable for shared lib builds on all platforms, which the header could then use to decide whether or not to export symbols, but that would introduce a behavioral difference between the build-systems.\r\n\r\nInstead, provide an escape hatch via `SECP256K1_NO_EXPORTS` which can be used when building secp for non-Windows targets when exports are not desired (when building a static lib).",
    "labels": [
      {
        "id": 4975362431,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
        "name": "build",
        "description": "",
        "color": "2F66C4",
        "default": false
      },
      {
        "id": 5492448291,
        "node_id": "LA_kwDOAP4Jqs8AAAABR2AcIw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/refactor/smell",
        "name": "refactor/smell",
        "description": "",
        "color": "FBCA04",
        "default": false
      }
    ],
    "created_at": "2025-05-29T20:31:00Z",
    "updated_at": "2025-05-31T07:30:41Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "5bfa4aa71e72153ca2645ab1a5d639ecd1ca7136",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "theuni:extern-visibility",
      "ref": "extern-visibility",
      "sha": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 20003297,
        "node_id": "MDEwOlJlcG9zaXRvcnkyMDAwMzI5Nw==",
        "name": "secp256k1",
        "full_name": "theuni/secp256k1",
        "owner": {
          "login": "theuni",
          "id": 417043,
          "node_id": "MDQ6VXNlcjQxNzA0Mw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/theuni",
          "html_url": "https://github.com/theuni",
          "followers_url": "https://api.github.com/users/theuni/followers",
          "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
          "organizations_url": "https://api.github.com/users/theuni/orgs",
          "repos_url": "https://api.github.com/users/theuni/repos",
          "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/theuni/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/theuni/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/theuni/secp256k1",
        "archive_url": "https://api.github.com/repos/theuni/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/theuni/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/theuni/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/theuni/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/theuni/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/theuni/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/theuni/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/theuni/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/theuni/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/theuni/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/theuni/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/theuni/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/theuni/secp256k1/events",
        "forks_url": "https://api.github.com/repos/theuni/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/theuni/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/theuni/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/theuni/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/theuni/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/theuni/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/theuni/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/theuni/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/theuni/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/theuni/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/theuni/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/theuni/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/theuni/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/theuni/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/theuni/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/theuni/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:theuni/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/theuni/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/theuni/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/theuni/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/theuni/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/theuni/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/theuni/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/theuni/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/theuni/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/theuni/secp256k1/hooks",
        "svn_url": "https://github.com/theuni/secp256k1",
        "language": "C",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 12629,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-29T20:29:43Z",
        "created_at": "2014-05-21T01:09:55Z",
        "updated_at": "2025-05-16T09:56:31Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 1058,
        "stargazers_count": 2242,
        "watchers_count": 2242,
        "size": 12439,
        "default_branch": "master",
        "open_issues_count": 138,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-24T05:51:18Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2025-05-30T22:35:56Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 2,
    "deletions": 2,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 3,
    "comments": 5
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDg2YTZlY2QxYzY0ODEzZDBiYWNkZjUxZGY1Nzc3Zjk4NjU4NTAyOTc",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/86a6ecd1c64813d0bacdf51df5777f9865850297",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/86a6ecd1c64813d0bacdf51df5777f9865850297",
      "tree": {
        "sha": "83253167044502843523431a619d2a9ce5ad80da",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/83253167044502843523431a619d2a9ce5ad80da"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
          "sha": "92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f"
        }
      ],
      "message": "build: Add SECP256K1_NO_EXPORTS option to avoid default visibility for static libs\n\nautotools defines DLL_EXPORT for dll builds. CMake mimics this behavior and\ndefines SECP256K1_DLL_EXPORT.\n\nThis means that currently Windows builds only export their symbols for shared\nlibraries, and all other platforms export for shared AND static.\n\nUnfortunately, there's no way to make autotools define a special variable when\nbuilding for other platforms.\n\nCMake could define a variable for shared lib builds on all platforms, which the\nheader could then use to decide whether or not to export symbols, but that\nwould introduce a behavioral difference between the build-systems.\n\nInstead, provide an escape hatch via SECP256K1_NO_EXPORTS which can be used\nwhen building secp for non-Windows targets when exports are not desired (when\nbuilding a static lib).",
      "committer": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2025-05-29T20:28:59Z"
      },
      "author": {
        "name": "Cory Fields",
        "email": "cory-nospam-@coryfields.com",
        "date": "2025-05-29T20:16:24Z"
      },
      "sha": "86a6ecd1c64813d0bacdf51df5777f9865850297"
    },
    {
      "event": "subscribed",
      "id": 17875467629,
      "node_id": "SE_lADOAP4Jqs642-UXzwAAAAQpdf1t",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17875467629",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-29T21:30:11Z"
    },
    {
      "event": "reviewed",
      "id": 2880638715,
      "node_id": "PRR_kwDOAP4Jqs6rsw77",
      "url": null,
      "actor": null,
      "commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Sigh yeah.\r\n\r\nAlternatively, we could wrap the entire Windows logic in an `#ifndef SECP256K1_API`, like the non-Windows logic, giving the user an ultimate override. That's simpler. Is it better? I tend to say yes. ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#pullrequestreview-2880638715",
      "submitted_at": "2025-05-30T09:04:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674"
    },
    {
      "event": "commented",
      "id": 2921723074,
      "node_id": "IC_kwDOAP4Jqs6uJfTC",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2921723074",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-30T09:09:01Z",
      "updated_at": "2025-05-30T09:09:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "Okay, actually... Let me take a step back. What do we (as libsecp256k1) want for static builds in general? Or is this a question that just cannot be answered properly because it depends on the user because some users would want to reexport, some won't (e.g., kernel).\r\n \r\nBut even if the latter is true, it seems to me that the defaults should at least be consistent across platforms, no?",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#issuecomment-2921723074",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674"
    },
    {
      "event": "commented",
      "id": 2923102365,
      "node_id": "IC_kwDOAP4Jqs6uOwCd",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2923102365",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-30T18:24:07Z",
      "updated_at": "2025-05-30T18:24:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Okay, actually... Let me take a step back. What do we (as libsecp256k1) want for static builds in general? Or is this a question that just cannot be answered properly because it depends on the user because some users would want to reexport, some won't (e.g., kernel).\r\n> \r\n> But even if the latter is true, it seems to me that the defaults should at least be consistent across platforms, no?\r\n\r\nIMO static builds should always be hidden by default and shared should be exported:\r\n\r\nMy initial attempt was something like:\r\n```patch\r\ndiff --git a/include/secp256k1.h b/include/secp256k1.h\r\nindex 1d25a02a..8f718636 100644\r\n--- a/include/secp256k1.h\r\n+++ b/include/secp256k1.h\r\n@@ -129,10 +129,10 @@ typedef int (*secp256k1_nonce_function)(\r\n    * Attributes\" in the GCC manual and the recommendations in\r\n    * https://gcc.gnu.org/wiki/Visibility. */\r\n # if defined(SECP256K1_BUILD)\r\n-#  if defined(DLL_EXPORT) || defined(SECP256K1_DLL_EXPORT)\r\n+#  if defined(DLL_EXPORT) || defined(SECP256K1_EXPORT_SYMBOLS)\r\n     /* Building libsecp256k1 as a DLL.\r\n      * 1. If using Libtool, it defines DLL_EXPORT automatically.\r\n-     * 2. In other cases, SECP256K1_DLL_EXPORT must be defined. */\r\n+     * 2. In other cases, SECP256K1_EXPORT_SYMBOLS must be defined. */\r\n #   define SECP256K1_API extern __declspec (dllexport)\r\n #  else\r\n     /* Building libsecp256k1 as a static library on Windows.\r\n@@ -153,7 +153,7 @@ typedef int (*secp256k1_nonce_function)(\r\n #endif\r\n #ifndef SECP256K1_API\r\n /* All cases not captured by the Windows-specific logic. */\r\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\r\n+# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD) && defined(SECP256K1_EXPORT_SYMBOLS)\r\n    /* Building libsecp256k1 using GCC or compatible. */\r\n #  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\r\n # else\r\ndiff --git a/src/CMakeLists.txt b/src/CMakeLists.txt\r\nindex f31b8c8f..57bb7dae 100644\r\n--- a/src/CMakeLists.txt\r\n+++ b/src/CMakeLists.txt\r\n@@ -20,11 +20,9 @@ if(SECP256K1_ASM STREQUAL \"arm32\")\r\n   target_link_libraries(secp256k1_asm INTERFACE secp256k1_asm_arm)\r\n endif()\r\n\r\n-if(WIN32)\r\n   # Define our export symbol only for shared libs.\r\n-  set_target_properties(secp256k1 PROPERTIES DEFINE_SYMBOL SECP256K1_DLL_EXPORT)\r\n+  set_target_properties(secp256k1 PROPERTIES DEFINE_SYMBOL SECP256K1_EXPORT_SYMBOLS)\r\n   target_compile_definitions(secp256k1 INTERFACE $<$<NOT:$<BOOL:${BUILD_SHARED_LIBS}>>:SECP256K1_STATIC>)\r\n-endif()\r\n\r\n # Object libs don't know if they're being built for a shared or static lib.\r\n # Grab the PIC property from secp256k1 which knows.\r\n```\r\n\r\nSadly, that would make the CMake and Autotools behaviors diverge as there's no way to get autotools to define anything for a shared build. But since Non-Windows+CMake is likely to be the most popular build config eventually (if it isn't already), maybe we could accept that divergence and provide an additional opt-out for autotools builders?\r\n\r\nIt's ideal though imo, as it does the right thing by default in all cases, and would allow `-DSECP256K1_EXPORT_SYMBOLS` to be manually specified for anyone building statically and wanting exports.\r\n\r\nAs mentioned above, I'm not sure there's any utility in allowing the opposite.. building shared and disabling exports.\r\n\r\n",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#issuecomment-2923102365",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674"
    },
    {
      "event": "commented",
      "id": 2923120998,
      "node_id": "IC_kwDOAP4Jqs6uO0lm",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2923120998",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-30T18:30:50Z",
      "updated_at": "2025-05-30T18:30:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Btw, this is only becoming an issue now because we (the kernel working group) were discussing a monolithic libbitcoinkernel.a yesterday, which would include secp: https://github.com/theuni/bitcoin/commit/4f43838247fa62b8495133b3924ebb64f08dd0ec\r\n\r\nWhile testing that, the shared version (`libbitcoinkernel.so`) is now comprised of the secp objects rather than `libsecp256k1.a`. That means that Core's trick of using `\"-Wl,--exclude-libs,ALL\"` to exclude secp's symbols no longer works, as it only applies to static libraries. With that config, we need a secp actually built with hidden symbols. Though I would argue that the fact that they're currently visible is a bug anyway.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#issuecomment-2923120998",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674"
    },
    {
      "event": "commented",
      "id": 2924581501,
      "node_id": "IC_kwDOAP4Jqs6uUZJ9",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2924581501",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:29:47Z",
      "updated_at": "2025-05-31T07:29:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "> While testing that, the shared version (`libbitcoinkernel.so`) is now comprised of the secp objects rather than `libsecp256k1.a`.\r\n\r\nIs this what you mean by monolithic? What would be the benefit of this?\r\n\r\nIt feels to me that if you consume the `.o` files directly (while I assume you have a perfectly fine reason to do this), this is a violation of libsecp interface, so I'm not sure if we should support this in general. Or, more pragmatically, this is too niche for us to support. (At least for other users, of course, our primary concern should be to support Core's use of libsecp256k1.) \r\n\r\n> Though I would argue that the fact that they're currently visible is a bug anyway.\r\n\r\nBut yes, I agree. I tend to agree that hidden is a sane default for static libs, and that reexporting should be asked for explicitly.\r\n\r\n---\r\n\r\nI tend to like your `SECP256K1_EXPORT_SYMBOLS` suggestion.\r\n\r\n> It's ideal though imo, as it does the right thing by default in all cases, and would allow -DSECP256K1_EXPORT_SYMBOLS to be manually specified for anyone building statically and wanting exports.\r\n\r\nIndeed. \r\n\r\n> Sadly, that would make the CMake and Autotools behaviors diverge as there's no way to get autotools to define anything for a shared build. But since Non-Windows+CMake is likely to be the most popular build config eventually (if it isn't already), maybe we could accept that divergence and provide an additional opt-out for autotools builders?\r\n\r\nThe question for our autotools build will be: Should it define `SECP256K1_EXPORT_SYMBOLS` or not? If we don't set it, any users who want to reexport will have a problem. (Are there any?)  If we set it, then we have a non-optimal default. But we could make it configurable. While this adds a knob, it's a simple one and it would also keep the two build systems on par.\r\n\r\n---\r\n\r\nBy the way, for anyone wondering what visibility is supposed to do anyway in a static build (because visibility is a concept that applies only to shared libs): The only way visibility influences a static lib is that the visibility information is kept in the static lib, solely for the potential case that this static library will be linked into a shared lib (and the visibility will apply there again). \r\nPlease see this excellent answer on SO: https://stackoverflow.com/a/67473340/2725281",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#issuecomment-2924581501",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674"
    },
    {
      "event": "commented",
      "id": 2924582611,
      "node_id": "IC_kwDOAP4Jqs6uUZbT",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2924582611",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:30:27Z",
      "updated_at": "2025-05-31T07:30:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "cc @hebasto ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#issuecomment-2924582611",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1674"
    },
    {
      "event": "mentioned",
      "id": 17898010037,
      "node_id": "MEE_lADOAP4Jqs642-UXzwAAAAQqzfW1",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17898010037",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:30:28Z"
    },
    {
      "event": "subscribed",
      "id": 17898010042,
      "node_id": "SE_lADOAP4Jqs642-UXzwAAAAQqzfW6",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17898010042",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:30:29Z"
    },
    {
      "event": "labeled",
      "id": 17898010587,
      "node_id": "LE_lADOAP4Jqs642-UXzwAAAAQqzffb",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17898010587",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:30:41Z",
      "label": {
        "name": "build",
        "color": "2F66C4"
      }
    },
    {
      "event": "labeled",
      "id": 17898010588,
      "node_id": "LE_lADOAP4Jqs642-UXzwAAAAQqzffc",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17898010588",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-31T07:30:41Z",
      "label": {
        "name": "refactor/smell",
        "color": "FBCA04"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2115446912",
      "pull_request_review_id": 2880638715,
      "id": 2115446912,
      "node_id": "PRRC_kwDOAP4Jqs5-FyiA",
      "diff_hunk": "@@ -132,7 +132,7 @@ typedef int (*secp256k1_nonce_function)(\n #  if defined(DLL_EXPORT) || defined(SECP256K1_DLL_EXPORT)\n     /* Building libsecp256k1 as a DLL.\n      * 1. If using Libtool, it defines DLL_EXPORT automatically.\n-     * 2. In other cases, SECP256K1_DLL_EXPORT must be defined. */\n+     * 2. If using CMake, it defines SECP256K1_DLL_EXPORT automatically. */",
      "path": "include/secp256k1.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "original_commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think what I had in mind here is rather this (and I agree this isn't clear from the comment):\r\n```\r\n     * 1. Libtool has a built-in -DDLL_EXPORT for all builds of DLLs.\r\n     * 2. Non-libtool builds should define SECP256K1_DLL_EXPORT. */\r\n```\r\n(... as we do in CMakeLists.txt)",
      "created_at": "2025-05-30T08:57:09Z",
      "updated_at": "2025-05-30T09:04:41Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#discussion_r2115446912",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2115446912"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674"
        }
      },
      "start_line": 134,
      "original_start_line": 134,
      "start_side": "RIGHT",
      "line": 135,
      "original_line": 135,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2115451354",
      "pull_request_review_id": 2880638715,
      "id": 2115451354,
      "node_id": "PRRC_kwDOAP4Jqs5-Fzna",
      "diff_hunk": "@@ -153,7 +153,7 @@ typedef int (*secp256k1_nonce_function)(\n #endif\n #ifndef SECP256K1_API\n /* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n+# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD) && !defined(SECP256K1_NO_EXPORTS)",
      "path": "include/secp256k1.h",
      "position": 14,
      "original_position": 14,
      "commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "original_commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think `&& !defined(SECP256K1_NO_EXPORTS)` should also be added to line 131 for Windows. (If you set this for whatever reason, you probably expect it to work also on Windows.) \r\n\r\nnit: `SECP256K1_NO_EXPORT` is a slightly better name because it matches  `(SECP256K1)_DLL_EXPORT`.",
      "created_at": "2025-05-30T08:58:58Z",
      "updated_at": "2025-05-30T09:04:41Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#discussion_r2115451354",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2115451354"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2116365980",
      "pull_request_review_id": 2882062351,
      "id": 2116365980,
      "node_id": "PRRC_kwDOAP4Jqs5-JS6c",
      "diff_hunk": "@@ -153,7 +153,7 @@ typedef int (*secp256k1_nonce_function)(\n #endif\n #ifndef SECP256K1_API\n /* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n+# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD) && !defined(SECP256K1_NO_EXPORTS)",
      "path": "include/secp256k1.h",
      "position": 14,
      "original_position": 14,
      "commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "original_commit_id": "86a6ecd1c64813d0bacdf51df5777f9865850297",
      "in_reply_to_id": 2115451354,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I added that to begin with but removed it because we can only reach this when building a Windows DLL, and it doesn't make sense to do so without exporting.\r\n\r\nI can add it back for symmetry if you'd like, but I'm not sure there's any actual use for it?",
      "created_at": "2025-05-30T18:08:42Z",
      "updated_at": "2025-05-30T18:08:43Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1674#discussion_r2116365980",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2116365980"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1674"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "RIGHT"
    }
  ]
}