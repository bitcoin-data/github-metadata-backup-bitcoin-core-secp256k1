{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/363",
    "id": 52814369,
    "node_id": "MDExOlB1bGxSZXF1ZXN0NTI4MTQzNjk=",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/363.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/363.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/363/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/363/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/eaa298a7da5959712f988262055aba1ed668a07c",
    "number": 363,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "ECDH from compressed points with \"free\" sqrt",
    "user": {
      "login": "peterdettman",
      "id": 3423981,
      "node_id": "MDQ6VXNlcjM0MjM5ODE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peterdettman",
      "html_url": "https://github.com/peterdettman",
      "followers_url": "https://api.github.com/users/peterdettman/followers",
      "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
      "organizations_url": "https://api.github.com/users/peterdettman/orgs",
      "repos_url": "https://api.github.com/users/peterdettman/repos",
      "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/peterdettman/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Builds on #362 as an alternative to #262.\n\nCompressed points are moved onto an isomorphism (maybe the twist) instead of calling sqrt. After the scalar mult, parallel rsqrt/inv is used to reconstruct the correct output y-coordinate in parallel with the inversion of the z-coordinate. Total overhead vs uncompressed input is ~1%.\n\nThis implementation foregoes the jacobi check, meaning that the actual scalar multiplication could take place on a quadratic twist. This admits points with x == 0 as a possibility, but still not y == 0; the twist has a 37-bit, odd, cofactor. If this occurs, the parallel rsqrt/inv at the end will catch it and reject it. I think ECDH peers can already waste each other's time at will, so I don't think the delayed catch is a problem.\n\nDo we know whether our formulae work \"correctly\" for the twist? Here we actually just need them not to crash (e.g. if an x==0 or P==INF turns up) in the scalar mult. Of course, we could always put the jacobi test back in, which has ~2% additional overhead.\n\nNote:\nThe initial \"decompression\" produces (x,y) == (K.X, K^2) on the curve y^2 = x^3 + 7.K^3, with K != 0. If K is not a quadratic residue then this is a twist of the original curve.\n",
    "labels": [],
    "created_at": "2015-12-07T07:51:12Z",
    "updated_at": "2023-05-08T10:04:40Z",
    "closed_at": "2023-05-08T10:04:40Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merge_commit_sha": "1724a7d81d0646a73b8fd1cf92d373d6be57f41c",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "peterdettman:ecdh-xo-sqrt-inv",
      "ref": "ecdh-xo-sqrt-inv",
      "sha": "eaa298a7da5959712f988262055aba1ed668a07c",
      "user": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 19929656,
        "node_id": "MDEwOlJlcG9zaXRvcnkxOTkyOTY1Ng==",
        "name": "secp256k1",
        "full_name": "peterdettman/secp256k1",
        "owner": {
          "login": "peterdettman",
          "id": 3423981,
          "node_id": "MDQ6VXNlcjM0MjM5ODE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/peterdettman",
          "html_url": "https://github.com/peterdettman",
          "followers_url": "https://api.github.com/users/peterdettman/followers",
          "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
          "organizations_url": "https://api.github.com/users/peterdettman/orgs",
          "repos_url": "https://api.github.com/users/peterdettman/repos",
          "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/peterdettman/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/peterdettman/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/peterdettman/secp256k1",
        "archive_url": "https://api.github.com/repos/peterdettman/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/peterdettman/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/peterdettman/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/peterdettman/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/peterdettman/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/peterdettman/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/peterdettman/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/peterdettman/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/peterdettman/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/peterdettman/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/peterdettman/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/peterdettman/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/peterdettman/secp256k1/events",
        "forks_url": "https://api.github.com/repos/peterdettman/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/peterdettman/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/peterdettman/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/peterdettman/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/peterdettman/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/peterdettman/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/peterdettman/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/peterdettman/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/peterdettman/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/peterdettman/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/peterdettman/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/peterdettman/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/peterdettman/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/peterdettman/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/peterdettman/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/peterdettman/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:peterdettman/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/peterdettman/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/peterdettman/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/peterdettman/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/peterdettman/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/peterdettman/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/peterdettman/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/peterdettman/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/peterdettman/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/peterdettman/secp256k1/hooks",
        "svn_url": "https://github.com/peterdettman/secp256k1",
        "language": "C",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 9530,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2022-04-20T06:00:57Z",
        "created_at": "2014-05-19T04:58:16Z",
        "updated_at": "2022-01-01T06:09:08Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "3026daa095797ffb5371ecf19bbd1de3d3b3eeb7",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 962,
        "stargazers_count": 1802,
        "watchers_count": 1802,
        "size": 10374,
        "default_branch": "master",
        "open_issues_count": 145,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-01T01:00:35Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2023-08-01T08:52:35Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/363"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 492,
    "deletions": 138,
    "changed_files": 15,
    "commits": 2,
    "review_comments": 0,
    "comments": 7
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTY2NDg2MTg6YWQ2MzcwYzE5ZmRmOTkxMzAxOTAyZDM3NzkwNDg2NmZlMzgyMTk5Mw==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/ad6370c19fdf991301902d377904866fe3821993",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/ad6370c19fdf991301902d377904866fe3821993",
      "tree": {
        "sha": "23e52561f542064e4979e7a3493c8740693217a4",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/23e52561f542064e4979e7a3493c8740693217a4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/3026daa095797ffb5371ecf19bbd1de3d3b3eeb7",
          "sha": "3026daa095797ffb5371ecf19bbd1de3d3b3eeb7",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/3026daa095797ffb5371ecf19bbd1de3d3b3eeb7"
        }
      ],
      "message": "Reciprocal square root, parallel r-sqrt/inv\n\n- Factor out common exponentiation prelude for _fe_sqrt_var/fe_inv\n- Allow _fe_sqrt_var output to overwrite input\n- Make argument for _fe_normalizes_to_zero(_var) const\n- Add _fe_rsqrt_var for calculating reciprocal square root (1/sqrt(x))\n- Add _fe_par_rsqrt_inv_var to calculate the r-sqrt of one input and\n  the inverse of a second input, with a single exponentiation.",
      "committer": {
        "name": "Peter Dettman",
        "email": "peter.dettman@gmail.com",
        "date": "2015-12-06T11:21:26Z"
      },
      "author": {
        "name": "Peter Dettman",
        "email": "peter.dettman@gmail.com",
        "date": "2015-11-29T10:16:04Z"
      },
      "sha": "ad6370c19fdf991301902d377904866fe3821993"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTY2NDg2MTg6ZWFhMjk4YTdkYTU5NTk3MTJmOTg4MjYyMDU1YWJhMWVkNjY4YTA3Yw==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/eaa298a7da5959712f988262055aba1ed668a07c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/eaa298a7da5959712f988262055aba1ed668a07c",
      "tree": {
        "sha": "efa59a0bd67fa8f59903741c1a5d67e5ee1bde03",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/efa59a0bd67fa8f59903741c1a5d67e5ee1bde03"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/ad6370c19fdf991301902d377904866fe3821993",
          "sha": "ad6370c19fdf991301902d377904866fe3821993",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/ad6370c19fdf991301902d377904866fe3821993"
        }
      ],
      "message": "ECDH from compressed points with \"free\" sqrt",
      "committer": {
        "name": "Peter Dettman",
        "email": "peter.dettman@gmail.com",
        "date": "2015-12-07T07:01:35Z"
      },
      "author": {
        "name": "Peter Dettman",
        "email": "peter.dettman@gmail.com",
        "date": "2015-12-07T07:01:35Z"
      },
      "sha": "eaa298a7da5959712f988262055aba1ed668a07c"
    },
    {
      "event": "commented",
      "id": 163063844,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzA2Mzg0NA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/163063844",
      "actor": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-09T00:11:48Z",
      "updated_at": "2015-12-09T00:11:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think our formulae work on the twist, but we have never checked this. In particular Pieter's sage verification code assumes `b = 7`. (For fun, I checked with a bunch of other `b` values, but only ones that differed by a factor of a sixth power, which give isomorphic curves.)\n\nCan you get points on arbitrary twists or is there some fixed set we can check with sage?\n\nOr maybe just checking one member of all the isomorphism classes is sufficient?\n",
      "user": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-163063844",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "commented",
      "id": 163139426,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzEzOTQyNg==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/163139426",
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-09T07:24:37Z",
      "updated_at": "2015-12-09T07:24:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "\"The twist\" is an isomorphism class of the curves given by all the possible non-square K values. It should suffice to check y^2 = x^3 - 7. Generally, group formulae don't make use of B (==7.K^3) and so should calculate correctly on the twist. Point validation (using B obviously) doesn't appear to crop up _during_ a scalar mult. The derivation of secp256k1_gej_add_ge apparently involves substitution of the curve equation, so I think it bears another look (B's probably cancel out).\n\nThe x==0 possibility deserves attention; I haven't seen any problems yet. 3 divides the cofactor of the twist, and indeed {P3:P3.x == 0} is a point of order 3, with 2(P3) == -P3 (i.e. doubling negates the y coordinate).\n\nI think though that the endomorphism breaks correctness. The twist _does_ have an endomorphism, with of course the same 2 `beta` value possibilities (which depend only on the field characteristic), but the corresponding `lambda` values are different. In particular, multiplying a twist-point by the \"normal\" `lambda` does not preserve the y-coordinate and does not map x --> beta.x. I've generated the full endomorphism parameters for y^2 = x^3 - 7 if anyone wants them for an endomorphism-compatible test of the twisted curve.\n\nNevertheless, in this case we don't need a right answer (it will be discarded). Scaling a point's x-coordinate by `beta` still leaves a valid point (x^3 == (beta.x)^3), so group operations will all still be on valid (twist) points. The scalar decomposition is incorrect, but I can't see how that breaks anything.\n",
      "user": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-163139426",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "commented",
      "id": 163153540,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzE1MzU0MA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/163153540",
      "actor": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-09T08:54:11Z",
      "updated_at": "2015-12-09T10:04:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "The `b`s do cancel out in the derivation of `gej_add_ge`. It's used to convert between \"y1^2 - y2^2\" to \"x1^3 - x2^3\", i.e. a difference of squares in y is equivalent to a difference of cubes in x. This obviously depends on `a` being zero, but `b` is free.\n\nAs for the rest of your post I need to digest it. It's not obvious why this is the only twist we care about (or the only twist that exists?) but maybe I am just being dumb.\n\n**Edit:** OK, I understand now why \"nonresidue K\" and \"residue K\" form the only two equivalence classes of curves encountered in this function. I know you know this (better than me :)), but for other readers here is an explanation that makes me happy:\n1. First, if two curves `y^2 = x^3 + b` and `y^2 = x^3 + b'` over the same field have that `b = k^6b'` for some `k`, then the curves are isomorphic. (There are a few ways to derive this; it's why the effective affine trick works. IIRC the only way I've seen it derived is by purely calculational means in one of the papers linked from the effective-affine PR, but there are deeper ways I'm sure.)\n2. Next, if `K` and `K'` are either both quadratic residues or both nonresidues, then their quotient is a square. This follows from multiplicity of the Legendre symbol, which indicates residueness.\n3. Finally, `b` appears as `7K^3`; so two such `b` values differ by a power of six iff the corresponding `K` values differ by a power of two iff (by (2)) the `K` values are either both residues or both nonresidues.\n\n**Edit2** For every cyclic subgroup of the twist, there is a new `lambda` value right? So in principle we can enumerate these and choose the right one for the sake of the endomorphism optimization. (Though doing this in a const-time performant way is maybe hard.) Ah! But as you say `lambda` doesn't matter anyway. I believe you are correct on that.\n\n**Edit3:** As for as verification, I now believe that Pieter's symbolic verification is fine as-is to justify correct addition of points on the curve. The exhaustive verification needs to be amended to exhaustively check every point on a twist of the curve (which is `y^2 = x^3 + 7` mod 43; I'd need to check if the twist of this has suitably interesting behaviour, e.g. having a point with x = 0, having multiple cyclic subgroups, etc) \n",
      "user": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-163153540",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "commented",
      "id": 163688634,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2MzY4ODYzNA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/163688634",
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-10T17:04:40Z",
      "updated_at": "2015-12-10T17:04:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "y^2 = x^3 + 7 mod 43, generator e.g. (2,12), order 31, cofactor 1, beta 6, lambda 5.\ny^2 = x^3 - 7 mod 43, generator e.g. (4,10), order 19, cofactor 3, beta 6, lambda 7. (0, 6) is a point of order 3.\nShould be \"suitably interesting\" enough for starters. The same equation with either 67 or 79 as the field characteristic also gives cofactor 1 curves with cofactor 3 twists (the 2 points of order 3 will have x==0 of course, and the odd cofactor means no points with y==0).\n",
      "user": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-163688634",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "commented",
      "id": 164158956,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2NDE1ODk1Ng==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/164158956",
      "actor": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-12T14:42:49Z",
      "updated_at": "2015-12-12T14:42:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "Nice, thanks Peter! I'll submit a PR to add exhaustive checks for the twist using the sum of (4, 10) and (0, 6) as generator.\n\nWe've been discussing on IRC the fact that some of our internal functions are missing `_var` annotations, which should be fixed before 1.0 ... and that it would be nice if we could mechanically check that non-`_var` things only ever call non-`_var` things. Perhaps we want something similar for \"depends on the value of `b`\" so we could know what functions are twist-correct?\n",
      "user": {
        "login": "apoelstra",
        "id": 1351933,
        "node_id": "MDQ6VXNlcjEzNTE5MzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apoelstra",
        "html_url": "https://github.com/apoelstra",
        "followers_url": "https://api.github.com/users/apoelstra/followers",
        "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
        "organizations_url": "https://api.github.com/users/apoelstra/orgs",
        "repos_url": "https://api.github.com/users/apoelstra/repos",
        "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apoelstra/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-164158956",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "commented",
      "id": 165175840,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE2NTE3NTg0MA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/165175840",
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-12-16T17:03:08Z",
      "updated_at": "2015-12-16T17:03:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Perhaps we could flag group elements as having an implicit z factor (under VERIFY flags, similar to the way field element magnitudes are tracked) - just a flag, not the actual value. Then any functions that wouldn't work (or wouldn't work _right_) for such inputs can catch it. That flag can then be set wherever we use any of the isomorphism tricks, and carried through by group operations that support it.\n",
      "user": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-165175840",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-05-07T09:11:09Z",
      "updated_at": "2016-05-07T09:11:09Z",
      "source": {
        "issue": {
          "id": 151350458,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjgwMjg5NTY=",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/388",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/388/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/388/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/388/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/388",
          "number": 388,
          "state": "closed",
          "state_reason": null,
          "title": "bench_ecdh: fix call to secp256k1_context_create",
          "body": "",
          "user": {
            "login": "apoelstra",
            "id": 1351933,
            "node_id": "MDQ6VXNlcjEzNTE5MzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1351933?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/apoelstra",
            "html_url": "https://github.com/apoelstra",
            "followers_url": "https://api.github.com/users/apoelstra/followers",
            "following_url": "https://api.github.com/users/apoelstra/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/apoelstra/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/apoelstra/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/apoelstra/subscriptions",
            "organizations_url": "https://api.github.com/users/apoelstra/orgs",
            "repos_url": "https://api.github.com/users/apoelstra/repos",
            "events_url": "https://api.github.com/users/apoelstra/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/apoelstra/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/388",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/388",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/388.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/388.patch"
          },
          "closed_at": "2016-05-08T17:50:34Z",
          "created_at": "2016-04-27T10:17:44Z",
          "updated_at": "2017-06-19T13:21:47Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-10-07T17:58:33Z",
      "updated_at": "2019-10-07T17:58:33Z",
      "source": {
        "issue": {
          "id": 496019912,
          "node_id": "MDU6SXNzdWU0OTYwMTk5MTI=",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/665",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/665/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/665/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/665/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/issues/665",
          "number": 665,
          "state": "closed",
          "state_reason": "completed",
          "title": "Review if ECDH is still experimental",
          "body": "ECDH is needed for Lightning, and it would be convenient to use the implementation here.\r\n\r\nECDH was [marked as experimental back in 2015](https://github.com/bitcoin-core/secp256k1/commit/83221ecb009dab11d9967abb9aa4aa8d27fdf477), and the API was last changed more than a year ago.\r\n\r\nI am wondering how I can help make the ECDH implementation considered stable. ",
          "user": {
            "login": "ysangkok",
            "id": 284023,
            "node_id": "MDQ6VXNlcjI4NDAyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/284023?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ysangkok",
            "html_url": "https://github.com/ysangkok",
            "followers_url": "https://api.github.com/users/ysangkok/followers",
            "following_url": "https://api.github.com/users/ysangkok/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ysangkok/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ysangkok/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ysangkok/subscriptions",
            "organizations_url": "https://api.github.com/users/ysangkok/orgs",
            "repos_url": "https://api.github.com/users/ysangkok/repos",
            "events_url": "https://api.github.com/users/ysangkok/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ysangkok/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/1",
            "html_url": "https://github.com/bitcoin-core/secp256k1/milestone/1",
            "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/1/labels",
            "id": 1276306,
            "node_id": "MDk6TWlsZXN0b25lMTI3NjMwNg==",
            "number": 1,
            "state": "open",
            "title": "stable release (1.0.0-rc.1)",
            "description": "Motivation: libsecp is already widely used today, but often in a terribly outdated version. It's likely that a release process would help with that. Moreover, it simplifies using libsecp which may prevent developers from using less well tested alternatives. Lastly, without releases it's difficult to update the library in an organized fashion and communicate these updates.\r\n\r\nRelease Goals:\r\n\r\n- Stabilize API and documentation for functionality that exist today.\r\n- Fix a few known bugs.\r\n- Make ECDH non-experimental.\r\n\r\nThis milestone can be discussed in issue https://github.com/bitcoin-core/secp256k1/issues/286.",
            "creator": {
              "login": "gmaxwell",
              "id": 858454,
              "node_id": "MDQ6VXNlcjg1ODQ1NA==",
              "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/gmaxwell",
              "html_url": "https://github.com/gmaxwell",
              "followers_url": "https://api.github.com/users/gmaxwell/followers",
              "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
              "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
              "repos_url": "https://api.github.com/users/gmaxwell/repos",
              "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 12,
            "closed_issues": 26,
            "created_at": "2015-08-27T18:21:31Z",
            "updated_at": "2023-04-10T15:36:41Z"
          },
          "locked": false,
          "comments": 6,
          "closed_at": "2020-10-21T08:03:01Z",
          "created_at": "2019-09-19T20:50:23Z",
          "updated_at": "2020-10-21T08:03:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1538109357,
      "node_id": "IC_kwDOAP4Jqs5bra-t",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1538109357",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-08T10:04:39Z",
      "updated_at": "2023-05-08T10:04:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Closing this because it seems incomplete, and it's not clear how much of a gain this would be in today's setting with faster inverses (also, for new use cases, an even more efficient approach like #1198 is possible).\r\n\r\n@peterdettman Do you have any thoughts on how much this can still gain us, and if it's worth rebasing? We can reopen if need be.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/363#issuecomment-1538109357",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/363"
    },
    {
      "event": "closed",
      "id": 9188672750,
      "node_id": "CE_lADOAP4Jqs4HMgO1zwAAAAIjsATu",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/9188672750",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-08T10:04:40Z"
    },
    {
      "event": "mentioned",
      "id": 9188672824,
      "node_id": "MEE_lADOAP4Jqs4HMgO1zwAAAAIjsAU4",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/9188672824",
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-08T10:04:40Z"
    },
    {
      "event": "subscribed",
      "id": 9188672839,
      "node_id": "SE_lADOAP4Jqs4HMgO1zwAAAAIjsAVH",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/9188672839",
      "actor": {
        "login": "peterdettman",
        "id": 3423981,
        "node_id": "MDQ6VXNlcjM0MjM5ODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/peterdettman",
        "html_url": "https://github.com/peterdettman",
        "followers_url": "https://api.github.com/users/peterdettman/followers",
        "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
        "organizations_url": "https://api.github.com/users/peterdettman/orgs",
        "repos_url": "https://api.github.com/users/peterdettman/repos",
        "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/peterdettman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-08T10:04:40Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-08T10:36:00Z",
      "updated_at": "2023-05-08T10:36:00Z",
      "source": {
        "issue": {
          "id": 119351563,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTIwNTk0Mzk=",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/362",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/362/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/362/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/362/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/362",
          "number": 362,
          "state": "closed",
          "state_reason": null,
          "title": "Reciprocal square root, parallel r-sqrt/inv",
          "body": "- Factor out common exponentiation prelude for _fe_sqrt_var/fe_inv\n- Allow _fe_sqrt_var output to overwrite input\n- Make argument for _fe_normalizes_to_zero(_var) const\n- Add _fe_rsqrt_var for calculating reciprocal square root (1/sqrt(x))\n- Add _fe_par_rsqrt_inv_var to calculate the r-sqrt of one input and\n  the inverse of a second input, with a single exponentiation.\n\nBecause sqrt and inverse (by exponentiation) use very similar addition chains, some interesting functions are possible. x^((p - 3)/4) is the reciprocal square root 1/sqrt(x) (for quadratic residue x, else -1/sqrt(-x)), and already appears in the calculation of _fe_inverse.\n\nThe reciprocal root (RR) is in a way more useful than the sqrt itself, as we can calculate both the square root (x.RR) and the inverse (x.RR^4) from it very cheaply. Furthermore we can calculate RR(x) and 1/y for completely independent inputs x, y - with a single exponentiation, via RR(x.y^4). (Note that the current implementation does not try to handle x or y being 0).\n\nSome representative benchmark results (bench_internal):\n    field_inverse: min 4.74us / avg 4.77us / max 4.85us\n    field_sqrt_var: min 4.67us / avg 4.72us / max 4.86us\n    field_rsqrt_var: min 4.71us / avg 4.75us / max 4.84us\n    field_par_rsqrt_inv_var: min 4.90us / avg 4.93us / max 5.13us\n\nI think this can be applied to #262 to recover the output y coordinate. The trick there is to take a compressed input (i.e. x-only) X0, calculate K (== Y0^2) via the curve equation and then take the point (K.X0, K^2) as the \"decompressed\" point on an isomorphic curve (where the \"u\" value for the isom. is implicitly sqrt(K) == Y0). So we avoid a sqrt upfront. However at the end we calculate an inverse (using _fe_inv) already, so we can at that point calculate the actual RR(K) and 1/Z in parallel. Then we have sqrt(K) which is Y0 and we can choose which root based on the sign bit from the compressed input as usual. With sqrt(K) and 1/Z we can fully recover the output y.\n\nI'll try to find some time to re-do that pull request against the latest ECDH code.\n",
          "user": {
            "login": "peterdettman",
            "id": 3423981,
            "node_id": "MDQ6VXNlcjM0MjM5ODE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3423981?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/peterdettman",
            "html_url": "https://github.com/peterdettman",
            "followers_url": "https://api.github.com/users/peterdettman/followers",
            "following_url": "https://api.github.com/users/peterdettman/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/peterdettman/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/peterdettman/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/peterdettman/subscriptions",
            "organizations_url": "https://api.github.com/users/peterdettman/orgs",
            "repos_url": "https://api.github.com/users/peterdettman/repos",
            "events_url": "https://api.github.com/users/peterdettman/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/peterdettman/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/362",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/362",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/362.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/362.patch"
          },
          "closed_at": "2023-05-08T10:36:00Z",
          "created_at": "2015-11-29T10:49:16Z",
          "updated_at": "2023-05-08T10:36:00Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": []
}