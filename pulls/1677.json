{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677",
    "id": 2563599521,
    "node_id": "PR_kwDOAP4Jqs6YzWyh",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1677.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1677.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/42d3133421500c73a5df0e9ea95d9254d0761196",
    "number": 1677,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "build: Add SECP256K1_FORCE_HIDDEN_VISIBILITY",
    "user": {
      "login": "real-or-random",
      "id": 1071625,
      "node_id": "MDQ6VXNlcjEwNzE2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-or-random",
      "html_url": "https://github.com/real-or-random",
      "followers_url": "https://api.github.com/users/real-or-random/followers",
      "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
      "organizations_url": "https://api.github.com/users/real-or-random/orgs",
      "repos_url": "https://api.github.com/users/real-or-random/repos",
      "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/real-or-random/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Alternative to #1674.",
    "labels": [
      {
        "id": 4975362431,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
        "name": "build",
        "description": "",
        "color": "2F66C4",
        "default": false
      },
      {
        "id": 5492448291,
        "node_id": "LA_kwDOAP4Jqs8AAAABR2AcIw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/refactor/smell",
        "name": "refactor/smell",
        "description": "",
        "color": "FBCA04",
        "default": false
      }
    ],
    "created_at": "2025-06-03T11:23:30Z",
    "updated_at": "2025-07-01T06:57:08Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "52b2728c5dda9e372c82799616047e14a84039dc",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "real-or-random:202506-noexport2",
      "ref": "202506-noexport2",
      "sha": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 93596674,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MzU5NjY3NA==",
        "name": "secp256k1",
        "full_name": "real-or-random/secp256k1",
        "owner": {
          "login": "real-or-random",
          "id": 1071625,
          "node_id": "MDQ6VXNlcjEwNzE2MjU=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/real-or-random",
          "html_url": "https://github.com/real-or-random",
          "followers_url": "https://api.github.com/users/real-or-random/followers",
          "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
          "organizations_url": "https://api.github.com/users/real-or-random/orgs",
          "repos_url": "https://api.github.com/users/real-or-random/repos",
          "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/real-or-random/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/real-or-random/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/real-or-random/secp256k1",
        "archive_url": "https://api.github.com/repos/real-or-random/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/real-or-random/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/real-or-random/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/real-or-random/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/real-or-random/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/real-or-random/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/real-or-random/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/real-or-random/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/real-or-random/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/real-or-random/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/real-or-random/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/real-or-random/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/real-or-random/secp256k1/events",
        "forks_url": "https://api.github.com/repos/real-or-random/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/real-or-random/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/real-or-random/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/real-or-random/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/real-or-random/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/real-or-random/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/real-or-random/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/real-or-random/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/real-or-random/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/real-or-random/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/real-or-random/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/real-or-random/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/real-or-random/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/real-or-random/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/real-or-random/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/real-or-random/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:real-or-random/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/real-or-random/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/real-or-random/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/real-or-random/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/real-or-random/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/real-or-random/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/real-or-random/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/real-or-random/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/real-or-random/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/real-or-random/secp256k1/hooks",
        "svn_url": "https://github.com/real-or-random/secp256k1",
        "language": "C",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 16115,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-06-04T06:11:41Z",
        "created_at": "2017-06-07T05:39:43Z",
        "updated_at": "2025-03-10T14:14:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 1062,
        "stargazers_count": 2260,
        "watchers_count": 2260,
        "size": 12463,
        "default_branch": "master",
        "open_issues_count": 146,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-06-30T06:13:41Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2025-07-01T03:07:54Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 29,
    "deletions": 7,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 7,
    "comments": 17
  },
  "events": [
    {
      "event": "labeled",
      "id": 17955722668,
      "node_id": "LE_lADOAP4Jqs65lSiRzwAAAAQuPpWs",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17955722668",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T11:23:31Z",
      "label": {
        "name": "build",
        "color": "2F66C4"
      }
    },
    {
      "event": "labeled",
      "id": 17955722727,
      "node_id": "LE_lADOAP4Jqs65lSiRzwAAAAQuPpXn",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17955722727",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T11:23:32Z",
      "label": {
        "name": "refactor/smell",
        "color": "FBCA04"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17955792333,
      "node_id": "HRFPE_lADOAP4Jqs65lSiRzwAAAAQuP6XN",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17955792333",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5f8dbfefcea7a14b4ab72693912415f0339814d4",
      "commit_url": "https://api.github.com/repos/real-or-random/secp256k1/commits/5f8dbfefcea7a14b4ab72693912415f0339814d4",
      "created_at": "2025-06-03T11:26:53Z"
    },
    {
      "event": "reviewed",
      "id": 2891926609,
      "node_id": "PRR_kwDOAP4Jqs6sX0xR",
      "url": null,
      "actor": null,
      "commit_id": "5f8dbfefcea7a14b4ab72693912415f0339814d4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#pullrequestreview-2891926609",
      "submitted_at": "2025-06-03T11:31:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
    },
    {
      "event": "commented",
      "id": 2934809909,
      "node_id": "IC_kwDOAP4Jqs6u7aU1",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2934809909",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T11:32:03Z",
      "updated_at": "2025-06-03T11:32:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "Like #1674, this defaults to \"default\" (haha) visibility. While not perfect for static builds -- we'd probably prefer a default of \"hidden\" there -- this avoids any attempt to detection in the preprocessor whether a static or a shared library is built. Some kind of detection is possible (see my comment in #1674), but it will most likely never be perfect, and some manual override will be necessary anyway.  Defaulting to \"default\" avoids the need to detect and is thus much simpler. ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2934809909",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2936094041,
      "node_id": "IC_kwDOAP4Jqs6vAT1Z",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2936094041",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T15:56:24Z",
      "updated_at": "2025-06-03T15:56:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Hmm.\r\n\r\nThere's a pretty common assumption that when using `-DCMAKE_C_VISIBILITY_PRESET=hidden` or `CXXFLAGS=\"-fvisibility=hidden\"`, necessary symbols will be override that setting and be set to `default`. That's the premise behind [the de-facto guide](https://gcc.gnu.org/wiki/Visibility), at least.\r\n\r\nSo I think many packagers would run into problems with this, as that flag (which is usually considered safe for visibility-aware libs) would essentially produce broken shared libs (except on Windows).",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2936094041",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2936748818,
      "node_id": "IC_kwDOAP4Jqs6vCzsS",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2936748818",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T18:57:10Z",
      "updated_at": "2025-06-03T18:57:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Hm, that assumption sounds misguided to me. If a packager expects a visibility-aware lib, they should let the lib set the flags...\r\n\r\nWhatever, I think it's easy to address this concern by setting \"default\" in an else branch:\r\n```c\r\n#ifndef SECP256K1_API\r\n# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\r\n#  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\r\n#   define SECP256K1_API extern __attribute__ ((visibility (\"hidden\")))\r\n#  else\r\n#   define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\r\n#  endif\r\n# endif\r\n#endif\r\n```\r\n\r\nWhat do you think?",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2936748818",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2936790558,
      "node_id": "IC_kwDOAP4Jqs6vC94e",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2936790558",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T19:10:38Z",
      "updated_at": "2025-06-03T19:17:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Hm, that assumption sounds misguided to me. If a packager expects a visibility-aware lib, they should let the lib set the flags...\r\n\r\nlibsecp's in a pretty unique position here because it has no private non-static functions and only a handful of private vars. Most libs have a huge pile of functions and marking them all as hidden would be infeasible. Hence the compiler flag/default override combo.\r\n\r\nEdit:\r\nArguably the lib _is_ setting the flags if it sets CMAKE_C_VISIBILITY_PRESET to \"hidden\". For the reason I just mentioned, for most libs, that's more feasible. A packager then having that on by default in their toolchain file is just a noop.\r\n\r\n> \r\n> Whatever, I think it's easy to address this concern by setting \"default\" in an else branch:\r\n> \r\n> ```c\r\n> #ifndef SECP256K1_API\r\n> # if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\r\n> #  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\r\n> #   define SECP256K1_API extern __attribute__ ((visibility (\"hidden\")))\r\n> #  else\r\n> #   define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\r\n> #  endif\r\n> # endif\r\n> #endif\r\n> ```\r\n> \r\n> What do you think?\r\n\r\nSure, it's not conventional, but it gets the job done :)",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2936790558",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2936874433,
      "node_id": "IC_kwDOAP4Jqs6vDSXB",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2936874433",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T19:33:02Z",
      "updated_at": "2025-06-03T19:33:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "\r\n> Sure, it's not conventional, but it gets the job done :)\r\n\r\nOk, I can update the PR tomorrow. :)\r\n\r\n---\r\n\r\n> A packager then having that on by default in their toolchain file is just a noop.\r\n\r\nYep. So for visibility-aware libs, it's a noop, and for non-aware libs, it breaks the build. Sounds like an option you don't wanna have in your toolchain file. ;) Okay, just kidding, I guess there may be aware libs which leave setting the compiler detault to the user. \r\n",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2936874433",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2937233281,
      "node_id": "IC_kwDOAP4Jqs6vEp-B",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2937233281",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T21:19:41Z",
      "updated_at": "2025-06-03T21:19:41Z",
      "author_association": "NONE",
      "body": "Not sure yet what to think of the two approaches, but it does strike me as very unfortunate that we are introducing more bespoke behaviour yet again.  Can we at least only allow this being set when `SECP256K1_DISABLE_SHARED` is `ON`?",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2937233281",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 2938662385,
      "node_id": "IC_kwDOAP4Jqs6vKG3x",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2938662385",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-04T05:53:05Z",
      "updated_at": "2025-06-04T05:56:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "> but it does strike me as very unfortunate that we are introducing more bespoke behaviour yet again.\r\n\r\nI am not sure how bespoke this is, in the end. I think the ability to configure visibility for static builds is a valid use case in general, not specific to Bitcoin Core's planned use. It's just pretty niche... (That's different from #1678, which is merely a hack that works around a lack of functionality in CMake.)\r\n\r\nedit: But if the goal is to avoid the need for any of these, then I believe the proper way is to abandon the idea of building a monolithic kernel. IIUC, then you won't need to the CMake workaround, and you can use `-Wl,--exclude-libs,ALL`, so you won't need a visibility override.  But I assume there are good reasons to have a monolithic kernel?\r\n\r\n \r\n> Can we at least only allow this being set when `SECP256K1_DISABLE_SHARED` is `ON`?\r\n\r\nIn both PRs, the override is currently just an `#if` not exposed anywhere in the build systems. So if you set this via `-D...` on the command line, you need to expect that you're on your own. But as I said, I believe this is a valid feature, and so there's no good reason not to expose it in CMake and configure (could be done in a follow-up PR). And these will be the right places to raise an error when the override is used in a shared build.  ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2938662385",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDQyZDMxMzM0MjE1MDBjNzNhNWRmMGU5ZWE5NWQ5MjU0ZDA3NjExOTY",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/42d3133421500c73a5df0e9ea95d9254d0761196",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/42d3133421500c73a5df0e9ea95d9254d0761196",
      "tree": {
        "sha": "0c8793eda720d099c83488b31ab20fb9f31bddb5",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/0c8793eda720d099c83488b31ab20fb9f31bddb5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
          "sha": "92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/92394476e9b2d7ef4bb8dff7a9011c1e2e1db89f"
        }
      ],
      "message": "build: Add SECP256K1_FORCE_HIDDEN_VISIBILITY\n\nThe name should make it clear that this is intended for ELF platforms\nonly.",
      "committer": {
        "name": "Tim Ruffing",
        "email": "me@real-or-random.org",
        "date": "2025-06-04T06:06:43Z"
      },
      "author": {
        "name": "Tim Ruffing",
        "email": "me@real-or-random.org",
        "date": "2025-06-03T11:07:17Z"
      },
      "sha": "42d3133421500c73a5df0e9ea95d9254d0761196"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17974484452,
      "node_id": "HRFPE_lADOAP4Jqs65lSiRzwAAAAQvXN3k",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/17974484452",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "commit_url": "https://api.github.com/repos/real-or-random/secp256k1/commits/42d3133421500c73a5df0e9ea95d9254d0761196",
      "created_at": "2025-06-04T06:07:04Z"
    },
    {
      "event": "commented",
      "id": 2938716568,
      "node_id": "IC_kwDOAP4Jqs6vKUGY",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2938716568",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-04T06:15:30Z",
      "updated_at": "2025-06-04T06:15:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Sure, it's not conventional, but it gets the job done :)\r\n> \r\n> Ok, I can update the PR tomorrow. :)\r\n\r\nForce-pushed this update. \r\n\r\nHere's another variant of that approach: https://github.com/real-or-random/secp256k1/commit/2d92ac3de4e3a51d62ab25aa828bf6305bd3bbb6 Instead of an override to force \"hidden\", this has an override to do nothing. Then the user can use `-fvisibility` to set the visibility. That's a somewhat uncommon use of  `-fvisibility`, but this variant has the advantage (?) that the override won't break the build for shared libs. But I'm not convinced that it's better in the end. ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-2938716568",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "reviewed",
      "id": 2897292732,
      "node_id": "PRR_kwDOAP4Jqs6ssS28",
      "url": null,
      "actor": null,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#pullrequestreview-2897292732",
      "submitted_at": "2025-06-04T15:53:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
    },
    {
      "event": "reviewed",
      "id": 2918211388,
      "node_id": "PRR_kwDOAP4Jqs6t8F88",
      "url": null,
      "actor": null,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 42d3133421500c73a5df0e9ea95d9254d0761196",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#pullrequestreview-2918211388",
      "submitted_at": "2025-06-11T18:04:20Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
    },
    {
      "event": "commented",
      "id": 3017936749,
      "node_id": "IC_kwDOAP4Jqs6z4g9t",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3017936749",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T06:18:41Z",
      "updated_at": "2025-06-30T06:18:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "@TheCharlatan @hebasto If this is still needed for kernel, can you review this approach? ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3017936749",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "mentioned",
      "id": 18379742221,
      "node_id": "MEE_lADOAP4Jqs65lSiRzwAAAARHhJwN",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18379742221",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T06:18:43Z"
    },
    {
      "event": "subscribed",
      "id": 18379742244,
      "node_id": "SE_lADOAP4Jqs65lSiRzwAAAARHhJwk",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18379742244",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T06:18:43Z"
    },
    {
      "event": "mentioned",
      "id": 18379742267,
      "node_id": "MEE_lADOAP4Jqs65lSiRzwAAAARHhJw7",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18379742267",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T06:18:43Z"
    },
    {
      "event": "subscribed",
      "id": 18379742281,
      "node_id": "SE_lADOAP4Jqs65lSiRzwAAAARHhJxJ",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18379742281",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T06:18:43Z"
    },
    {
      "event": "commented",
      "id": 3018947561,
      "node_id": "IC_kwDOAP4Jqs6z8Xvp",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3018947561",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T12:21:40Z",
      "updated_at": "2025-06-30T12:21:40Z",
      "author_association": "MEMBER",
      "body": "cc @purpleKarrot ",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3018947561",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "mentioned",
      "id": 18385695442,
      "node_id": "MEE_lADOAP4Jqs65lSiRzwAAAARH33LS",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18385695442",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T12:21:41Z"
    },
    {
      "event": "subscribed",
      "id": 18385695464,
      "node_id": "SE_lADOAP4Jqs65lSiRzwAAAARH33Lo",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18385695464",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T12:21:41Z"
    },
    {
      "event": "commented",
      "id": 3019054216,
      "node_id": "IC_kwDOAP4Jqs6z8xyI",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3019054216",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T12:57:13Z",
      "updated_at": "2025-06-30T13:16:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "NACK\r\n\r\nI find the deeply nested `#ifdef` code quite convoluted and hard to reason about. It can be much simplified if you first define a platform abstraction for how exporting/importing works:\r\n\r\n```c\r\n#if defined(_WIN32) || defined(__CYGWIN__)\r\n#  define SECP256K1_EXPORT __declspec(dllexport)\r\n#  define SECP256K1_IMPORT __declspec(dllimport)\r\n#else\r\n#  define SECP256K1_EXPORT __attribute__ ((visibility (\"default\")))\r\n#  define SECP256K1_IMPORT __attribute__ ((visibility (\"default\")))\r\n#endif\r\n```\r\n\r\nAnd then use that abstraction for defining the API:\r\n\r\n```c\r\n#if defined(SECP256K1_STATIC)\r\n#  define SECP256K1_API\r\n#elif defined(SECP256K1_BUILD)\r\n#  define SECP256K1_API SECP256K1_EXPORT\r\n#else\r\n#  define SECP256K1_API SECP256K1_IMPORT\r\n#endif\r\n```\r\n\r\nIn CMake the two preprocessor definitions are set like this:\r\n\r\n```cmake\r\ntarget_compile_definitions(libsecp256k1 PUBLIC\r\n  $<$<STREQUAL:$<TARGET_PROPERTY:TYPE>,STATIC_LIBRARY>:SECP256K1_STATIC>\r\n)\r\nset_target_properties(libsecp256k1 PROPERTIES\r\n  DEFINE_SYMBOL SECP256K1_BUILD # if this is not set, it defaults to libsecp256k1_EXPORTS\r\n)\r\n```\r\n\r\nNote that `SECP256K1_STATIC` is defined as `PUBLIC`. This means that it affects both the library itself, but also other targets that use the library. The generator expression evaluates to nothing when the library is build as a shared object.\r\n\r\n`SECP256K1_BUILD` only affects the library itself. This could be achieved as well by setting a `PRIVATE` compile definition, but setting the `DEFINE_SYMBOL` has the advantage of overriding the builtin default of `<target>_EXPORTS`.\r\n\r\nThe result is that there are **three** modes that the header file can be interpreted in:\r\n\r\n* Building a shared library: The API is exported.\r\n* Using a shared library: The API is imported.\r\n* Building / using a static library: The API is neither imported nor exported.\r\n\r\nThe advantage of that approach is that the information of how clients need to consume the library is tied to the library interface. There are no extra flags that clients need to set. It is impossible for them to get to a situation where the `-D` and `-L` flags mismatch. They just add a dependency to their target, and it will correctly import the API **iff** needed.\r\n\r\nI don't see a reason why this approach shouldn't works for autotools just as well. All that needs to be done is add `-DSECP256K1_STATIC` to the `.pc` file when the package is built with static libraries.",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3019054216",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 3019280907,
      "node_id": "IC_kwDOAP4Jqs6z9pIL",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3019280907",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T13:59:32Z",
      "updated_at": "2025-06-30T14:04:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "To avoid name collisions when libraries form diamond of death dependencies, it might be good to provide a way for clients to define their own \"namespace\" (prefix) for public symbols. An example library that supports not one, but two approaches for this use case is  https://gitlab.kitware.com/utils/kwsys. To understand how that is used, look at https://github.com/Kitware/CMake/blob/master/Source/kwsys/String.h.in for example.",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3019280907",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "reviewed",
      "id": 2971508263,
      "node_id": "PRR_kwDOAP4Jqs6xHZ4n",
      "url": null,
      "actor": null,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I've tested changes from 42d3133421500c73a5df0e9ea95d9254d0761196 with Bitcoin Core in this [branch](https://github.com/hebasto/bitcoin/commits/250630-visibility.test/) as follows:\r\n```\r\n$ CFLAGS=\"-DSECP256K1_FORCE_HIDDEN_VISIBILITY=1\" cmake -B build -DBUILD_KERNEL_LIB=ON -DBUILD_SHARED_LIBS=ON -DREDUCE_EXPORTS=ON\r\n$ cmake --build build -t libbitcoinkernel\r\n$ nm -D --defined-only build/lib/libbitcoinkernel.so | grep secp256k1_ | wc -l\r\n64\r\n```\r\n\r\nIt doesn't seem to be working. Did I miss any important detail?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#pullrequestreview-2971508263",
      "submitted_at": "2025-06-30T14:42:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
    },
    {
      "event": "reviewed",
      "id": 2971617040,
      "node_id": "PRR_kwDOAP4Jqs6xH0cQ",
      "url": null,
      "actor": null,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#pullrequestreview-2971617040",
      "submitted_at": "2025-06-30T15:08:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
    },
    {
      "event": "commented",
      "id": 3019561235,
      "node_id": "IC_kwDOAP4Jqs6z-tkT",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3019561235",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:12:30Z",
      "updated_at": "2025-06-30T15:12:30Z",
      "author_association": "MEMBER",
      "body": "> I've tested changes from [42d3133](https://github.com/bitcoin-core/secp256k1/commit/42d3133421500c73a5df0e9ea95d9254d0761196) with Bitcoin Core in this [branch](https://github.com/hebasto/bitcoin/commits/250630-visibility.test/) as follows:\r\n> \r\n> ```\r\n> $ CFLAGS=\"-DSECP256K1_FORCE_HIDDEN_VISIBILITY=1\" cmake -B build -DBUILD_KERNEL_LIB=ON -DBUILD_SHARED_LIBS=ON -DREDUCE_EXPORTS=ON\r\n> $ cmake --build build -t libbitcoinkernel\r\n> $ nm -D --defined-only build/lib/libbitcoinkernel.so | grep secp256k1_ | wc -l\r\n> 64\r\n> ```\r\n> \r\n> It doesn't seem to be working. Did I miss any important detail?\r\n\r\nIt works after fixing a [typo](https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2175310532).",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3019561235",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 3019624878,
      "node_id": "IC_kwDOAP4Jqs6z-9Gu",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3019624878",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:28:45Z",
      "updated_at": "2025-06-30T15:28:45Z",
      "author_association": "MEMBER",
      "body": "While testing this PR as part of an integration with Bitcoin Core, I've noticed some inconvenience in having to set the extra `-DSECP256K1_FORCE_HIDDEN_VISIBILITY` flag from the parent CMake-based project. Could this be handled in a slightly more developer-friendly way?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3019624878",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 3019654338,
      "node_id": "IC_kwDOAP4Jqs6z_ETC",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3019654338",
      "actor": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:34:41Z",
      "updated_at": "2025-06-30T15:34:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Could this be handled in a slightly more developer-friendly way?\r\n\r\nThis is exactly what I meant. Downstream users need to match the preprocessor define and the linked library. There are four possible combinations, and two of them cause problems. Usage requirements should be tied to the library.",
      "user": {
        "login": "purpleKarrot",
        "id": 185240,
        "node_id": "MDQ6VXNlcjE4NTI0MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/185240?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/purpleKarrot",
        "html_url": "https://github.com/purpleKarrot",
        "followers_url": "https://api.github.com/users/purpleKarrot/followers",
        "following_url": "https://api.github.com/users/purpleKarrot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/purpleKarrot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/purpleKarrot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/purpleKarrot/subscriptions",
        "organizations_url": "https://api.github.com/users/purpleKarrot/orgs",
        "repos_url": "https://api.github.com/users/purpleKarrot/repos",
        "events_url": "https://api.github.com/users/purpleKarrot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/purpleKarrot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3019654338",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "unsubscribed",
      "id": 18389751146,
      "node_id": "UE_lADOAP4Jqs65lSiRzwAAAARIHVVq",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18389751146",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-30T15:38:51Z"
    },
    {
      "event": "commented",
      "id": 3022072612,
      "node_id": "IC_kwDOAP4Jqs60ISsk",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3022072612",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-01T06:37:49Z",
      "updated_at": "2025-07-01T06:37:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Building / using a static library: The API is neither imported nor exported.\r\n\r\nWell, the goal of this PR and of #1674 is precisely to enable the user to control visibility for static builds.",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3022072612",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    },
    {
      "event": "commented",
      "id": 3022135660,
      "node_id": "IC_kwDOAP4Jqs60IiFs",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3022135660",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-01T06:54:00Z",
      "updated_at": "2025-07-01T06:57:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I don't see a reason why this approach shouldn't works for autotools just as well. All that needs to be done is add `-DSECP256K1_STATIC` to the `.pc` file when the package is built with static libraries.\r\n\r\nThe fact that the packager uses autotools does not imply that the consumer will use pkgconfig. \r\n\r\nOur current logic attempts to make it possible to consume the library (at least on Unix-like) as a static library or as a dynamic library without the need to set any defines. \r\n\r\nThis is broadly useful for library consumers, independent of their build system and of the build system of the library. \r\n\r\nThe current code is based on https://www.gnu.org/software/libtool/manual/html_node/Windows-DLLs.html and https://gcc.gnu.org/wiki/Visibility, but has been refined since. I agree that the logic is convoluted, and it may be possible to improve this. But I think that's partly due to the fact that the build toolchains are convoluted, in particular if you want to support many platforms.",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#issuecomment-3022135660",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1677"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2123535651",
      "pull_request_review_id": 2891926609,
      "id": 2123535651,
      "node_id": "PRRC_kwDOAP4Jqs5-kpUj",
      "diff_hunk": "@@ -151,15 +142,30 @@ typedef int (*secp256k1_nonce_function)(\n #  define SECP256K1_API extern __declspec (dllimport)\n # endif\n #endif\n+#if !defined(SECP256K1_API)                                                   \\\n+      && defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)     \\\n+      && defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+ /* Building libsecp256k1 using GCC or compatible on non-Windows, and hidden\n+  * visibility is requested explicitly.\n+  *\n+  * Forcing hidden visibility can be useful, e.g., when building a static\n+  * library which is linked into a shared library, and the latter should not\n+  * reexport the libsecp256k1 API. Since this will create an unusable shared\n+  * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when building\n+  * a static library. (You want to ./configure with --disable-shared if using\n+  * Autotools.)\n+  *\n+  * While visibility is a concept that applies only to shared libraries, setting\n+  * visibility will still make a difference when building a static library: the\n+  * visibility settings will be stored in the static library, solely for the",
      "path": "include/secp256k1.h",
      "position": null,
      "original_position": 35,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "5f8dbfefcea7a14b4ab72693912415f0339814d4",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Mind sharing more details regarding \"the visibility settings will be stored in the static library\" please?",
      "created_at": "2025-06-03T11:31:29Z",
      "updated_at": "2025-06-03T11:31:29Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2123535651",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2123535651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2123539915",
      "pull_request_review_id": 2891932859,
      "id": 2123539915,
      "node_id": "PRRC_kwDOAP4Jqs5-kqXL",
      "diff_hunk": "@@ -151,15 +142,30 @@ typedef int (*secp256k1_nonce_function)(\n #  define SECP256K1_API extern __declspec (dllimport)\n # endif\n #endif\n+#if !defined(SECP256K1_API)                                                   \\\n+      && defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)     \\\n+      && defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+ /* Building libsecp256k1 using GCC or compatible on non-Windows, and hidden\n+  * visibility is requested explicitly.\n+  *\n+  * Forcing hidden visibility can be useful, e.g., when building a static\n+  * library which is linked into a shared library, and the latter should not\n+  * reexport the libsecp256k1 API. Since this will create an unusable shared\n+  * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when building\n+  * a static library. (You want to ./configure with --disable-shared if using\n+  * Autotools.)\n+  *\n+  * While visibility is a concept that applies only to shared libraries, setting\n+  * visibility will still make a difference when building a static library: the\n+  * visibility settings will be stored in the static library, solely for the",
      "path": "include/secp256k1.h",
      "position": null,
      "original_position": 35,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "5f8dbfefcea7a14b4ab72693912415f0339814d4",
      "in_reply_to_id": 2123535651,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "See https://stackoverflow.com/a/67473340/2725281. I don't think I have more to share, but I assume @theuni can confirm the behavior.",
      "created_at": "2025-06-03T11:33:22Z",
      "updated_at": "2025-06-03T11:33:23Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2123539915",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2123539915"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2126941240",
      "pull_request_review_id": 2897292732,
      "id": 2126941240,
      "node_id": "PRRC_kwDOAP4Jqs5-xow4",
      "diff_hunk": "@@ -152,15 +152,37 @@ typedef int (*secp256k1_nonce_function)(\n # endif\n #endif\n #ifndef SECP256K1_API\n-/* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n-   /* Building libsecp256k1 using GCC or compatible. */\n-#  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\n-# else\n-   /* Fall back to standard C's extern. */\n-#  define SECP256K1_API extern\n+# if defined(__GNUC__) && (__GNUC__ == 4) && defined(SECP256K1_BUILD)\n+   /* Building libsecp256k1 using GCC or compatible on non-Windows. */\n+#  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+    /* Hidden visibility is requested explicitly.\n+     *\n+     * Forcing hidden visibility can be useful, e.g., when building a static\n+     * library which is linked into a shared library, and the latter should not\n+     * reexport the libsecp256k1 API. Since this will create an unusable shared\n+     * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when\n+     * building a static library. (You want to ./configure with --disable-shared\n+     * if using Autotools.)\n+     *\n+     * While visibility is a concept that applies only to shared libraries,\n+     * setting visibility will still make a difference when building a static\n+     * library: the visibility settings will be stored in the static library,\n+     * solely for the potential case that the static library will be linked into\n+     * a shared library. In that case, the stored visibility settings will\n+     * resurface and be honored for the shared library. */\n+#   define SECP256K1_API extern __attribute__ ((visibility(\"hidden\")))",
      "path": "include/secp256k1.h",
      "position": 29,
      "original_position": 29,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Win32 needs this branch too, no? Otherwise it'll still require `-fvisibility=hidden` for static libs?",
      "created_at": "2025-06-04T15:53:40Z",
      "updated_at": "2025-06-04T15:53:40Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2126941240",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2126941240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2126946016",
      "pull_request_review_id": 2897300308,
      "id": 2126946016,
      "node_id": "PRRC_kwDOAP4Jqs5-xp7g",
      "diff_hunk": "@@ -152,15 +152,37 @@ typedef int (*secp256k1_nonce_function)(\n # endif\n #endif\n #ifndef SECP256K1_API\n-/* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n-   /* Building libsecp256k1 using GCC or compatible. */\n-#  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\n-# else\n-   /* Fall back to standard C's extern. */\n-#  define SECP256K1_API extern\n+# if defined(__GNUC__) && (__GNUC__ == 4) && defined(SECP256K1_BUILD)\n+   /* Building libsecp256k1 using GCC or compatible on non-Windows. */\n+#  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+    /* Hidden visibility is requested explicitly.\n+     *\n+     * Forcing hidden visibility can be useful, e.g., when building a static\n+     * library which is linked into a shared library, and the latter should not\n+     * reexport the libsecp256k1 API. Since this will create an unusable shared\n+     * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when\n+     * building a static library. (You want to ./configure with --disable-shared\n+     * if using Autotools.)\n+     *\n+     * While visibility is a concept that applies only to shared libraries,\n+     * setting visibility will still make a difference when building a static\n+     * library: the visibility settings will be stored in the static library,\n+     * solely for the potential case that the static library will be linked into\n+     * a shared library. In that case, the stored visibility settings will\n+     * resurface and be honored for the shared library. */\n+#   define SECP256K1_API extern __attribute__ ((visibility(\"hidden\")))",
      "path": "include/secp256k1.h",
      "position": 29,
      "original_position": 29,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "in_reply_to_id": 2126941240,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Actually, maybe `#if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)` could just go at the top, and keep with the `#ifndef(SECP256K1_API)` pattern below it?",
      "created_at": "2025-06-04T15:56:09Z",
      "updated_at": "2025-06-04T15:56:10Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2126946016",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2126946016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2128178486",
      "pull_request_review_id": 2899213452,
      "id": 2128178486,
      "node_id": "PRRC_kwDOAP4Jqs5-2W02",
      "diff_hunk": "@@ -152,15 +152,37 @@ typedef int (*secp256k1_nonce_function)(\n # endif\n #endif\n #ifndef SECP256K1_API\n-/* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n-   /* Building libsecp256k1 using GCC or compatible. */\n-#  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\n-# else\n-   /* Fall back to standard C's extern. */\n-#  define SECP256K1_API extern\n+# if defined(__GNUC__) && (__GNUC__ == 4) && defined(SECP256K1_BUILD)\n+   /* Building libsecp256k1 using GCC or compatible on non-Windows. */\n+#  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+    /* Hidden visibility is requested explicitly.\n+     *\n+     * Forcing hidden visibility can be useful, e.g., when building a static\n+     * library which is linked into a shared library, and the latter should not\n+     * reexport the libsecp256k1 API. Since this will create an unusable shared\n+     * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when\n+     * building a static library. (You want to ./configure with --disable-shared\n+     * if using Autotools.)\n+     *\n+     * While visibility is a concept that applies only to shared libraries,\n+     * setting visibility will still make a difference when building a static\n+     * library: the visibility settings will be stored in the static library,\n+     * solely for the potential case that the static library will be linked into\n+     * a shared library. In that case, the stored visibility settings will\n+     * resurface and be honored for the shared library. */\n+#   define SECP256K1_API extern __attribute__ ((visibility(\"hidden\")))",
      "path": "include/secp256k1.h",
      "position": 29,
      "original_position": 29,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "in_reply_to_id": 2126941240,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Win32 needs this branch too, no? Otherwise it'll still require `-fvisibility=hidden` for static libs?\r\n\r\nI don't think so (but I haven't tested this so far). As far as I understand, gcc defaults to hidden on Windows as soon as it sees an explicit `__declspec(dllexport)` annotation (and MSVC anyway exports only annotated symbols). At least this is what the libtool manual claims:\r\n\r\n> It should be noted that the GNU auto-export feature is turned off when an explicit `__declspec(dllexport)` is seen. The GNU tools do this to not make more symbols visible for projects that have already taken the trouble to decorate symbols. \r\n\r\nhttps://www.gnu.org/software/libtool/manual/html_node/Windows-DLLs.html\r\n\r\n> Actually, maybe `#if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)` could just go at the top, and keep with the `#ifndef(SECP256K1_API)` pattern below it?\r\n\r\nNot sure if I can follow. If you still think we'll need this for Windows, can you suggest/sketch a patch?\r\n",
      "created_at": "2025-06-05T07:45:37Z",
      "updated_at": "2025-06-05T07:45:37Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2128178486",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2128178486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2140778372",
      "pull_request_review_id": 2918205734,
      "id": 2140778372,
      "node_id": "PRRC_kwDOAP4Jqs5_ma-E",
      "diff_hunk": "@@ -152,15 +152,37 @@ typedef int (*secp256k1_nonce_function)(\n # endif\n #endif\n #ifndef SECP256K1_API\n-/* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n-   /* Building libsecp256k1 using GCC or compatible. */\n-#  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\n-# else\n-   /* Fall back to standard C's extern. */\n-#  define SECP256K1_API extern\n+# if defined(__GNUC__) && (__GNUC__ == 4) && defined(SECP256K1_BUILD)\n+   /* Building libsecp256k1 using GCC or compatible on non-Windows. */\n+#  if defined(SECP256K1_FORCE_HIDDEN_VISIBILITY)\n+    /* Hidden visibility is requested explicitly.\n+     *\n+     * Forcing hidden visibility can be useful, e.g., when building a static\n+     * library which is linked into a shared library, and the latter should not\n+     * reexport the libsecp256k1 API. Since this will create an unusable shared\n+     * library, SECP256K1_FORCE_HIDDEN_VISIBILITY should only be used when\n+     * building a static library. (You want to ./configure with --disable-shared\n+     * if using Autotools.)\n+     *\n+     * While visibility is a concept that applies only to shared libraries,\n+     * setting visibility will still make a difference when building a static\n+     * library: the visibility settings will be stored in the static library,\n+     * solely for the potential case that the static library will be linked into\n+     * a shared library. In that case, the stored visibility settings will\n+     * resurface and be honored for the shared library. */\n+#   define SECP256K1_API extern __attribute__ ((visibility(\"hidden\")))",
      "path": "include/secp256k1.h",
      "position": 29,
      "original_position": 29,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "in_reply_to_id": 2126941240,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "No worries.",
      "created_at": "2025-06-11T18:02:44Z",
      "updated_at": "2025-06-11T18:02:45Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2140778372",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2140778372"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 173,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2175310532",
      "pull_request_review_id": 2971617040,
      "id": 2175310532,
      "node_id": "PRRC_kwDOAP4Jqs6BqJrE",
      "diff_hunk": "@@ -152,15 +152,37 @@ typedef int (*secp256k1_nonce_function)(\n # endif\n #endif\n #ifndef SECP256K1_API\n-/* All cases not captured by the Windows-specific logic. */\n-# if defined(__GNUC__) && (__GNUC__ >= 4) && defined(SECP256K1_BUILD)\n-   /* Building libsecp256k1 using GCC or compatible. */\n-#  define SECP256K1_API extern __attribute__ ((visibility (\"default\")))\n-# else\n-   /* Fall back to standard C's extern. */\n-#  define SECP256K1_API extern\n+# if defined(__GNUC__) && (__GNUC__ == 4) && defined(SECP256K1_BUILD)",
      "path": "include/secp256k1.h",
      "position": 11,
      "original_position": 11,
      "commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "original_commit_id": "42d3133421500c73a5df0e9ea95d9254d0761196",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Why did `__GNUC__ >= 4` become `__GNUC__ == 4`?",
      "created_at": "2025-06-30T15:08:19Z",
      "updated_at": "2025-06-30T15:08:19Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1677#discussion_r2175310532",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2175310532"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 155,
      "original_line": 155,
      "side": "RIGHT"
    }
  ]
}