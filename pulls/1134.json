{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134",
    "id": 1031997216,
    "node_id": "PR_kwDOAP4Jqs49gwcg",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1134.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1134.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/eb49e93b50b3e40498789a500e2db8d9a20debbf",
    "number": 1134,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Add an experimental batch module",
    "user": {
      "login": "siv2r",
      "id": 56887198,
      "node_id": "MDQ6VXNlcjU2ODg3MTk4",
      "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/siv2r",
      "html_url": "https://github.com/siv2r",
      "followers_url": "https://api.github.com/users/siv2r/followers",
      "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
      "organizations_url": "https://api.github.com/users/siv2r/orgs",
      "repos_url": "https://api.github.com/users/siv2r/repos",
      "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/siv2r/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "### Overview\r\n\r\nThis PR adds support for batch verifying Schnorr signatures and tweaked x-only public key checks. It is based on the work of @jonasnick in #760. \r\n\r\n### Batch Verification\r\n\r\nThis implementation does not strictly follow the [BIP340 batch verification spec](https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki#batch-verification). The API design is loosely based on this suggestion: https://github.com/bitcoin-core/secp256k1/pull/760#issuecomment-809242311. Prior development discussion of this PR can be found in siv2r/secp256k1#2.\r\n\r\n### Speed Up\r\n - batch verifying Schnorr signatures is **_20% faster_** - [graph here](https://github.com/bitcoin-core/secp256k1/pull/1134/files#diff-583efe34fcab54bf7e5296bf65e522adc2345b3580e2a50ad5cccbd91dd82032)\r\n - batch verifying tweak pubkey checks is **_50% faster_** - [graph here](https://github.com/bitcoin-core/secp256k1/pull/1134/files#diff-1e73547c6cfbb18febec26224f0389d8ed1893ec7883f485a97caa583609b16b)\r\n\r\nFixes #1087",
    "labels": [
      {
        "id": 4975353639,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI3fJw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/feature",
        "name": "feature",
        "description": "",
        "color": "731E95",
        "default": false
      },
      {
        "id": 4975389731,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI5sIw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/performance",
        "name": "performance",
        "description": "",
        "color": "DE3CCC",
        "default": false
      }
    ],
    "created_at": "2022-08-21T08:55:46Z",
    "updated_at": "2024-12-03T22:07:21Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "siv2r:batch-verify-interface",
      "ref": "batch-verify-interface",
      "sha": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 385684881,
        "node_id": "MDEwOlJlcG9zaXRvcnkzODU2ODQ4ODE=",
        "name": "secp256k1",
        "full_name": "siv2r/secp256k1",
        "owner": {
          "login": "siv2r",
          "id": 56887198,
          "node_id": "MDQ6VXNlcjU2ODg3MTk4",
          "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/siv2r",
          "html_url": "https://github.com/siv2r",
          "followers_url": "https://api.github.com/users/siv2r/followers",
          "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
          "organizations_url": "https://api.github.com/users/siv2r/orgs",
          "repos_url": "https://api.github.com/users/siv2r/repos",
          "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/siv2r/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/siv2r/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/siv2r/secp256k1",
        "archive_url": "https://api.github.com/repos/siv2r/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/siv2r/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/siv2r/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/siv2r/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/siv2r/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/siv2r/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/siv2r/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/siv2r/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/siv2r/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/siv2r/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/siv2r/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/siv2r/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/siv2r/secp256k1/events",
        "forks_url": "https://api.github.com/repos/siv2r/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/siv2r/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/siv2r/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/siv2r/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/siv2r/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/siv2r/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/siv2r/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/siv2r/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/siv2r/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/siv2r/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/siv2r/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/siv2r/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/siv2r/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/siv2r/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/siv2r/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/siv2r/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:siv2r/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/siv2r/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/siv2r/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/siv2r/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/siv2r/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/siv2r/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/siv2r/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/siv2r/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/siv2r/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/siv2r/secp256k1/hooks",
        "svn_url": "https://github.com/siv2r/secp256k1",
        "language": "C",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 10791,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-03-05T09:22:44Z",
        "created_at": "2021-07-13T17:30:10Z",
        "updated_at": "2022-01-11T01:32:52Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "694ce8fb2d1fd8a3d641d7c33705691d41a2a860",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 1012,
        "stargazers_count": 2102,
        "watchers_count": 2102,
        "size": 12269,
        "default_branch": "master",
        "open_issues_count": 147,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-05T18:36:52Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2024-12-02T17:31:24Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 2531,
    "deletions": 76,
    "changed_files": 36,
    "commits": 9,
    "review_comments": 8,
    "comments": 7
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGRiMjEwZjQ2MWRhZmI4N2IzMDdiOThhNjYwMTNjODI1MDc3OTdmYjY",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/db210f461dafb87b307b98a66013c82507797fb6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/db210f461dafb87b307b98a66013c82507797fb6",
      "tree": {
        "sha": "2974a3c815c2de9dbc8880d612c92c60b0713667",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/2974a3c815c2de9dbc8880d612c92c60b0713667"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/694ce8fb2d1fd8a3d641d7c33705691d41a2a860",
          "sha": "694ce8fb2d1fd8a3d641d7c33705691d41a2a860",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/694ce8fb2d1fd8a3d641d7c33705691d41a2a860"
        }
      ],
      "message": "batch: Initialize an experimental batch module\n\nThis commit adds the foundational configuration, build scripts,\nand an initial structure for experimental batch module.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:37:37Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T10:52:02Z"
      },
      "sha": "db210f461dafb87b307b98a66013c82507797fb6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGUwZGJkNjY1ZmI3YzcxYWQ4ZDM0Yzc3M2EyZTIyMzRlYTNmM2VlNTk",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59",
      "tree": {
        "sha": "55e06ffbb327350e5099d48de4c73fab4e40f33e",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/55e06ffbb327350e5099d48de4c73fab4e40f33e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/db210f461dafb87b307b98a66013c82507797fb6",
          "sha": "db210f461dafb87b307b98a66013c82507797fb6",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/db210f461dafb87b307b98a66013c82507797fb6"
        }
      ],
      "message": "batch: Add `create` and `destroy` APIs\n\nThis commit adds the _batch_create and _batch_destroy APIs.\n\nRelevant Links:\n1. _batch_scratch_size allocation formula is taken from bench ecmult:\nhttps://github.com/bitcoin-core/secp256k1/blob/694ce8fb2d1fd8a3d641d7c33705691d41a2a860/src/bench_ecmult.c#L312.\n2. aux_rand16 param in _batch_create enables synthetic randomness for\nrandomizer generation: sipa/bips#204.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:38:15Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T11:08:48Z"
      },
      "sha": "e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGI3YzdiNTgxZGIzOTIyZGQ3ZTViZWU3ZjBmYzNlYjU1YjQ2NzllOTM",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93",
      "tree": {
        "sha": "e2df96367c1b34b5d937aa3c851f694685d0d503",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/e2df96367c1b34b5d937aa3c851f694685d0d503"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59",
          "sha": "e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/e0dbd665fb7c71ad8d34c773a2e2234ea3f3ee59"
        }
      ],
      "message": "batch, ecmult: Add `batch_verify` API and refactor `strauss_batch`\n\nThis commit refactors _ecmult_strauss_batch and adds _batch_verify API.\n\nThe current _ecmult_strauss_batch only works on empty scratch space. To\nmake _batch_verify work, we need _ecmult_strauss_batch to support a scratch\nspace pre-filled with scalars and points. So, it was refactored to do\nexactly that.\n\nThe _batch_verify API always uses the Strauss algorithm. It doesn't switch\nto Pippenger (unlike _ecmult_multi_var). _ecmult_pippenger_batch represents\npoints as secp256k1_ge whereas _ecmult_strauss_batch represents points as\nsecp256k1_gej. This makes supporting both Pippenger and Strauss difficult\n(at least with the current batch object design). Hence, _batch_verify only\nsupports Strauss for simplicity.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:38:15Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T13:16:51Z"
      },
      "sha": "b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDljMTIwZWYzNWEyYWY4NDI5ZGVkMjViMmEyN2U5ZDUyMzMyYzllN2U",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/9c120ef35a2af8429ded25b2a27e9d52332c9e7e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/9c120ef35a2af8429ded25b2a27e9d52332c9e7e",
      "tree": {
        "sha": "63d075bd5db9782bc3d0fc06074c335d46593826",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/63d075bd5db9782bc3d0fc06074c335d46593826"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93",
          "sha": "b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/b7c7b581db3922dd7e5bee7f0fc3eb55b4679e93"
        }
      ],
      "message": "batch: Add `batch_add_*` APIs\n\nThis commit adds the batch APIs:\n\n1. _batch_add_schnorrsig\n    Adds a Schnorr signature to the batch.\n\n2. _batch_add_xonlypub_tweak_check\n\tAdds a tweaked x-only pubkey check to the batch.\n\n3. _batch_usable\n\tChecks if a batch can be used by _batch_add_* APIs.\n\n**Side Note:**\nExposing batch_add_schnorrsig in the `secp256k1_schnorrsig.h` header\nfile (with batch module header guards) will force the user to define\nENABLE_MODULE_BATCH during their code compilation. Hence, it is in a\nstandalone `secp256k1_schnorrsig_batch` header file. A similar argument\ncould be made for batch_add_xonlypub_tweak_check.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:38:15Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T14:20:20Z"
      },
      "sha": "9c120ef35a2af8429ded25b2a27e9d52332c9e7e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGIzZDM3MGYzOTc2ZDY2MTA3YjI2Y2UyODExN2E4NTlkNTk1ZTk4ZDg",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/b3d370f3976d66107b26ce28117a859d595e98d8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/b3d370f3976d66107b26ce28117a859d595e98d8",
      "tree": {
        "sha": "2ae84cad249c58cb9fb76685b43189d27cafb878",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/2ae84cad249c58cb9fb76685b43189d27cafb878"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/9c120ef35a2af8429ded25b2a27e9d52332c9e7e",
          "sha": "9c120ef35a2af8429ded25b2a27e9d52332c9e7e",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/9c120ef35a2af8429ded25b2a27e9d52332c9e7e"
        }
      ],
      "message": "batch: Add API usage example\n\nThis commit adds an example C program using the batch API.\n\nGNU Autotools will compile this example only if both batch and\nschnorrsig modules are enabled.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:38:15Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T14:24:56Z"
      },
      "sha": "b3d370f3976d66107b26ce28117a859d595e98d8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGQwNDQ2YTg2ZjcwNmM2MTU2MDU4ZTcyNTRiYzlkN2Q1MWI4ODVjYmU",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/d0446a86f706c6156058e7254bc9d7d51b885cbe",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/d0446a86f706c6156058e7254bc9d7d51b885cbe",
      "tree": {
        "sha": "074741fd06bf1efed0dd1175c98295fce49ba37c",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/074741fd06bf1efed0dd1175c98295fce49ba37c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/b3d370f3976d66107b26ce28117a859d595e98d8",
          "sha": "b3d370f3976d66107b26ce28117a859d595e98d8",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/b3d370f3976d66107b26ce28117a859d595e98d8"
        }
      ],
      "message": "batch,ecmult: Add tests for core batch APIs and `strauss_batch` refactor\n\nThis commit adds the following tests:\n\t1. Cirrus scripts\n\t2. Batch API tests (ordered)\n\t3. Tagged SHA256 test\n\t4. BIP340 test vectors: https://github.com/bitcoin/bips/blob/master/bip-0340/test-vectors.csv\n\t5. Large random test for `strauss_batch` refactor",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T09:11:04Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T15:00:16Z"
      },
      "sha": "d0446a86f706c6156058e7254bc9d7d51b885cbe"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDhhNzdiMmM3NzBmY2JhMDlmOTBjODFiM2JjOWVmYmRkMTNhNjRmM2Q",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d",
      "tree": {
        "sha": "8f093b6120d284c274bb2941ff12cffae23499cb",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/8f093b6120d284c274bb2941ff12cffae23499cb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/d0446a86f706c6156058e7254bc9d7d51b885cbe",
          "sha": "d0446a86f706c6156058e7254bc9d7d51b885cbe",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/d0446a86f706c6156058e7254bc9d7d51b885cbe"
        }
      ],
      "message": "batch: Add tests for `batch_add_*` APIs\n\nThis commit adds the following tests:\n\t1. Random bitflip test for randomizer generating function\n\t2. Random bitflip in Schnorr Signature (_batch_add_schnorrsig test)\n\t3. NULL arg tests (for both _batch_add APIs)",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T09:12:27Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T15:10:01Z"
      },
      "sha": "8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d"
    },
    {
      "event": "mentioned",
      "id": 7227424167,
      "node_id": "MEE_lADOAP4Jqs5QMZmPzwAAAAGuyb2n",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/7227424167",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T08:55:47Z"
    },
    {
      "event": "subscribed",
      "id": 7227424170,
      "node_id": "SE_lADOAP4Jqs5QMZmPzwAAAAGuyb2q",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/7227424170",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T08:55:47Z"
    },
    {
      "event": "commented",
      "id": 1221503112,
      "node_id": "IC_kwDOAP4Jqs5IzqiI",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1221503112",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T09:02:36Z",
      "updated_at": "2022-08-23T08:24:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "> This implementation does not strictly follow the [BIP340 batch verification spec](https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki#batch-verification).\r\n\r\nFor example,\r\n- the random numbers (or randomizers) aren’t generated by passing a seed (hash of all inputs) to CSPRNG\r\n- allows mixing of schnorrsig and tweak checks\r\n- uses the tag *“BIP0340/batch”* for initializing the sha256 obj (not in the BIP340 specs)\r\n\r\n### Alternative Design Options\r\n\r\n- batch module design\r\n    - the current code has: (new batch module)\r\n        - `create`, `destroy`, and `verify` APIs in the batch module\r\n        - `batch_add_*` APIs in schnorrsig and extrakeys modules (with `#ifdef ENABLE_MODULE_BATCH`)\r\n    - alternate option 1: (new batch module)\r\n        - place the `batch_add_*` APIs in the batch module (with schnorrsig and extrakeys header guards)\r\n    - alternate option 2: (no module)\r\n        - place `create`, `destroy`, and `verify` in `src/secp256k1.c`\r\n        - place `batch_add_*` APIs in schnorrsig and extrakeys modules\r\n    - relevant discussions: \r\n        - https://github.com/siv2r/secp256k1/pull/2#issuecomment-1134938298\r\n        - https://github.com/siv2r/secp256k1/pull/2#issuecomment-1162522289\r\n- Delayed randomizer generation\r\n    - the current code generates a randomizer just after a user enters input (in `_batch_add_*`)\r\n    - we could instead generate them (in `batch_verify`) after the user enters all their input\r\n    - Pros: follows bip340 specs. Cons: consumes more memory.\r\n    - more info: https://github.com/bitcoin-core/secp256k1/issues/1087#issuecomment-1067276801 and [here](https://siv2r.notion.site/siv2r/Batch-Verification-Interface-Proposal-4b41080bd3de4c59a37ad9279d562155#898b8bcc5dc64aa994e5accaa5c3ab2c)\r\n- Use BLAKE256 instead of SHA256 for generating randomizers (to improve speed).\r\n- In `_batch_create`, we could:\r\n    - Get memory size instead of `max_terms`.\r\n    - Provide pre-determined sizes (small, medium, and large) instead of `max_terms`.\r\n        - Better test coverage?",
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1221503112",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "commented",
      "id": 1221503310,
      "node_id": "IC_kwDOAP4Jqs5IzqlO",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1221503310",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T09:03:50Z",
      "updated_at": "2022-08-21T09:03:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "### Questions\r\n- Streaming batch API (this PR) vs Single call batch API?\r\n- Is transparent verification required?\r\n    - the current code implements transparent verification (inside `batch_add_*` APIs)\r\n    - without transparent verification, the user needs to check for space in the batch before calling `_batch_add` APIs:\r\n    ```c\r\n    if (batch_enough_space_for_schnorrsig) {\r\n      batch_add_schnorrsig()\r\n    }\r\n    ```\r\n- On an empty batch, Should `_batch_verify` return 0 or 1?\r\n    - the current code returns 1\r\n        - simple implementation\r\n    - if we want to return 0\r\n        - needs an extra param in batch to avoid ANDing the result with its initial value\r\n        - provides better security?\r\n- `xonly_pubkey_tweak_add_check` recommends `ctx` to be initialized for verification, but it can work even if `ctx` is initialized as none.\r\n    - Since `batch_add_tweak_xonlypub_check` is based on `tweak_add_check`, should it also recommend that `ctx` be initialized for verification?\r\n    - Can it recommend that `ctx` be initialized for none instead?\r\n- A better name for `secp256k1_batch_usable`?\r\n    - the current name is confusing\r\n    - here, *“usable”* means if the batch can be used by the `batch_add_*` functions",
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1221503310",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGQzZmJhZTU1ODAzMjcyZjdiYjlhMGY3MDExMGZkMjcxMDk1NGUyOTQ",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/d3fbae55803272f7bb9a0f70110fd2710954e294",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/d3fbae55803272f7bb9a0f70110fd2710954e294",
      "tree": {
        "sha": "4d262b90b3aad4281f45b208a6f1dfae67bd9d73",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/4d262b90b3aad4281f45b208a6f1dfae67bd9d73"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d",
          "sha": "8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/8a77b2c770fcba09f90c81b3bc9efbdd13a64f3d"
        }
      ],
      "message": "batch, extrakeys: Add benchmark for batch verify and `tweak_add_check`\n\nThis commit adds benchmarks for Schnorr signature batch verification,Tweaked\npubkey check batch verification, and Tweaked pubkey check (single verification).\n\nFor batch verify benchmark, the number of sigs (or checks) in the batch\nvaries from 1 to SECP256K1_BENCH_ITERS with a 20% increment.",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-21T10:32:41Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-19T15:18:30Z"
      },
      "sha": "d3fbae55803272f7bb9a0f70110fd2710954e294"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKGViNDllOTNiNTBiM2U0MDQ5ODc4OWE1MDBlMmRiOGQ5YTIwZGViYmY",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "tree": {
        "sha": "4eee0836eabec67e3fb48dbc28f3ace4cb0f8ae7",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/4eee0836eabec67e3fb48dbc28f3ace4cb0f8ae7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/d3fbae55803272f7bb9a0f70110fd2710954e294",
          "sha": "d3fbae55803272f7bb9a0f70110fd2710954e294",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/d3fbae55803272f7bb9a0f70110fd2710954e294"
        }
      ],
      "message": "batch: Generate graphs for batch verification speed up\n\nThis commit generates two semi-log graphs that visualize the batch\nverification speed up over single verification (y-axis) wrt the number\nof signatures (or tweak checks) in the batch (x-axis). The input data\npoints are taken from the batch verify benchmark.\n\nGNU plot was used to generate these graphs (plot.gp file). The instructions\nto reproduce these graphs (on your local machine) are given in\ndoc/speedup-batch.md file.\n\nThe value of `STRAUSS_MAX_TERMS_PER_BATCH` was calculated (approx) from\nthe generated graphs.\nRelevant discussion: https://github.com/siv2r/secp256k1/pull/2#issuecomment-1211585236",
      "committer": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-21T10:32:51Z"
      },
      "author": {
        "name": "siv2r",
        "email": "siv2ram@gmail.com",
        "date": "2022-08-20T05:28:44Z"
      },
      "sha": "eb49e93b50b3e40498789a500e2db8d9a20debbf"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7227524052,
      "node_id": "HRFPE_lADOAP4Jqs5QMZmPzwAAAAGuy0PU",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/7227524052",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T10:33:59Z"
    },
    {
      "event": "commented",
      "id": 1221519090,
      "node_id": "IC_kwDOAP4Jqs5Izuby",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1221519090",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-21T10:35:46Z",
      "updated_at": "2022-08-21T10:35:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "In `extrakeys/bench_impl.h`, cast pointers to `(void *)` before freeing to avoid MSVC warning.",
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1221519090",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "reviewed",
      "id": 1082558327,
      "node_id": "PRR_kwDOAP4Jqs5Ahod3",
      "url": null,
      "actor": null,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#pullrequestreview-1082558327",
      "submitted_at": "2022-08-23T17:11:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
    },
    {
      "event": "reviewed",
      "id": 1083948472,
      "node_id": "PRR_kwDOAP4Jqs5Am724",
      "url": null,
      "actor": null,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "> This implementation does not strictly follow the BIP340 batch verification spec. [...] the random numbers (or randomizers) aren’t generated by passing a seed (hash of all inputs) to CSPRNG\r\n\r\nThe [security argument](https://github.com/sipa/bips/issues/219#issuecomment-815575754) for batch verification should relatively easily translate to the approach in this PR.\r\n\r\n> Is transparent verification required?\r\n\r\nI initially wasn't a fan of transparent verification because developers generally want to know how long a certain function call takes and don't want to be surprised by some `batch_add` calls taking much longer than others. But I changed my mind on this.\r\n\r\nThe batch verification API right now is used as follows:\r\n```\r\nfor (i = 0; i < N_SIGS; i++) {\r\n    if(!batch_usable(batch) || !batch_add_schnorrsig(batch, sig[i], msg[i], sizeof(msg[i]), &pk)) {\r\n        return 0;\r\n    }\r\n}\r\nif(!batch_verify(ctx, batch)) {\r\n    return 0;\r\n}\r\n```\r\n\r\nWithout TV, then one option is to have the user create a batch that is large enough. Of course that's not alway possible because the batch can get larger than the available memory. Moreover, this would require adding an API that, given a number of schnorrsigs and tweaks (and more in the future) returns the size of the required batch. That seems way more complicated than TV.\r\n\r\nIf there's no TV and the batch is not guaranteed to be large enough, then users need to essentially reimplement something like transparent verification:\r\n```\r\nfor (i = 0; i < N_SIGS; i++) {\r\n    if(!schnorrsig_batch_has_space(batch)) {\r\n        if(!batch_verify(batch)) {\r\n            return 0;\r\n        }\r\n    }\r\n    if (!batch_add_schnorrsig(batch, sig[i], msg[i], sizeof(msg[i]), &pk)) {\r\n        return 0;\r\n    }\r\n}\r\nif(!batch_verify(ctx, batch)) {\r\n    return 0;\r\n}\r\n```\r\n\r\n1. This is more code compared to having TV built into `batch_add`.\r\n2. `*_batch_has_space` is specific to whatever you're trying to add to the batch, i.e., we would also have to add `tweak_has_space`, for example.\r\n3. The `batch_usable` function in the current implementation (with TV) only allows for earlier aborts and is not essential (unless you want to determine if a `batch_add` failed because its input is obviously malformed or because the previous `batch_add` triggered a `batch_verify` that failed).\r\n4. If users don't want to use TV (for whatever reason), then they don't have to - even in the current implementation. This requires counting the terms that have been added to the batch and verifying before it's full (perhaps we can make this simpler).\r\n\r\n> xonly_pubkey_tweak_add_check recommends ctx to be initialized for verification, but it can work even if ctx is initialized as none. [...] Since batch_add_tweak_xonlypub_check is based on tweak_add_check, should it also recommend that ctx be initialized for verification?\r\n\r\nI don't think so. #1126 removes \"initialized for verification\" from the API docs of `xonly_pubkey_tweak_add_check`. For consistency it would be better if you'd remove \"(can be initialized for none)\" from the API doc.",
      "user": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#pullrequestreview-1083948472",
      "submitted_at": "2022-08-24T14:43:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
    },
    {
      "event": "commented",
      "id": 1226112337,
      "node_id": "IC_kwDOAP4Jqs5JFP1R",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1226112337",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-24T18:54:59Z",
      "updated_at": "2022-08-24T18:54:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "I haven't had a closer look yet but I agree with @jonasnick's comments about TV. ",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1226112337",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "mentioned",
      "id": 7253515396,
      "node_id": "MEE_lADOAP4Jqs5QMZmPzwAAAAGwV9yE",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/7253515396",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-24T18:54:59Z"
    },
    {
      "event": "subscribed",
      "id": 7253515410,
      "node_id": "SE_lADOAP4Jqs5QMZmPzwAAAAGwV9yS",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/7253515410",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-24T18:54:59Z"
    },
    {
      "event": "commented",
      "id": 1364730862,
      "node_id": "IC_kwDOAP4Jqs5RWCPu",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1364730862",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-25T19:54:27Z",
      "updated_at": "2022-12-25T19:54:27Z",
      "author_association": "NONE",
      "body": "@siv2r Are you still working on this topic? Do you plan to address @jonasnick 's comments?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1364730862",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "mentioned",
      "id": 8108717213,
      "node_id": "MEE_lADOAP4Jqs5QMZmPzwAAAAHjUTSd",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8108717213",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-25T19:54:28Z"
    },
    {
      "event": "subscribed",
      "id": 8108717214,
      "node_id": "SE_lADOAP4Jqs5QMZmPzwAAAAHjUTSe",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8108717214",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-25T19:54:28Z"
    },
    {
      "event": "mentioned",
      "id": 8108717215,
      "node_id": "MEE_lADOAP4Jqs5QMZmPzwAAAAHjUTSf",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8108717215",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-25T19:54:28Z"
    },
    {
      "event": "subscribed",
      "id": 8108717216,
      "node_id": "SE_lADOAP4Jqs5QMZmPzwAAAAHjUTSg",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8108717216",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-25T19:54:28Z"
    },
    {
      "event": "commented",
      "id": 1364933417,
      "node_id": "IC_kwDOAP4Jqs5RWzsp",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1364933417",
      "actor": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-26T06:34:40Z",
      "updated_at": "2022-12-26T06:34:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "@fjahr, this PR needs review from other contributors regarding the (batch API) design decision made here. The https://github.com/bitcoin-core/secp256k1/pull/1134#pullrequestreview-1083948472 comment showed its support for the \"Transparent Verification\" feature, which was implemented.\r\n\r\nIIRC, two documentation changes are required (at the time of writing):\r\n- remove \"initialized for verification\" from the `batch_add_tweak_xonlypub_check` doc.\r\n- document that `batch_verify_1` is slower than `schnorrsig_verify` (see [#1134 (comment)](https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r952908842)).\r\n\r\nI avoided making these changes immediately to keep the commit history clean for reviewers. I would be happy to work on any required changes after it gets enough review.",
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-1364933417",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    },
    {
      "event": "mentioned",
      "id": 8109873535,
      "node_id": "MEE_lADOAP4Jqs5QMZmPzwAAAAHjYtl_",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8109873535",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-26T06:34:40Z"
    },
    {
      "event": "subscribed",
      "id": 8109873536,
      "node_id": "SE_lADOAP4Jqs5QMZmPzwAAAAHjYtmA",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8109873536",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-26T06:34:40Z"
    },
    {
      "event": "reviewed",
      "id": 1905035503,
      "node_id": "PRR_kwDOAP4Jqs5xjIjv",
      "url": null,
      "actor": null,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "I have opened a draft PR for using this in bitcoin core: https://github.com/bitcoin/bitcoin/pull/29491\r\n\r\nHere is a rebased branch of the code that I am using: https://github.com/fjahr/secp256k1/tree/pr1134-rebase-2024\r\n\r\nI hope this can create some new interest and motivate people to review here as well.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#pullrequestreview-1905035503",
      "submitted_at": "2024-02-28T00:02:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
    },
    {
      "event": "labeled",
      "id": 11952565797,
      "node_id": "LE_lADOAP4Jqs5QMZmPzwAAAALIba4l",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/11952565797",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T14:29:06Z",
      "label": {
        "name": "feature",
        "color": "731E95"
      }
    },
    {
      "event": "labeled",
      "id": 11952565806,
      "node_id": "LE_lADOAP4Jqs5QMZmPzwAAAALIba4u",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/11952565806",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T14:29:06Z",
      "label": {
        "name": "performance",
        "color": "DE3CCC"
      }
    },
    {
      "event": "reviewed",
      "id": 1906554262,
      "node_id": "PRR_kwDOAP4Jqs5xo7WW",
      "url": null,
      "actor": null,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#pullrequestreview-1906554262",
      "submitted_at": "2024-02-28T15:21:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
    },
    {
      "event": "commented",
      "id": 2515648899,
      "node_id": "IC_kwDOAP4Jqs6V8cGD",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/2515648899",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-03T22:07:19Z",
      "updated_at": "2024-12-03T22:07:19Z",
      "author_association": "NONE",
      "body": "> Here is a rebased branch of the code that I am using: https://github.com/fjahr/secp256k1/tree/pr1134-rebase-2024\r\n\r\nFWIW, I have updated the rebased code recently and also added the changes necessary to build the module with cmake.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#issuecomment-2515648899",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1134"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/952908842",
      "pull_request_review_id": 1082558327,
      "id": 952908842,
      "node_id": "PRRC_kwDOAP4Jqs44zDwq",
      "diff_hunk": "@@ -0,0 +1,137 @@\n+Benchmark                          ,    Min(us)    ,    Avg(us)    ,    Max(us)    \n+\n+schnorrsig_sign                    ,    50.4       ,    50.5       ,    50.7    \n+schnorrsig_verify                  ,    89.1       ,    89.2       ,    89.3    \n+schnorrsig_batch_verify_1          ,   104.0       ,   104.0       ,   104.0    ",
      "path": "doc/speedup-batch/bench_output.txt",
      "position": 5,
      "original_position": 5,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "batch_verify_1 shouldn't be slower than non-batch verify. Is it possible to revert to using non-batch validation logic for this case?",
      "created_at": "2022-08-23T17:11:47Z",
      "updated_at": "2022-08-23T17:12:04Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r952908842",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/952908842"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/953161088",
      "pull_request_review_id": 1082913011,
      "id": 953161088,
      "node_id": "PRRC_kwDOAP4Jqs440BWA",
      "diff_hunk": "@@ -0,0 +1,137 @@\n+Benchmark                          ,    Min(us)    ,    Avg(us)    ,    Max(us)    \n+\n+schnorrsig_sign                    ,    50.4       ,    50.5       ,    50.7    \n+schnorrsig_verify                  ,    89.1       ,    89.2       ,    89.3    \n+schnorrsig_batch_verify_1          ,   104.0       ,   104.0       ,   104.0    ",
      "path": "doc/speedup-batch/bench_output.txt",
      "position": 5,
      "original_position": 5,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": 952908842,
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Not possible with the current design. \r\n\r\nThe non-batch validation (`secp256k1_schnorrsig_verify`) logic looks something like this:\r\n - calc `rj` using `secp256k1_ecmult`: Rj = s*G - e*P\r\n - convert `rj` (gej) to `r` (ge)\r\n - check if the `r.x = sig[0:32]` and `r.y = even`\r\n\r\none schnorrsig occupies two points in the batch, and one tweak check occupies one point in the batch. If a batch contains two points, there is no guarantee that they are from a schnorrsig (R, P). It could be from two tweak checks. So, we can't use the `r.y = even` check.\r\n\r\nHence, I tried implementing a slightly modified `schnorrsig_verify` logic (not implement in this PR):\r\n - calc `neg_rj` using `secp256k1_ecmult`: `neg_Rj = -s*G + batch.scalars[1]*batch.points[1]`\r\n - check if `neg_rj + batch.points[0] == inf` using `_gej_add_var`\r\n     - `batch.scalars[0] = 1` always. So, we don't need to use `ecmult` again \r\n\r\nThis gives somewhat better benchmarks than before:\r\n```bash\r\nBenchmark                          ,    Min(us)    ,    Avg(us)    ,    Max(us)    \r\n\r\nschnorrsig_sign                    ,    49.1       ,    50.1       ,    53.4    \r\nschnorrsig_verify                  ,    86.6       ,    87.2       ,    88.4    \r\nschnorrsig_batch_verify_1          ,    94.7       ,    95.0       ,    95.2 \r\n```\r\nBut `schnorrsig_batch_verify_1` is still slower than `schnorrsig_verify`.\r\n ",
      "created_at": "2022-08-23T22:29:40Z",
      "updated_at": "2023-08-30T04:05:36Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r953161088",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/953161088"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505159671",
      "pull_request_review_id": 1905035503,
      "id": 1505159671,
      "node_id": "PRRC_kwDOAP4Jqs5Ztun3",
      "diff_hunk": "@@ -0,0 +1,206 @@\n+#ifndef SECP256K1_MODULE_BATCH_MAIN_H\n+#define SECP256K1_MODULE_BATCH_MAIN_H\n+\n+#include \"include/secp256k1_batch.h\"\n+\n+/* Maximum number of scalar-point pairs on the batch\n+ * for which `secp256k1_batch_verify` remains efficient */\n+#define STRAUSS_MAX_TERMS_PER_BATCH 106\n+\n+/* Assume two batch objects (batch1 and batch2) and we call\n+ * `batch_add_tweak_check` on batch1 and `batch_add_schnorrsig` on batch2.\n+ * In this case, the same randomizer will be generated if the input bytes to\n+ * batch1 and batch2 are the same (even though we use different `batch_add_` funcs).\n+ * Including this tag during randomizer generation (to differentiate btw\n+ * `batch_add_` funcs) will prevent such mishaps. */\n+enum batch_add_type {schnorrsig = 1, tweak_check = 2};\n+\n+/** Opaque data structure that holds information required for the batch verification.\n+ *\n+ *  Members:\n+ *       data: scratch space object that contains points (_gej) and their\n+ *             respective scalars. To be used in Multi-Scalar Multiplication\n+ *             algorithms such as Strauss and Pippenger.\n+ *    scalars: pointer to scalars allocated on the scratch space.\n+ *     points: pointer to points allocated on the scratch space.\n+ *       sc_g: scalar corresponding to the generator point (G) in Multi-Scalar\n+ *             Multiplication equation.\n+ *     sha256: contains hash of all the inputs (schnorrsig/tweaks) present in\n+ *             the batch object, expect the first input. Used for generating a random secp256k1_scalar\n+ *             for each term added by secp256k1_batch_add_*.\n+ *     sha256: contains hash of all inputs (except the first one) present in the batch.\n+ *             `secp256k1_batch_add_` APIs use these for randomizing the scalar (i.e., multiplying\n+ *             it with a newly generated scalar) before adding it to the batch.\n+ *        len: number of scalar-point pairs present in the batch.\n+ *   capacity: max number of scalar-point pairs that the batch can hold.\n+ *     result: tells whether the given set of inputs (schnorrsigs or tweak checks) is valid\n+ *             or invalid. 1 = valid and 0 = invalid. By default, this is set to 1\n+ *             during batch object creation (i.e., `secp256k1_batch_create`).\n+ *\n+ *  The following struct name is typdef as secp256k1_batch (in include/secp256k1_batch.h).\n+ */\n+struct secp256k1_batch_struct{\n+    secp256k1_scratch *data;\n+    secp256k1_scalar *scalars;\n+    secp256k1_gej *points;\n+    secp256k1_scalar sc_g;\n+    secp256k1_sha256 sha256;\n+    size_t len;\n+    size_t capacity;\n+    int result;\n+};\n+\n+static size_t secp256k1_batch_scratch_size(int max_terms) {\n+    size_t ret = secp256k1_strauss_scratch_size(max_terms) + STRAUSS_SCRATCH_OBJECTS*16;\n+    VERIFY_CHECK(ret != 0);\n+\n+    return ret;\n+}\n+\n+/** Clears the scalar and points allocated on the batch object's scratch space */\n+static void secp256k1_batch_scratch_clear(secp256k1_batch* batch) {\n+    secp256k1_scalar_clear(&batch->sc_g);\n+    /* setting the len = 0 will suffice (instead of clearing the memory)\n+     * since, there are no secrets stored on the scratch space */\n+    batch->len = 0;\n+}\n+\n+/** Allocates space for `batch->capacity` number of scalars and points on batch\n+ *  object's scratch space */\n+static int secp256k1_batch_scratch_alloc(const secp256k1_callback* error_callback, secp256k1_batch* batch) {\n+    size_t checkpoint = secp256k1_scratch_checkpoint(error_callback, batch->data);\n+    size_t count = batch->capacity;\n+\n+    VERIFY_CHECK(count > 0);\n+\n+    batch->scalars = (secp256k1_scalar*)secp256k1_scratch_alloc(error_callback, batch->data, count*sizeof(secp256k1_scalar));\n+    batch->points = (secp256k1_gej*)secp256k1_scratch_alloc(error_callback, batch->data, count*sizeof(secp256k1_gej));\n+\n+    /* If scalar or point allocation fails, restore scratch space to previous state */\n+    if (batch->scalars == NULL || batch->points == NULL) {\n+        secp256k1_scratch_apply_checkpoint(error_callback, batch->data, checkpoint);\n+        return 0;\n+    }\n+\n+    return 1;\n+}\n+\n+/* Initializes SHA256 with fixed midstate. This midstate was computed by applying\n+ * SHA256 to SHA256(\"BIP0340/batch\")||SHA256(\"BIP0340/batch\"). */\n+static void secp256k1_batch_sha256_tagged(secp256k1_sha256 *sha) {\n+    secp256k1_sha256_initialize(sha);\n+    sha->s[0] = 0x79e3e0d2ul;\n+    sha->s[1] = 0x12284f32ul;\n+    sha->s[2] = 0xd7d89e1cul;\n+    sha->s[3] = 0x6491ea9aul;\n+    sha->s[4] = 0xad823b2ful;\n+    sha->s[5] = 0xfacfe0b6ul;\n+    sha->s[6] = 0x342b78baul;\n+    sha->s[7] = 0x12ece87cul;\n+\n+    sha->bytes = 64;\n+}\n+\n+secp256k1_batch* secp256k1_batch_create(const secp256k1_context* ctx, size_t max_terms, const unsigned char *aux_rand16) {\n+    size_t batch_size;\n+    secp256k1_batch* batch;\n+    size_t batch_scratch_size;\n+    unsigned char zeros[16] = {0};\n+    /* max number of scalar-point pairs on scratch up to which Strauss multi multiplication is efficient */\n+    if (max_terms > STRAUSS_MAX_TERMS_PER_BATCH) {\n+        max_terms = STRAUSS_MAX_TERMS_PER_BATCH;\n+    }\n+\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(max_terms != 0);\n+\n+    batch_size = sizeof(secp256k1_batch);\n+    batch = (secp256k1_batch *)checked_malloc(&ctx->error_callback, batch_size);\n+    batch_scratch_size = secp256k1_batch_scratch_size(max_terms);\n+    if (batch != NULL) {\n+        /* create scratch space inside batch object, if that fails return NULL*/\n+        batch->data = secp256k1_scratch_create(&ctx->error_callback, batch_scratch_size);\n+        if (batch->data == NULL) {\n+            return NULL;\n+        }\n+        /* allocate memeory for `max_terms` number of scalars and points on scratch space */\n+        batch->capacity = max_terms;\n+        if (!secp256k1_batch_scratch_alloc(&ctx->error_callback, batch)) {\n+            /* if scratch memory allocation fails, free all the previous the allocated memory\n+            and return NULL */\n+            secp256k1_scratch_destroy(&ctx->error_callback, batch->data);\n+            free(batch);\n+            return NULL;\n+        }\n+\n+        /* set remaining data members */\n+        secp256k1_scalar_clear(&batch->sc_g);\n+        secp256k1_batch_sha256_tagged(&batch->sha256);\n+        if (aux_rand16 != NULL) {\n+            secp256k1_sha256_write(&batch->sha256, aux_rand16, 16);\n+        } else {\n+            /* use 16 bytes of 0x0000...000, if no fresh randomness provided */\n+            secp256k1_sha256_write(&batch->sha256, zeros, 16);\n+        }\n+        batch->len = 0;\n+        batch->result = 1;\n+    }\n+\n+    return batch;\n+}\n+\n+void secp256k1_batch_destroy(const secp256k1_context *ctx, secp256k1_batch *batch) {\n+    VERIFY_CHECK(ctx != NULL);\n+\n+    if (batch != NULL) {\n+        if(batch->data != NULL) {\n+            /* can't destroy a scratch space with non-zero size */\n+            secp256k1_scratch_apply_checkpoint(&ctx->error_callback, batch->data, 0);\n+            secp256k1_scratch_destroy(&ctx->error_callback, batch->data);\n+        }\n+        free(batch);\n+    }\n+}\n+\n+int secp256k1_batch_usable(const secp256k1_context *ctx, const secp256k1_batch *batch) {\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(batch != NULL);\n+\n+    return batch->result;\n+}\n+\n+/** verifies the inputs (schnorrsig or tweak_check) by performing multi-scalar point\n+ *  multiplication on the scalars (`batch->scalars`) and points (`batch->points`)\n+ *  present in the batch. Uses `secp256k1_ecmult_strauss_batch_internal` to perform\n+ *  the multi-multiplication.\n+ *\n+ * Fails if:\n+ * 0 != -(s1 + a2*s2 + ... + au*su)G\n+ *      + R1 + a2*R2 + ... + au*Ru + e1*P1 + (a2*e2)P2 + ... + (au*eu)Pu.\n+ */\n+int secp256k1_batch_verify(const secp256k1_context *ctx, secp256k1_batch *batch) {\n+    secp256k1_gej resj;\n+\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(batch != NULL);\n+\n+    if(batch->result == 0) {\n+        return 0;\n+    }\n+\n+    if (batch->len > 0) {\n+        int strauss_ret = secp256k1_ecmult_strauss_batch_internal(&ctx->error_callback, batch->data, &resj, batch->scalars, batch->points, &batch->sc_g, batch->len);\n+        int mid_res = secp256k1_gej_is_infinity(&resj);\n+\n+        /* `_strauss_batch_internal` should not fail due to insufficient memory.\n+         * `batch_create` will allocate memeory needed by `_strauss_batch_internal`. */\n+        VERIFY_CHECK(strauss_ret != 0);",
      "path": "src/modules/batch/main_impl.h",
      "position": 197,
      "original_position": 197,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Getting an unused variable warning about `strauss_ret` here when building this as part of bitcoin core, probably because the check is removed with optimizations?",
      "created_at": "2024-02-27T23:57:54Z",
      "updated_at": "2024-02-28T00:02:24Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1505159671",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505159671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 197,
      "original_line": 197,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505160540",
      "pull_request_review_id": 1905035503,
      "id": 1505160540,
      "node_id": "PRRC_kwDOAP4Jqs5Ztu1c",
      "diff_hunk": "@@ -0,0 +1,110 @@\n+#ifndef SECP256K1_BATCH_H\n+#define SECP256K1_BATCH_H\n+\n+#include \"secp256k1.h\"\n+\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n+/** This module implements a Batch Verification object that supports:\n+ *\n+ *  1. Schnorr signatures compliant with Bitcoin Improvement Proposal 340\n+ *     \"Schnorr Signatures for secp256k1\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki).\n+ *\n+ *  2. Taproot commitments compliant with Bitcoin Improvemtn Proposal 341\n+ *     \"Taproot: SegWit version 1 spending rules\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki).\n+ */\n+\n+/** Opaque data structure that holds information required for the batch verification.\n+ *\n+ *  The purpose of this structure is to store elliptic curve points, their scalar\n+ *  coefficients, and scalar coefficient of generator point participating in Multi-Scalar\n+ *  Point Multiplication computation, which is done by `secp256k1_ecmult_strauss_batch_internal`\n+ */\n+typedef struct secp256k1_batch_struct secp256k1_batch;",
      "path": "include/secp256k1_batch.h",
      "position": 27,
      "original_position": 27,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`secp256k1_batch` isn't part of the API yet it seems.\r\n\r\n```\r\nSECP256K1_API const secp256k1_batch *secp256k1_batch_struct;\r\n```",
      "created_at": "2024-02-27T23:59:27Z",
      "updated_at": "2024-02-28T00:02:24Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1505160540",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505160540"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 27,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505929407",
      "pull_request_review_id": 1906215194,
      "id": 1505929407,
      "node_id": "PRRC_kwDOAP4Jqs5Zwqi_",
      "diff_hunk": "@@ -0,0 +1,110 @@\n+#ifndef SECP256K1_BATCH_H\n+#define SECP256K1_BATCH_H\n+\n+#include \"secp256k1.h\"\n+\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n+/** This module implements a Batch Verification object that supports:\n+ *\n+ *  1. Schnorr signatures compliant with Bitcoin Improvement Proposal 340\n+ *     \"Schnorr Signatures for secp256k1\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki).\n+ *\n+ *  2. Taproot commitments compliant with Bitcoin Improvemtn Proposal 341\n+ *     \"Taproot: SegWit version 1 spending rules\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki).\n+ */\n+\n+/** Opaque data structure that holds information required for the batch verification.\n+ *\n+ *  The purpose of this structure is to store elliptic curve points, their scalar\n+ *  coefficients, and scalar coefficient of generator point participating in Multi-Scalar\n+ *  Point Multiplication computation, which is done by `secp256k1_ecmult_strauss_batch_internal`\n+ */\n+typedef struct secp256k1_batch_struct secp256k1_batch;",
      "path": "include/secp256k1_batch.h",
      "position": 27,
      "original_position": 27,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": 1505160540,
      "user": {
        "login": "siv2r",
        "id": 56887198,
        "node_id": "MDQ6VXNlcjU2ODg3MTk4",
        "avatar_url": "https://avatars.githubusercontent.com/u/56887198?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/siv2r",
        "html_url": "https://github.com/siv2r",
        "followers_url": "https://api.github.com/users/siv2r/followers",
        "following_url": "https://api.github.com/users/siv2r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/siv2r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/siv2r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/siv2r/subscriptions",
        "organizations_url": "https://api.github.com/users/siv2r/orgs",
        "repos_url": "https://api.github.com/users/siv2r/repos",
        "events_url": "https://api.github.com/users/siv2r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/siv2r/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Why do we need this? Currently, users can only create pointers to the `secp256k1_batch` object, which is the intended functionality of opaque objects, right?",
      "created_at": "2024-02-28T13:01:59Z",
      "updated_at": "2024-02-28T13:01:59Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1505929407",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1505929407"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 27,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506054760",
      "pull_request_review_id": 1906420231,
      "id": 1506054760,
      "node_id": "PRRC_kwDOAP4Jqs5ZxJJo",
      "diff_hunk": "@@ -0,0 +1,206 @@\n+#ifndef SECP256K1_MODULE_BATCH_MAIN_H\n+#define SECP256K1_MODULE_BATCH_MAIN_H\n+\n+#include \"include/secp256k1_batch.h\"\n+\n+/* Maximum number of scalar-point pairs on the batch\n+ * for which `secp256k1_batch_verify` remains efficient */\n+#define STRAUSS_MAX_TERMS_PER_BATCH 106\n+\n+/* Assume two batch objects (batch1 and batch2) and we call\n+ * `batch_add_tweak_check` on batch1 and `batch_add_schnorrsig` on batch2.\n+ * In this case, the same randomizer will be generated if the input bytes to\n+ * batch1 and batch2 are the same (even though we use different `batch_add_` funcs).\n+ * Including this tag during randomizer generation (to differentiate btw\n+ * `batch_add_` funcs) will prevent such mishaps. */\n+enum batch_add_type {schnorrsig = 1, tweak_check = 2};\n+\n+/** Opaque data structure that holds information required for the batch verification.\n+ *\n+ *  Members:\n+ *       data: scratch space object that contains points (_gej) and their\n+ *             respective scalars. To be used in Multi-Scalar Multiplication\n+ *             algorithms such as Strauss and Pippenger.\n+ *    scalars: pointer to scalars allocated on the scratch space.\n+ *     points: pointer to points allocated on the scratch space.\n+ *       sc_g: scalar corresponding to the generator point (G) in Multi-Scalar\n+ *             Multiplication equation.\n+ *     sha256: contains hash of all the inputs (schnorrsig/tweaks) present in\n+ *             the batch object, expect the first input. Used for generating a random secp256k1_scalar\n+ *             for each term added by secp256k1_batch_add_*.\n+ *     sha256: contains hash of all inputs (except the first one) present in the batch.\n+ *             `secp256k1_batch_add_` APIs use these for randomizing the scalar (i.e., multiplying\n+ *             it with a newly generated scalar) before adding it to the batch.\n+ *        len: number of scalar-point pairs present in the batch.\n+ *   capacity: max number of scalar-point pairs that the batch can hold.\n+ *     result: tells whether the given set of inputs (schnorrsigs or tweak checks) is valid\n+ *             or invalid. 1 = valid and 0 = invalid. By default, this is set to 1\n+ *             during batch object creation (i.e., `secp256k1_batch_create`).\n+ *\n+ *  The following struct name is typdef as secp256k1_batch (in include/secp256k1_batch.h).\n+ */\n+struct secp256k1_batch_struct{\n+    secp256k1_scratch *data;\n+    secp256k1_scalar *scalars;\n+    secp256k1_gej *points;\n+    secp256k1_scalar sc_g;\n+    secp256k1_sha256 sha256;\n+    size_t len;\n+    size_t capacity;\n+    int result;\n+};\n+\n+static size_t secp256k1_batch_scratch_size(int max_terms) {\n+    size_t ret = secp256k1_strauss_scratch_size(max_terms) + STRAUSS_SCRATCH_OBJECTS*16;\n+    VERIFY_CHECK(ret != 0);\n+\n+    return ret;\n+}\n+\n+/** Clears the scalar and points allocated on the batch object's scratch space */\n+static void secp256k1_batch_scratch_clear(secp256k1_batch* batch) {\n+    secp256k1_scalar_clear(&batch->sc_g);\n+    /* setting the len = 0 will suffice (instead of clearing the memory)\n+     * since, there are no secrets stored on the scratch space */\n+    batch->len = 0;\n+}\n+\n+/** Allocates space for `batch->capacity` number of scalars and points on batch\n+ *  object's scratch space */\n+static int secp256k1_batch_scratch_alloc(const secp256k1_callback* error_callback, secp256k1_batch* batch) {\n+    size_t checkpoint = secp256k1_scratch_checkpoint(error_callback, batch->data);\n+    size_t count = batch->capacity;\n+\n+    VERIFY_CHECK(count > 0);\n+\n+    batch->scalars = (secp256k1_scalar*)secp256k1_scratch_alloc(error_callback, batch->data, count*sizeof(secp256k1_scalar));\n+    batch->points = (secp256k1_gej*)secp256k1_scratch_alloc(error_callback, batch->data, count*sizeof(secp256k1_gej));\n+\n+    /* If scalar or point allocation fails, restore scratch space to previous state */\n+    if (batch->scalars == NULL || batch->points == NULL) {\n+        secp256k1_scratch_apply_checkpoint(error_callback, batch->data, checkpoint);\n+        return 0;\n+    }\n+\n+    return 1;\n+}\n+\n+/* Initializes SHA256 with fixed midstate. This midstate was computed by applying\n+ * SHA256 to SHA256(\"BIP0340/batch\")||SHA256(\"BIP0340/batch\"). */\n+static void secp256k1_batch_sha256_tagged(secp256k1_sha256 *sha) {\n+    secp256k1_sha256_initialize(sha);\n+    sha->s[0] = 0x79e3e0d2ul;\n+    sha->s[1] = 0x12284f32ul;\n+    sha->s[2] = 0xd7d89e1cul;\n+    sha->s[3] = 0x6491ea9aul;\n+    sha->s[4] = 0xad823b2ful;\n+    sha->s[5] = 0xfacfe0b6ul;\n+    sha->s[6] = 0x342b78baul;\n+    sha->s[7] = 0x12ece87cul;\n+\n+    sha->bytes = 64;\n+}\n+\n+secp256k1_batch* secp256k1_batch_create(const secp256k1_context* ctx, size_t max_terms, const unsigned char *aux_rand16) {\n+    size_t batch_size;\n+    secp256k1_batch* batch;\n+    size_t batch_scratch_size;\n+    unsigned char zeros[16] = {0};\n+    /* max number of scalar-point pairs on scratch up to which Strauss multi multiplication is efficient */\n+    if (max_terms > STRAUSS_MAX_TERMS_PER_BATCH) {\n+        max_terms = STRAUSS_MAX_TERMS_PER_BATCH;\n+    }\n+\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(max_terms != 0);\n+\n+    batch_size = sizeof(secp256k1_batch);\n+    batch = (secp256k1_batch *)checked_malloc(&ctx->error_callback, batch_size);\n+    batch_scratch_size = secp256k1_batch_scratch_size(max_terms);\n+    if (batch != NULL) {\n+        /* create scratch space inside batch object, if that fails return NULL*/\n+        batch->data = secp256k1_scratch_create(&ctx->error_callback, batch_scratch_size);\n+        if (batch->data == NULL) {\n+            return NULL;\n+        }\n+        /* allocate memeory for `max_terms` number of scalars and points on scratch space */\n+        batch->capacity = max_terms;\n+        if (!secp256k1_batch_scratch_alloc(&ctx->error_callback, batch)) {\n+            /* if scratch memory allocation fails, free all the previous the allocated memory\n+            and return NULL */\n+            secp256k1_scratch_destroy(&ctx->error_callback, batch->data);\n+            free(batch);\n+            return NULL;\n+        }\n+\n+        /* set remaining data members */\n+        secp256k1_scalar_clear(&batch->sc_g);\n+        secp256k1_batch_sha256_tagged(&batch->sha256);\n+        if (aux_rand16 != NULL) {\n+            secp256k1_sha256_write(&batch->sha256, aux_rand16, 16);\n+        } else {\n+            /* use 16 bytes of 0x0000...000, if no fresh randomness provided */\n+            secp256k1_sha256_write(&batch->sha256, zeros, 16);\n+        }\n+        batch->len = 0;\n+        batch->result = 1;\n+    }\n+\n+    return batch;\n+}\n+\n+void secp256k1_batch_destroy(const secp256k1_context *ctx, secp256k1_batch *batch) {\n+    VERIFY_CHECK(ctx != NULL);\n+\n+    if (batch != NULL) {\n+        if(batch->data != NULL) {\n+            /* can't destroy a scratch space with non-zero size */\n+            secp256k1_scratch_apply_checkpoint(&ctx->error_callback, batch->data, 0);\n+            secp256k1_scratch_destroy(&ctx->error_callback, batch->data);\n+        }\n+        free(batch);\n+    }\n+}\n+\n+int secp256k1_batch_usable(const secp256k1_context *ctx, const secp256k1_batch *batch) {\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(batch != NULL);\n+\n+    return batch->result;\n+}\n+\n+/** verifies the inputs (schnorrsig or tweak_check) by performing multi-scalar point\n+ *  multiplication on the scalars (`batch->scalars`) and points (`batch->points`)\n+ *  present in the batch. Uses `secp256k1_ecmult_strauss_batch_internal` to perform\n+ *  the multi-multiplication.\n+ *\n+ * Fails if:\n+ * 0 != -(s1 + a2*s2 + ... + au*su)G\n+ *      + R1 + a2*R2 + ... + au*Ru + e1*P1 + (a2*e2)P2 + ... + (au*eu)Pu.\n+ */\n+int secp256k1_batch_verify(const secp256k1_context *ctx, secp256k1_batch *batch) {\n+    secp256k1_gej resj;\n+\n+    VERIFY_CHECK(ctx != NULL);\n+    ARG_CHECK(batch != NULL);\n+\n+    if(batch->result == 0) {\n+        return 0;\n+    }\n+\n+    if (batch->len > 0) {\n+        int strauss_ret = secp256k1_ecmult_strauss_batch_internal(&ctx->error_callback, batch->data, &resj, batch->scalars, batch->points, &batch->sc_g, batch->len);\n+        int mid_res = secp256k1_gej_is_infinity(&resj);\n+\n+        /* `_strauss_batch_internal` should not fail due to insufficient memory.\n+         * `batch_create` will allocate memeory needed by `_strauss_batch_internal`. */\n+        VERIFY_CHECK(strauss_ret != 0);",
      "path": "src/modules/batch/main_impl.h",
      "position": 197,
      "original_position": 197,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": 1505159671,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The macro `VERIFY_CHECK(code)` is defined to be the empty string in production builds, that's why you need to suppress the warning using `(void)strauss_ret;`. ",
      "created_at": "2024-02-28T14:28:29Z",
      "updated_at": "2024-02-28T14:28:29Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1506054760",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506054760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 197,
      "original_line": 197,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506136896",
      "pull_request_review_id": 1906550202,
      "id": 1506136896,
      "node_id": "PRRC_kwDOAP4Jqs5ZxdNA",
      "diff_hunk": "@@ -0,0 +1,110 @@\n+#ifndef SECP256K1_BATCH_H\n+#define SECP256K1_BATCH_H\n+\n+#include \"secp256k1.h\"\n+\n+#ifdef __cplusplus\n+extern \"C\" {\n+#endif\n+\n+/** This module implements a Batch Verification object that supports:\n+ *\n+ *  1. Schnorr signatures compliant with Bitcoin Improvement Proposal 340\n+ *     \"Schnorr Signatures for secp256k1\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0340.mediawiki).\n+ *\n+ *  2. Taproot commitments compliant with Bitcoin Improvemtn Proposal 341\n+ *     \"Taproot: SegWit version 1 spending rules\"\n+ *     (https://github.com/bitcoin/bips/blob/master/bip-0341.mediawiki).\n+ */\n+\n+/** Opaque data structure that holds information required for the batch verification.\n+ *\n+ *  The purpose of this structure is to store elliptic curve points, their scalar\n+ *  coefficients, and scalar coefficient of generator point participating in Multi-Scalar\n+ *  Point Multiplication computation, which is done by `secp256k1_ecmult_strauss_batch_internal`\n+ */\n+typedef struct secp256k1_batch_struct secp256k1_batch;",
      "path": "include/secp256k1_batch.h",
      "position": 27,
      "original_position": 27,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": 1505160540,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hm, never mind, it seems it's not needed anymore with the latest version of my bitcoin core code.",
      "created_at": "2024-02-28T15:20:01Z",
      "updated_at": "2024-02-28T15:20:02Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1506136896",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506136896"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 27,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506139410",
      "pull_request_review_id": 1906554262,
      "id": 1506139410,
      "node_id": "PRRC_kwDOAP4Jqs5Zxd0S",
      "diff_hunk": "@@ -0,0 +1,213 @@\n+#ifndef SECP256K1_MODULE_BATCH_TESTS_H\n+#define SECP256K1_MODULE_BATCH_TESTS_H\n+\n+#include \"../../../include/secp256k1_batch.h\"\n+#ifdef ENABLE_MODULE_SCHNORRSIG\n+#include \"../../../include/secp256k1_schnorrsig.h\"\n+#include \"../../../include/secp256k1_schnorrsig_batch.h\"\n+#endif\n+#ifdef ENABLE_MODULE_EXTRAKEYS\n+#include \"../../../include/secp256k1_extrakeys.h\"\n+#include \"../../../include/secp256k1_tweak_check_batch.h\"\n+#endif\n+\n+/* Tests for the equality of two sha256 structs. This function only produces a\n+ * correct result if an integer multiple of 64 many bytes have been written\n+ * into the hash functions. */\n+void test_batch_sha256_eq(const secp256k1_sha256 *sha1, const secp256k1_sha256 *sha2) {\n+    /* Is buffer fully consumed? */\n+    CHECK((sha1->bytes & 0x3F) == 0);\n+\n+    CHECK(sha1->bytes == sha2->bytes);\n+    CHECK(secp256k1_memcmp_var(sha1->s, sha2->s, sizeof(sha1->s)) == 0);\n+}\n+\n+/* Checks that hash initialized by secp256k1_batch_sha256_tagged has the\n+ * expected state. */\n+void test_batch_sha256_tagged(void) {\n+    unsigned char tag[13] = \"BIP0340/batch\";\n+    secp256k1_sha256 sha;\n+    secp256k1_sha256 sha_optimized;\n+\n+    secp256k1_sha256_initialize_tagged(&sha, (unsigned char *) tag, sizeof(tag));\n+    secp256k1_batch_sha256_tagged(&sha_optimized);\n+    test_batch_sha256_eq(&sha, &sha_optimized);\n+}\n+\n+#define N_SIGS 10\n+#define N_TWK_CHECKS 10\n+#define N_TERMS (N_TWK_CHECKS + 2*N_SIGS)\n+void test_batch_api(void) {\n+\n+#ifdef ENABLE_MODULE_EXTRAKEYS\n+    unsigned char sk[32];\n+    secp256k1_keypair keypair;\n+    secp256k1_xonly_pubkey pk;\n+    /* xonly pubkey tweak checks data */\n+    unsigned char tweaked_pk[N_TWK_CHECKS][32];\n+    int tweaked_pk_parity[N_TWK_CHECKS];\n+    unsigned char tweak[N_TWK_CHECKS][32];\n+    secp256k1_pubkey tmp_pk;\n+    secp256k1_xonly_pubkey tmp_xonly_pk;\n+    size_t i;\n+#endif\n+\n+#ifdef ENABLE_MODULE_SCHNORRSIG\n+    /* schnorr verification data */\n+    unsigned char msg[N_SIGS][32];\n+    unsigned char sig[N_SIGS][64];\n+#endif\n+    /* context and batch setup */\n+    secp256k1_context *none = secp256k1_context_create(SECP256K1_CONTEXT_NONE);\n+    secp256k1_context *sign = secp256k1_context_create(SECP256K1_CONTEXT_SIGN);\n+    secp256k1_context *vrfy = secp256k1_context_create(SECP256K1_CONTEXT_VERIFY);\n+    secp256k1_context *both = secp256k1_context_create(SECP256K1_CONTEXT_SIGN | SECP256K1_CONTEXT_VERIFY);\n+    secp256k1_context *sttc = secp256k1_context_clone(secp256k1_context_no_precomp);\n+    secp256k1_batch *batch_none;\n+    secp256k1_batch *batch_sign;\n+    secp256k1_batch *batch_vrfy;\n+    secp256k1_batch *batch_both;\n+    secp256k1_batch *batch_sttc;\n+    unsigned char aux_rand16[32];",
      "path": "src/modules/batch/tests_impl.h",
      "position": 71,
      "original_position": 71,
      "commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "original_commit_id": "eb49e93b50b3e40498789a500e2db8d9a20debbf",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Getting another warning here when compiling together with Bitcoin Core:\r\n\r\n```\r\nsrc/modules/batch/tests_impl.h:68:19: warning: mixing declarations and code is a C99 extension [-Wdeclaration-after-statement]\r\n    unsigned char aux_rand16[32];\r\n                  ^\r\n``` ",
      "created_at": "2024-02-28T15:21:38Z",
      "updated_at": "2024-02-28T15:21:38Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1134#discussion_r1506139410",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/1506139410"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1134"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 71,
      "original_line": 71,
      "side": "RIGHT"
    }
  ]
}