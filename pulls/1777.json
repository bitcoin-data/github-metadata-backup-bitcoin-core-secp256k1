{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777",
    "id": 3052569091,
    "node_id": "PR_kwDOAP4Jqs618oID",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1777.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1777.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
    "number": 1777,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Make SHA256 compression pluggable",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Tackling the long-standing request #702.\r\n\r\nRight now we ship our own SHA256 implementation, a standard baseline version that does not take advantage of any hardware-optimized instruction, and it cannot be accessed by the embedding application - it is for internal usage only.\r\n\r\nThis means embedding applications often have to implement or include a different version for their use cases, wasting space on constrained environments, and in performance-sensitive setups it forces them to use a slower path than what the platform provides. Many projects already rely on tuned SHA-NI / ARMv8 / or other hardware-optimized code, so always using the baseline implementation we ship within the library is not ideal.\r\n\r\nThis PR gives our users a way to bring their own SHA256 compression, either at build time or at runtime, while keeping the default behavior untouched for everyone else.\r\n\r\n#### Compile-time: External SHA256 module\r\n\r\nThe built-in transform is moved out of `hash_impl.h`into a small sha module with its own public header (`secp256k1_sha.h`). The idea is to stop treating the compression step as a private, hidden detail, and instead make it part of a public interface that users can swap out if they want to.\r\nBoth build systems gain optional support for pointing libsecp to an external implementation:\r\n* Autotools: `--with-external-sha256=<path>`\r\n* CMake: `SECP256K1_EXTERNAL_SHA256_PATH`\r\n\r\nNote:\r\nDue to our current limitation of disabling C++ builds (see [this](https://github.com/bitcoin-core/secp256k1/blob/b6c2a3cd7752085d46434921238401766c964c01/src/secp256k1.c#L15)), the provided external implementation must be written in C. (A way to overcome this would be to compile and link this externally instead of doing it within the library).\r\n\r\n#### Runtime: Context callback\r\n\r\nFor setups where we detect the available SHA256 compression function at runtime and cannot re-compile the sources, or when the function is not written in bare C89, there’s a new API:\r\n```C89\r\nsecp256k1_context_set_sha256_transform_callback(ctx, fn_transform)\r\n```\r\n\r\nThis lets users plug-in their hardware-optimized implementation into the `secp256k1_context`, which is required in all functions that compute sha256 hashes.\r\nDuring the initial setting, as a sanity check, this mechanism verifies that the provided compression function is equivalent to the default one.\r\n\r\nAs a quick example, the changes required to implement this in Bitcoin-Core at runtime are very straightforward: https://github.com/furszy/bitcoin-core/commit/f68bef06d95a589859f98fc898dd80ab2e35eb39\r\n\r\nImplementing this at compile time in Bitcoin Core is possible, but it would require changing the C version we build against (which is not recommended). For example, we cannot link the SHA-NI implementation we have in Core (even if rewritten in C89) because it depends on the `arm_neon` library, which requires C99.",
    "labels": [
      {
        "id": 4975353639,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI3fJw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/feature",
        "name": "feature",
        "description": "",
        "color": "731E95",
        "default": false
      },
      {
        "id": 4975362431,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
        "name": "build",
        "description": "",
        "color": "2F66C4",
        "default": false
      },
      {
        "id": 4975389731,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI5sIw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/performance",
        "name": "performance",
        "description": "",
        "color": "DE3CCC",
        "default": false
      },
      {
        "id": 5492210333,
        "node_id": "LA_kwDOAP4Jqs8AAAABR1x6nQ",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/needs-changelog",
        "name": "needs-changelog",
        "description": "",
        "color": "DBD8F4",
        "default": false
      }
    ],
    "created_at": "2025-11-27T23:18:33Z",
    "updated_at": "2025-12-18T19:05:13Z",
    "mergeable": true,
    "mergeable_state": "clean",
    "merged": false,
    "merge_commit_sha": "8293c6d5ef54d621ba9e0b83f1aaae16fb809819",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2025_pluggable_sha256_transform",
      "ref": "2025_pluggable_sha256_transform",
      "sha": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1049838831,
        "node_id": "R_kgDOPpNE7w",
        "name": "secp256k1",
        "full_name": "furszy/secp256k1",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/secp256k1",
        "archive_url": "https://api.github.com/repos/furszy/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/furszy/secp256k1/events",
        "forks_url": "https://api.github.com/repos/furszy/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/furszy/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/furszy/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/furszy/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/furszy/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/furszy/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/furszy/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/furszy/secp256k1/hooks",
        "svn_url": "https://github.com/furszy/secp256k1",
        "language": "C",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 13226,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-18T16:25:30Z",
        "created_at": "2025-09-03T15:10:42Z",
        "updated_at": "2025-12-14T16:04:59Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "8d445730ec79a9fa722eea59b6b697c3b9b1d501",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 1106,
        "stargazers_count": 2359,
        "watchers_count": 2359,
        "size": 14022,
        "default_branch": "master",
        "open_issues_count": 162,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-15T19:44:03Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2025-12-18T19:05:41Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 704,
    "deletions": 368,
    "changed_files": 29,
    "commits": 3,
    "review_comments": 30,
    "comments": 3
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 21245030602,
      "node_id": "HRFPE_lADOAP4Jqs7a8JDRzwAAAATyTXDK",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21245030602",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": "https://api.github.com/repos/furszy/secp256k1/commits/7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "created_at": "2025-11-28T15:54:47Z"
    },
    {
      "event": "commented",
      "id": 3597451370,
      "node_id": "IC_kwDOAP4Jqs7WbMBq",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3597451370",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T16:16:11Z",
      "updated_at": "2025-12-01T16:16:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "I guess this is more of a draft for initial review but I will spell it out anyway: It's currently missing some CI coverage for building with an external library as well as some docs. Curious what people think in terms of docs for something like this: Should there be extensive guidance in which context this is safe to use or would users be left on their own to try it out? Or are we assuming all users that go to this length are competent enough to judge if it's a good idea to bring their own sha256 or use the systems one?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#issuecomment-3597451370",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777"
    },
    {
      "event": "commented",
      "id": 3598403333,
      "node_id": "IC_kwDOAP4Jqs7We0cF",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3598403333",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T19:03:53Z",
      "updated_at": "2025-12-01T21:16:51Z",
      "author_association": "MEMBER",
      "body": "Thanks for the feedback fjahr!\r\n\r\n> I guess this is more of a draft for initial review but I will spell it out anyway: It's currently missing some CI coverage for building with an external library as well as some docs. \r\n\r\nYeah, can create a CI job testing the compile-time pluggable compression function very easily. Thanks for reminding that.\r\n\r\nAnd about the missing docs; yeah. I didn't add it because we currently don't have much documentation outside `configure.ac` / `CMakeLists.txt`. Happy to create a file for it.\r\n\r\n> Curious what people think in terms of docs for something like this: Should there be extensive guidance in which context this is safe to use or would users be left on their own to try it out? Or are we assuming all users that go to this length are competent enough to judge if it's a good idea to bring their own sha256 or use the systems one?\r\n\r\nIt’s not that we’re letting people plug in whatever they want. Both introduced features have guardrails:\r\n\r\n1) Compile-time: we run all current tests against the provided implementation, plus a runtime self-test.\r\n2) Runtime: besides the runtime self-test, have introduced an \"equivalence check\" that hashes known inputs and compares them against the library’s internal implementation before accepting the external function.\r\n\r\nSo you can bring your own compression function, but it still has to prove it behaves exactly like ours bit-for-bit.\r\n\r\nAlso, the target user here is someone who's actually written a hardware-optimized SHA256. It’s not like they stumbled into this by accident.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#issuecomment-3598403333",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777"
    },
    {
      "event": "reviewed",
      "id": 3550658761,
      "node_id": "PRR_kwDOAP4Jqs7TosDJ",
      "url": null,
      "actor": null,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T09:26:48Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3550658761",
      "submitted_at": "2025-12-08T09:26:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "reviewed",
      "id": 3551060764,
      "node_id": "PRR_kwDOAP4Jqs7TqOMc",
      "url": null,
      "actor": null,
      "commit_id": "75ccf99a0751d84e098aab7c4a13170e825c0496",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T09:34:10Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3551060764",
      "submitted_at": "2025-12-08T09:34:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "reviewed",
      "id": 3551077587,
      "node_id": "PRR_kwDOAP4Jqs7TqSTT",
      "url": null,
      "actor": null,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T09:38:57Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3551077587",
      "submitted_at": "2025-12-08T09:38:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "reviewed",
      "id": 3551090512,
      "node_id": "PRR_kwDOAP4Jqs7TqVdQ",
      "url": null,
      "actor": null,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T09:42:32Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3551090512",
      "submitted_at": "2025-12-08T09:42:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "reviewed",
      "id": 3551364928,
      "node_id": "PRR_kwDOAP4Jqs7TrYdA",
      "url": null,
      "actor": null,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-08T10:44:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, great to see a PR for this!",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3551364928",
      "submitted_at": "2025-12-08T10:44:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "labeled",
      "id": 21423282080,
      "node_id": "LE_lADOAP4Jqs7a8JDRzwAAAAT87Veg",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21423282080",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T10:45:09Z",
      "label": {
        "name": "feature",
        "color": "731E95"
      }
    },
    {
      "event": "labeled",
      "id": 21423282096,
      "node_id": "LE_lADOAP4Jqs7a8JDRzwAAAAT87Vew",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21423282096",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T10:45:09Z",
      "label": {
        "name": "build",
        "color": "2F66C4"
      }
    },
    {
      "event": "labeled",
      "id": 21423282108,
      "node_id": "LE_lADOAP4Jqs7a8JDRzwAAAAT87Ve8",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21423282108",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T10:45:09Z",
      "label": {
        "name": "performance",
        "color": "DE3CCC"
      }
    },
    {
      "event": "labeled",
      "id": 21423282123,
      "node_id": "LE_lADOAP4Jqs7a8JDRzwAAAAT87VfL",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21423282123",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-08T10:45:09Z",
      "label": {
        "name": "needs-changelog",
        "color": "DBD8F4"
      }
    },
    {
      "event": "reviewed",
      "id": 3579081214,
      "node_id": "PRR_kwDOAP4Jqs7VVHH-",
      "url": null,
      "actor": null,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-15T16:24:32Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3579081214",
      "submitted_at": "2025-12-15T16:24:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDI4ZWI5YmE3ZWUxYjkyZjljN2U1NjUzYzM4MjdkMGI3M2NiYWRjM2U",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e",
      "tree": {
        "sha": "190b9107a439ef52a8a15ce7329ad1e8e2aac2d0",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/190b9107a439ef52a8a15ce7329ad1e8e2aac2d0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 190b9107a439ef52a8a15ce7329ad1e8e2aac2d0\nparent 8d445730ec79a9fa722eea59b6b697c3b9b1d501\nauthor furszy <matiasfurszyfer@protonmail.com> 1765827890 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1765828236 -0500\n\ntests: use local context instead of using global one\n\nNo functional change.\n\nRefactor several test implementations to use a local context\nvariable.\n\nThis is a preparatory change that makes it straightforward for a\nfollow-up to run these tests with a different context instance\n(with a different sha256 function), without touching the test\ncode again.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlAZowACgkQXdI8zGhq\npiM4ERAApP+oAC50A9bZcgZ8ci/cTxNtc+3p6zR/OBHZagxogub3PBnhUDWochtz\nXXk+ieV6MQzBOqWUFrre1r9kBU0E7bh3yHj5Xx7X+r+mchPHSVv+JDQ65jg1y1AZ\nYWhFh5GV1o56WFpGg/bsnXUnyxTzEm5OK9Tn7kssexGT+JPOjUDwuziJQGS/5JwT\nRJsjKe/cOj8G93hXFx7eONqgp1bKJF4i6AEbF87nqa8KU0yeZBATQ2TGmFrpZTz+\nKP/kBirFDe7vzIPqZebTN2SQgEPeGjqWBUscOgFhepkCxPawO4WWNuToRfGhISk2\nVOI7WqRrC9O981IG6jk+QSaV+07LOwFtNcHaQYLB4jvCvzPeOb6QliWGUbST0n6t\nM0QazcvDJXGGo9Cbxohpoa7c1K9RxwgYsEUJqudjKqE2edGwRXnh2T/m1j50csxM\nIct+SOGLJWodFXa3cr00N0A/eUNpogq5tBI09im0cc1K3qdB+5aQ9zkDijib5iD/\neimZIyNCf9Xpkymcx3LafUjiHRMNZi34xqzOMsXQBMnkaIWAGyWntQoFygTwWF9v\nnmKja87y/DWCHwM7zaOaslyCEzm9GRwujRC+KJqhGvuO6VOFkxsAcq6GgmOtDYeb\n4e/FHN1LGGwHzNl1v3fHz03Tyo1rADPzzViYSLdlsw1sbdY19o4=\n=y39W\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/8d445730ec79a9fa722eea59b6b697c3b9b1d501",
          "sha": "8d445730ec79a9fa722eea59b6b697c3b9b1d501",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/8d445730ec79a9fa722eea59b6b697c3b9b1d501"
        }
      ],
      "message": "tests: use local context instead of using global one\n\nNo functional change.\n\nRefactor several test implementations to use a local context\nvariable.\n\nThis is a preparatory change that makes it straightforward for a\nfollow-up to run these tests with a different context instance\n(with a different sha256 function), without touching the test\ncode again.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-15T19:50:36Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-15T19:44:50Z"
      },
      "sha": "28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDZiNzUwNTdhNDFiNDY0MmEzZWE1N2Y5ZTBlMDNlYzAzODkzNjM3NzI",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/6b75057a41b4642a3ea57f9e0e03ec0389363772",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/6b75057a41b4642a3ea57f9e0e03ec0389363772",
      "tree": {
        "sha": "1042c00ce1f25d92f2834c989fc670a7f43503c2",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/1042c00ce1f25d92f2834c989fc670a7f43503c2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1042c00ce1f25d92f2834c989fc670a7f43503c2\nparent 28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e\nauthor furszy <matiasfurszyfer@protonmail.com> 1764017863 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1765828236 -0500\n\nAdd ability to provide SHA256 compression at compile-time\n\nIntroduces a new `sha` module that exposes the SHA256\ncompression function and allows users to provide their\nown implementation.\n\nThis moves the built-in transform logic out of `hash_impl.h`\ninto a dedicated module (`src/modules/sha`), adds the\ncorresponding public header (`secp256k1_sha.h`), and wires\nthe module through Autotools and CMake via:\n`--with-external-sha256` / SECP256K1_EXTERNAL_SHA256_PATH.\n\nExisting behavior is unchanged; the library compiles and\nlinks the default transform function by default.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlAZowACgkQXdI8zGhq\npiMXHBAArMGI9IHkSXQwjdhZ4axaGQeUQYZEJOz5YQ0QUIRAEVxSUSOyl++LNamL\nrE2/UOt4hIMh3Nkx2eBi+gTj/ESLBqnYYWpFWYx5q1qmTDujSinV9TghZVuNgTKX\n3X69eUAGSU4a9zAwkzOyrm+RuaVpsmHNvqVAt43DwrmD8o7+hEkYvGhyFJlhihRX\n81aymq2rS3K5U512+E2dqed1iioSCXai0SkUWrYwdbrhBleHPHZgwAihTBdGaZx0\nbCyzmcX37lW/v5g0zBKX0lkBmANJvOVO70/I64xZcH2myFdBwApvjUWt9l69qOtL\nynnKgx1EA8V9jEgWkpGhYTEec51Bl3p7bVG3EDA5CCE9x/JXhHpbfKoARgtW4Gf0\nJDFGTuaky2OSYR/bJTUQfF51rUaRQt6WAMjlvOiXbVayy9B26uDSIdxrqGC0s0Js\nZAZuQAEcYUZo+ck5llFeyLQIatFhzcASaUTFxlFjshFjyM8p+vIewdP0OoxAxjQ2\nAwPqScvTUS3Q4dQ/XZLkFEjXph6EJCj4FOM9FuaMuw8LCeerHHnlWtWmaiSYl6mh\n2WjYwcgmT3KMmVAfl2VoRNRPRvvO7W0/kG5rnVpO4lkuhHW9aCfd4cPKiMCdjx6v\nf4Ukk/MVwrurAGCZAoZIEvb6WvZc2zHYZ4qVqMgYZoxn+1trv6M=\n=FxkS\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e",
          "sha": "28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/28eb9ba7ee1b92f9c7e5653c3827d0b73cbadc3e"
        }
      ],
      "message": "Add ability to provide SHA256 compression at compile-time\n\nIntroduces a new `sha` module that exposes the SHA256\ncompression function and allows users to provide their\nown implementation.\n\nThis moves the built-in transform logic out of `hash_impl.h`\ninto a dedicated module (`src/modules/sha`), adds the\ncorresponding public header (`secp256k1_sha.h`), and wires\nthe module through Autotools and CMake via:\n`--with-external-sha256` / SECP256K1_EXTERNAL_SHA256_PATH.\n\nExisting behavior is unchanged; the library compiles and\nlinks the default transform function by default.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-15T19:50:36Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-24T20:57:43Z"
      },
      "sha": "6b75057a41b4642a3ea57f9e0e03ec0389363772"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDM2ODNlMDdlZjRiNmEwNjJlZWMxNzc2MjIwZWVlZWMwYzMwYmMyZWM",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "tree": {
        "sha": "ffa4d33c4fe99b969c4f69a9b247ebf8de1f0303",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/ffa4d33c4fe99b969c4f69a9b247ebf8de1f0303"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ffa4d33c4fe99b969c4f69a9b247ebf8de1f0303\nparent 6b75057a41b4642a3ea57f9e0e03ec0389363772\nauthor furszy <matiasfurszyfer@protonmail.com> 1764012838 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1765902942 -0500\n\nAdd API to override SHA256 transform at runtime\n\nThis introduces `secp256k1_context_set_sha256_transform_callback()`,\nwhich allows users to provide their own SHA256 block-compression\nfunction at runtime.\n\nThis is useful in setups where the optimal implementation is detected\ndynamically, where rebuilding the library is not possible, or when\nthe compression function is not written in bare C89.\n\nThe callback is installed on the `secp256k1_context` and is then used\nby all operations that compute SHA256 hashes. As part of the setup,\nthe library performs sanity checks to ensure that the supplied\nfunction is equivalent to the default transform.\n\nPassing NULL to the callback setter restores the built-in\nimplementation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmlBil4ACgkQXdI8zGhq\npiNRsQ/6Az4sTeKIxrKPMT/aQMxalwfcUGt8aAMw4tTrD/+SpePJQmjAUqd4fqPu\nLK3Tgv54QvfSnxsFAlFgKGHisFjU//M7PnwN/RG9Jghd7eNd8a1sQHadkqeFkhzN\nojmot2AQA5cVqOPtEzQPax4TfICPfpDqU7LPDop1kVWwFpMKc6QeE/mhyfg18dXR\nDQMEF1LvwhvPRurgqYw0b0dDNk2t5ECGX+6FEv4mrOzN3x0uwXn70gdkyBeFXmeK\nP7/TR8/ruOlqWYuOvzu8Cjv+r0SXC9eYYElQW/IlUMyfjr60YgETZH+TToAcMG/2\n/8B94XQ/QA+rJzWJfAFC2b3YAubLP+W0dGBtUfORrEZWNGPqav/HlbSXjXF7lyO2\n2WBq+mbAWgj47iTmaXz4QEiAWsy4m53X2/OV6FK/S5jEHkBTCTwsYkToohTJK22U\nzNFDFShYdeh93Q1jifJ8IfbbEmOCbv1fZMeMOBcU3ttoqYOsx1nTEyHq5qENbiFg\nOD34Kqaj+MaS9BX9IYNDhO3cJYhDtafMwmue7H+5QCAhfEU/yEsvZOGqNmWC3d3F\n5bYgEkTkC3rdHNQTovnGzuBl6qHpCr9OsBLDswYeViy1rR3FyKtas2rZvRKzPWH6\n0c9Vf/pWoyokk+r9M5+iWZeG5X6WZw+V25Qq2a7Is7Y5og2olcQ=\n=vfVX\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/6b75057a41b4642a3ea57f9e0e03ec0389363772",
          "sha": "6b75057a41b4642a3ea57f9e0e03ec0389363772",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/6b75057a41b4642a3ea57f9e0e03ec0389363772"
        }
      ],
      "message": "Add API to override SHA256 transform at runtime\n\nThis introduces `secp256k1_context_set_sha256_transform_callback()`,\nwhich allows users to provide their own SHA256 block-compression\nfunction at runtime.\n\nThis is useful in setups where the optimal implementation is detected\ndynamically, where rebuilding the library is not possible, or when\nthe compression function is not written in bare C89.\n\nThe callback is installed on the `secp256k1_context` and is then used\nby all operations that compute SHA256 hashes. As part of the setup,\nthe library performs sanity checks to ensure that the supplied\nfunction is equivalent to the default transform.\n\nPassing NULL to the callback setter restores the built-in\nimplementation.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-12-16T16:35:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-24T19:33:58Z"
      },
      "sha": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21603012377,
      "node_id": "HRFPE_lADOAP4Jqs7a8JDRzwAAAAUHo88Z",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21603012377",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "commit_url": "https://api.github.com/repos/furszy/secp256k1/commits/3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "created_at": "2025-12-16T21:45:40Z"
    },
    {
      "event": "reviewed",
      "id": 3563595127,
      "node_id": "PRR_kwDOAP4Jqs7UaCV3",
      "url": null,
      "actor": null,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-16T21:48:22Z",
      "author_association": "MEMBER",
      "body": "Update pushed, thanks for the deep review real_or_random!\r\nI haven’t fully finished addressing all the comments yet, but I'll hopefully finish tomorrow. So many good topics.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3563595127",
      "submitted_at": "2025-12-16T21:48:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    },
    {
      "event": "commented",
      "id": 3666883503,
      "node_id": "IC_kwDOAP4Jqs7akDOv",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3666883503",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T19:44:17Z",
      "updated_at": "2025-12-17T19:45:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "A few high-level comments:\r\n* I don't think we should do link-time plugging in the same PR as runtime plugging, and when we do, I don't think it should be done through the \"module\" abstractions. We use modules for exporting functionality from the library, not for offering replacement of internal dependencies (I find it strange to have base functionality depend on a module!).\r\n* \"round\" is a term of art in cipher design, and SHA-256 has exactly 64 rounds. Using the same term with another meaning is confusing.\r\n* I would try hard to avoid storing the transformation function pointer inside the `secp256k1_sha256` struct. Reviewing many lines that just add an extra parameter being pass through is not hard.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#issuecomment-3666883503",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777"
    },
    {
      "event": "reviewed",
      "id": 3594435763,
      "node_id": "PRR_kwDOAP4Jqs7WPryz",
      "url": null,
      "actor": null,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-12-18T18:31:46Z",
      "author_association": "MEMBER",
      "body": "Per feedback, this is how it would look if we pass the function everywhere https://github.com/furszy/secp256k1/commit/8149fc119071c532e9d2d6c3b633af7a37e5a0b8 vs how it looks when the function lives in the `sha256` struct (an updated version of what we currently have here): https://github.com/furszy/secp256k1/commit/eb570826371f42a5bd320f8e43800281b1f63b0a\r\n\r\nLet me know what you guys think.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3594435763",
      "submitted_at": "2025-12-18T18:31:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597483802",
      "pull_request_review_id": 3550658761,
      "id": 2597483802,
      "node_id": "PRRC_kwDOAP4Jqs6a0nUa",
      "diff_hunk": "@@ -92,6 +93,7 @@ typedef struct secp256k1_ecdsa_signature {\n  * the message, the algorithm, the key and the attempt.\n  */\n typedef int (*secp256k1_nonce_function)(\n+    const secp256k1_context *ctx,",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Argh, that's a breaking change. I didn't see that coming.\n\nBut I think it can be avoided. If the user wants to pass a custom nonce function, they anyway have no way of calling our internal function (whether it uses a custom SHA256 transform or not).\n\nSo we can keep the struct here and add the context arg only to our built-in nonce function. Our ECDSA signing function (and Schnorr signing, and ECDH, etc.) will need to special-case the built-in nonce function because it has a different function signature. Not elegant but it will do the job.\n\n~Maybe we can come up with something nicer if we (ever) add a modern ECDSA module and deprecate the ECDSA stuff in the main secp256k1.h file.~ edit: Probably no because this affects not just ECDSA.",
      "created_at": "2025-12-08T08:11:32Z",
      "updated_at": "2025-12-08T09:40:29Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597483802",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597483802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 94,
      "start_side": "LEFT",
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597519740",
      "pull_request_review_id": 3550658761,
      "id": 2597519740,
      "node_id": "PRRC_kwDOAP4Jqs6a0wF8",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 8,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Do we need this function given that there's already `secp256k1_selftest_sha256(void)`, which is run when a context is created? The existing one seems a bit simpler than your function and it's already there, so using that will make the diff smaller (but it will need to be modified to obtain an optional context). And perhaps the existing one is a bit slower than yours. I'd say either function is fine but keeping both seems overkill.\r\n\r\n(The existing selftest is currently in `selftest.h`. That's already wrong; it *should* have been put in a `selftest_impl.h`. But your approach is better: the SHA256 test function should be exposed from the internal hash module and then called from selftest.)\r\n\r\n\r\nedit: Okay, I see now. It's annoying than I thought. We expose `secp256k1_selftest(void)` which doesn't get a context object... The reason it's exposed is that you can use it when using the static context. \r\n\r\nSo I believe it makes sense to check the SHA256 at two places: \r\n - In `secp256k1_selftest(void)` because this will catch bugs in the built-in SHA256. This is particularly important with this PR given that it makes possible overriding the built-in implementation it at build time. \r\n - When setting a custom SHA256 transform. \r\n\r\nThis means we may perform two checks in the worst case, but that won't be the end of the world. You get the overhead only at library initialization time. But the question remains: How should the test look like? And I still think what I said above is true: It's okay to have a single `secp256k1_sha256_selftest` function in the hash module, and this can be called from the selftest module and from `secp256k1_context_set_sha256_transform_callback`.",
      "created_at": "2025-12-08T08:22:06Z",
      "updated_at": "2025-12-08T09:26:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597519740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597519740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 15,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597556267",
      "pull_request_review_id": 3550658761,
      "id": 2597556267,
      "node_id": "PRRC_kwDOAP4Jqs6a05Ar",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "A potential problem with storing the callback in the `secp256k1_sha256` struct is that you could have this series of events:\r\n - User sets callback to `cb1`.\r\n - User calls API function that calls `secp256k1_sha256_initialize`, which outputs some opaque object that contains the `secp256k1_sha256` struct.\r\n - User sets callback go `cb2`.\r\n - Users passes the opaque object to another API function, which calls `secp256k1_sha256_write`, which calls `cb1`. UB.  \r\n\r\n(I believe) this cannot happen in the current code because there's no pair of API functions that behaves in this way, but it's a potential footgun for the future.\r\n\r\nMy suggestion is just passing the context object to every internal function that needs the SHA256 callback. (Another angle: State is annoying. We have state already in the context, so let's try to keep it there.)\r\n\r\n\r\n",
      "created_at": "2025-12-08T08:31:08Z",
      "updated_at": "2025-12-08T09:26:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597556267",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597556267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597581215",
      "pull_request_review_id": 3550658761,
      "id": 2597581215,
      "node_id": "PRRC_kwDOAP4Jqs6a0_Gf",
      "diff_hunk": "@@ -56,20 +57,27 @@\n     } \\\n } while(0)\n \n+struct secp256k1_hash_context {\n+    sha256_transform_callback fn_sha256_transform;\n+};",
      "path": "src/secp256k1.c",
      "position": 1,
      "original_position": 14,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I think it will be nice to define this in the internal hash module, just like `secp256k1_ecmult_gen_context` is defined in the ecmult_gen module. ",
      "created_at": "2025-12-08T08:37:00Z",
      "updated_at": "2025-12-08T09:26:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597581215",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597581215"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597615324",
      "pull_request_review_id": 3550658761,
      "id": 2597615324,
      "node_id": "PRRC_kwDOAP4Jqs6a1Hbc",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I was wondering whether it makes sense to allow for a real return value here to make it possible for the callback to indicate some kind of failure (e.g., couldn't access external hardware, or malloc failed). We could then fall back to our implementation or simply call the error callback in order to crash.\r\n\r\nMy current conclusion is no: I can't imagine this being useful in practice. (If you call external hardware, this will be super slow anyway. If you use malloc for SHA256, you're doing it wrong.) Even if there's some failure, the callback will still have the possibility to crash the process.",
      "created_at": "2025-12-08T08:45:33Z",
      "updated_at": "2025-12-08T09:26:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597615324",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597615324"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597654756",
      "pull_request_review_id": 3550658761,
      "id": 2597654756,
      "node_id": "PRRC_kwDOAP4Jqs6a1RDk",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What's the motivation for the rounds arg? (Do you think we'll ever call this with any other value than 1?)",
      "created_at": "2025-12-08T08:55:14Z",
      "updated_at": "2025-12-08T09:26:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597654756",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597654756"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597815721",
      "pull_request_review_id": 3551060764,
      "id": 2597815721,
      "node_id": "PRRC_kwDOAP4Jqs6a14Wp",
      "diff_hunk": "",
      "path": "include/secp256k1_sha.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "75ccf99a0751d84e098aab7c4a13170e825c0496",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "What's the motivation for exposing the SHA256 compression?\r\n\r\nUnless I'm missing something, then if anything, I think we'd want to expose the high-level SHA256 function. I'm not sure how useful it is, and we tried to keep the library focused on ECC. On the other hand, we'll have it anyway in the code base, and it's required for Schnorr sigs (and we anyway expose a tagged hash for Schnorr sigs). So if you ask me, it's fine to expose SHA256 as long as we add a comment that says that users shouldn't expect a highly performant implementation. \r\n\r\nBut perhaps it's better to debate the exposing in a separate PR.",
      "created_at": "2025-12-08T09:34:10Z",
      "updated_at": "2025-12-08T09:34:48Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597815721",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597815721"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597829742",
      "pull_request_review_id": 3551077587,
      "id": 2597829742,
      "node_id": "PRRC_kwDOAP4Jqs6a17xu",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 38,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Naming: I wonder whether it makes sense to avoid the word callback here. Sure, it's a callback, but whenever we said callback in the past 10 years of this library, it was about error handling. We even have type `secp256k1_callback` (which probably should have been called `secp256k1_error_callback` but it's too late now.)\n\nMaybe we can just call it \"function \" and \"function pointer\", like we do in the bring-your-own-nonce-function interfaces. ",
      "created_at": "2025-12-08T09:38:57Z",
      "updated_at": "2025-12-08T09:38:57Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597829742",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597829742"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597841305",
      "pull_request_review_id": 3551090512,
      "id": 2597841305,
      "node_id": "PRRC_kwDOAP4Jqs6a1-mZ",
      "diff_hunk": "@@ -220,6 +229,18 @@ void secp256k1_context_set_error_callback(secp256k1_context* ctx, void (*fun)(co\n     ctx->error_callback.data = data;\n }\n \n+void secp256k1_context_set_sha256_transform_callback(secp256k1_context *ctx, void (*sha256_transform_callback_)(uint32_t *state, const unsigned char *block, size_t rounds)) {",
      "path": "src/secp256k1.c",
      "position": 1,
      "original_position": 49,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "It will be nice to have a typedef for the function type in the public header.",
      "created_at": "2025-12-08T09:42:32Z",
      "updated_at": "2025-12-08T09:42:32Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2597841305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2597841305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 232,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2598064155",
      "pull_request_review_id": 3551364928,
      "id": 2598064155,
      "node_id": "PRRC_kwDOAP4Jqs6a21Ab",
      "diff_hunk": "@@ -134,6 +134,12 @@ SECP_TRY_APPEND_DEFAULT_CFLAGS(SECP_CFLAGS)\n ### Define config arguments\n ###\n \n+AC_ARG_WITH([external-sha256],\n+  AS_HELP_STRING([--with-external-sha256=PATH], [use external SHA256 compression implementation]),\n+  [external_sha256_path=\"$withval\"],\n+  [external_sha256_path=\"\"]\n+)",
      "path": "configure.ac",
      "position": 8,
      "original_position": 8,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Regarding the build stuff for the build-time override: We already have the possibility to have build-time overrides for the error callbacks, e.g., see `AC_ARG_ENABLE(external_default_callbacks,` below.\n\nWhen it comes to the implementation of how the new override is configured and performed, I think it's similar to the existing overrides for the callback. (Except that these don't allow configuring the header to be included, which makes them rather useless... https://github.com/bitcoin-core/secp256k1/pull/1461)\n\nSo this will need a rework anyway [1]. This belongs to a different PR, of course, but I think the SHA override here is a good opportunity to think about a better design of a compile-time override, so we may want to iterate on this a bit more than expected. No matter how it's designed, I think we should, in the long run, have only one (non-deprecated) mechanism for a build-time override of a function. \n\n[1] I don't think what I did for the error callbacks great, and I guess it would be okay to change it (I doubt that many users rely on this). Or even better, we could deprecate it and simply provide ways to provide build-time overrides for standard library symbols like `printf`, `stderr`, and `abort`.  See for example the approach taken by mbedTLS (in the past ?) which is built with embedded systems in mind: https://github.com/Mbed-TLS/mbedtls/blob/550a18d4d6b29e62b6824201d8a49b8224e61c97/tf-psa-crypto%2Fdrivers%2Fbuiltin%2Finclude%2Fmbedtls%2Fplatform.h They provide macros for overriding standard library functions. So you have full flexibility as a user: if you've implemented a function that aborts, but it's not called `abort()` (perhaps because that is a reserved name) then you can link it to the library also with a different name. ",
      "created_at": "2025-12-08T10:43:14Z",
      "updated_at": "2025-12-08T10:44:27Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2598064155",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2598064155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 137,
      "original_start_line": 137,
      "start_side": "RIGHT",
      "line": 141,
      "original_line": 141,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2598066046",
      "pull_request_review_id": 3551364928,
      "id": 2598066046,
      "node_id": "PRRC_kwDOAP4Jqs6a21d-",
      "diff_hunk": "@@ -134,6 +134,12 @@ SECP_TRY_APPEND_DEFAULT_CFLAGS(SECP_CFLAGS)\n ### Define config arguments\n ###\n \n+AC_ARG_WITH([external-sha256],",
      "path": "configure.ac",
      "position": 4,
      "original_position": 4,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": null,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "nit: I think this one should also be an `enable`-style configure option instead of a `with`-style configure options; `with` is for compiling with external *packages* e.g., `with-libxyz`. And what the user provides here is not a package. ",
      "created_at": "2025-12-08T10:43:53Z",
      "updated_at": "2025-12-08T10:44:27Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2598066046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2598066046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 137,
      "original_line": 137,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2620897504",
      "pull_request_review_id": 3563595127,
      "id": 2620897504,
      "node_id": "PRRC_kwDOAP4Jqs6cN7jg",
      "diff_hunk": "@@ -92,6 +93,7 @@ typedef struct secp256k1_ecdsa_signature {\n  * the message, the algorithm, the key and the attempt.\n  */\n typedef int (*secp256k1_nonce_function)(\n+    const secp256k1_context *ctx,",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 12,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597483802,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> So we can keep the struct here and add the context arg only to our built-in nonce function. Our ECDSA signing function (and Schnorr signing, and ECDH, etc.) will need to special-case the built-in nonce function because it has a different function signature. Not elegant but it will do the job.\r\n\r\nDone. Spent quite a bit of time thinking about this, mainly because the so-called \"default\" function (the one exposed in the public header [here](https://github.com/bitcoin-core/secp256k1/blob/8d445730ec79a9fa722eea59b6b697c3b9b1d501/include/secp256k1.h#L641)) is not the one will be used when a custom sha256 transform is provided.., which somewhat defeats the purpose of calling it \"default\".\r\nStill, after a few rounds of thought and discussions with theStack and sipa, I think this is fine. It’s expected that a \"different\" function is used when the user provides own sha transform.",
      "created_at": "2025-12-15T21:23:10Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2620897504",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2620897504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 94,
      "start_side": "LEFT",
      "line": null,
      "original_line": 96,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2623847529",
      "pull_request_review_id": 3563595127,
      "id": 2623847529,
      "node_id": "PRRC_kwDOAP4Jqs6cZLxp",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 8,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597519740,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> So I believe it makes sense to check the SHA256 at two places:\r\n> \r\n> * In `secp256k1_selftest(void)` because this will catch bugs in the built-in SHA256. This is particularly important with this PR given that it makes possible overriding the built-in implementation it at build time.\r\n> * When setting a custom SHA256 transform.\r\n> \r\n> This means we may perform two checks in the worst case, but that won't be the end of the world. You get the overhead only at library initialization time. But the question remains: How should the test look like? And I still think what I said above is true: It's okay to have a single `secp256k1_sha256_selftest` function in the hash module, and this can be called from the selftest module and from `secp256k1_context_set_sha256_transform_callback`.\r\n\r\nYeah, I did start from that idea originally (that’s essentially why we also call to `secp256k1_selftest_sha256` inside `secp256k1_context_set_sha256_transform` first), but I ended up feeling that the existing selftest is a bit too weak for what we want to validate here.\r\n\r\nIt only checks a single 64-byte message, so it exercises exactly one compression round and never goes through the padding path or the buffering across multiple writes. Which felt insufficient to me. Validating the transform against the internal implementation also seemed like a reasonable extra safety net to ensure parity without adding more hardcoded values.\r\n\r\nStructurally, I agree that having a single `secp256k1_sha256_selftest` living in the hash module, makes sense.\r\n\r\nThe thing now is that neither test alone fully covers both aspects: we still want a check against hardcoded outputs, but we also want to verify more realistic usage patterns. That’s why I thought having both was useful.\r\nThat said, we could get similar coverage by extending the existing selftest with more hardcoded values too.. (this comes from a nice talk I had with @theStack). So.. probably we could re-use the existing one for now, and extend its coverage in a follow-up.\r\nHappy to hear your thoughts",
      "created_at": "2025-12-16T15:54:00Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2623847529",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2623847529"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 15,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624739553",
      "pull_request_review_id": 3563595127,
      "id": 2624739553,
      "node_id": "PRRC_kwDOAP4Jqs6ccljh",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597556267,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> My suggestion is just passing the context object to every internal function that needs the SHA256 callback.\r\n\r\nI did started there, but didn’t really like where it was leading me. Mainly because going down that path will be significantly more invasive than the current changes: It requires changing every `secp256k1_sha256_write` call to receive the function arg, every hmac, tagged hash etc.\r\nIt also includes changing `secp256k1_sha256_finalize`! which will also require the function arg because we call write during finalization too.\r\nOverall, I think the end result would be quite ugly for what we gain here (see below for more rationale).\r\n\r\n> A potential problem with storing the callback in the `secp256k1_sha256` struct is that you could have this series of events:\r\n> \r\n> * User sets callback to `cb1`.\r\n> * User calls API function that calls `secp256k1_sha256_initialize`, which outputs some opaque object that contains the `secp256k1_sha256` struct.\r\n> * User sets callback go `cb2`.\r\n> * Users passes the opaque object to another API function, which calls `secp256k1_sha256_write`, which calls `cb1`. UB.\r\n> \r\n> (I believe) this cannot happen in the current code because there's no pair of API functions that behaves in this way, but it's a potential footgun for the future.\r\n\r\nI'm not fully convinced it's a realistic scenario. Changing the sha256 transform callback in the middle of an ongoing procedure doesn’t really make sense in any intended usage. If someone does that, they should already be well outside the model we expect the API to be used under.\r\nTo me, this is similar to deleting the callback function from another thread while a libsecp operation is executing.\r\n\r\nAlso, exposing an in-use sha256 object across API boundaries is something we should simply never do right?. That feels really ugly. These structs are only valid under the assumption that they were initialized via `secp256k1_sha256_initialize`; otherwise, the internal fields would already be invalid, independently of the transform callback. And we cannot ensure that the struct has been initialized properly (or not corrupted) if we share it externally.\r\nI mean, if we ever want to share an existing sha256, I would say we should share the state and buffer directly as bytes and then re-initialize the struct on the receiving side.\r\n\r\nSo overall, I think it worth documenting the expectation clearly for sure: like sha256 structs must not be shared externally, and the provided sha256 callback, must be provided during app's init, and must remain active for the entire app lifecycle once provided (because it doesn't make sense to change it). But I'm not sure this is a problem we need to design around. It would add other complications without a clear benefit. But let me know what you think.",
      "created_at": "2025-12-16T21:05:43Z",
      "updated_at": "2025-12-17T18:35:07Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2624739553",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624739553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624770643",
      "pull_request_review_id": 3563595127,
      "id": 2624770643,
      "node_id": "PRRC_kwDOAP4Jqs6cctJT",
      "diff_hunk": "@@ -56,20 +57,27 @@\n     } \\\n } while(0)\n \n+struct secp256k1_hash_context {\n+    sha256_transform_callback fn_sha256_transform;\n+};",
      "path": "src/secp256k1.c",
      "position": 1,
      "original_position": 14,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597581215,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I think it will be nice to define this in the internal hash module, just like secp256k1_ecmult_gen_context is defined in the ecmult_gen module.\r\n\r\nSure. Done as suggested.",
      "created_at": "2025-12-16T21:18:07Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2624770643",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624770643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 62,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624774694",
      "pull_request_review_id": 3563595127,
      "id": 2624774694,
      "node_id": "PRRC_kwDOAP4Jqs6ccuIm",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 38,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597829742,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Naming: I wonder whether it makes sense to avoid the word callback here. Sure, it's a callback, but whenever we said callback in the past 10 years of this library, it was about error handling. We even have type secp256k1_callback (which probably should have been called secp256k1_error_callback but it's too late now.)\r\n\r\nSure. Renamed to `secp256k1_context_set_sha256_transform` 👍🏼 .",
      "created_at": "2025-12-16T21:19:49Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2624774694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624774694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 426,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624802953",
      "pull_request_review_id": 3563595127,
      "id": 2624802953,
      "node_id": "PRRC_kwDOAP4Jqs6cc1CJ",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597654756,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What's the motivation for the rounds arg? (Do you think we'll ever call this with any other value than 1?)\r\n\r\nI think it's better to introduce it now, even if it's currently always set to 1, so we don’t end up breaking the API later if we ever need it. But can remove it if you are strongly opposed to it.",
      "created_at": "2025-12-16T21:29:52Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2624802953",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624802953"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624838425",
      "pull_request_review_id": 3563595127,
      "id": 2624838425,
      "node_id": "PRRC_kwDOAP4Jqs6cc9sZ",
      "diff_hunk": "",
      "path": "include/secp256k1_sha.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "75ccf99a0751d84e098aab7c4a13170e825c0496",
      "in_reply_to_id": 2597815721,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> What's the motivation for exposing the SHA256 compression?\r\n>\r\n> Unless I'm missing something, then if anything, I think we'd want to expose the high-level SHA256 function. I'm not sure how useful it is, and we tried to keep the library focused on ECC. On the other hand, we'll have it anyway in the code base, and it's required for Schnorr sigs (and we anyway expose a tagged hash for Schnorr sigs). So if you ask me, it's fine to expose SHA256 as long as we add a comment that says that users shouldn't expect a highly performant implementation.\r\n\r\nActually, the motivation wasn't so much that I expect people to use it directly. It's more about making an explicit statement in the API: the sha256 transform is something that can be replaced or disabled if you want to (thus I thought it could be a new module). Exposing it makes that contract clear, instead of it being an internal detail that people can obscurely replace.\r\n\r\nThat said, I agree this is somewhat orthogonal topic.",
      "created_at": "2025-12-16T21:42:02Z",
      "updated_at": "2025-12-16T21:48:22Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2624838425",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2624838425"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2626204368",
      "pull_request_review_id": 3586724011,
      "id": 2626204368,
      "node_id": "PRRC_kwDOAP4Jqs6ciLLQ",
      "diff_hunk": "",
      "path": "include/secp256k1_sha.h",
      "position": 1,
      "original_position": 1,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "75ccf99a0751d84e098aab7c4a13170e825c0496",
      "in_reply_to_id": 2597815721,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> It's more about making an explicit statement in the API: the sha256 transform is something that can be replaced or disabled if you want to (thus I thought it could be a new module). Exposing it makes that contract clear, instead of it being an internal detail that people can obscurely replace.\r\n\r\nMaybe my thinking is just too simplistic, but the only thing that exposing makes clear to me (as a user) is that I can call it, (and that there's some kind of guarantee that future releases will contain a function with the same signature and behavior).\r\n\r\n> That said, I agree this is somewhat orthogonal topic.\r\n\r\nI think so, yes.\r\n\r\n\r\nWhat could be done to make the API docs more explicit is to point out in the docs for `secp256k1_context_set_sha256_transform_callback` where this is used by the library without being an implementation detail (namely Schnorr sigs, ECDH, IIRC also ellswift). Would probably suffice to say something like \"e.g., Schnorr signatures and the default key derivation function for ECDH\". \r\n",
      "created_at": "2025-12-17T09:11:05Z",
      "updated_at": "2025-12-17T09:11:20Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2626204368",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2626204368"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2626237384",
      "pull_request_review_id": 3586763754,
      "id": 2626237384,
      "node_id": "PRRC_kwDOAP4Jqs6ciTPI",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597654756,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> so we don’t end up breaking the API later if we ever need it.\r\n\r\nI might be missing something but I really tend to think that is too obscure.\r\n\r\n - I can't imagine a reason why we would ever need it. Applying the transform more than once to the same data is not done within SHA256. So we'll need this if we ever implement our own hardened hash function SHA256+ based on SHA256?\r\n - Even if it turns out that we need this functionality, we can simply call the transform in a loop. Perhaps that will come with a tiny performance disadvantage due to the overhead of the function call, but that will be acceptable.\r\n\r\n",
      "created_at": "2025-12-17T09:20:03Z",
      "updated_at": "2025-12-17T09:20:04Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2626237384",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2626237384"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2627621245",
      "pull_request_review_id": 3588420328,
      "id": 2627621245,
      "node_id": "PRRC_kwDOAP4Jqs6cnlF9",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 8,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597519740,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "I missed to update this one. The latest push uses only `secp256k1_sha256_selftest`. Calling it twice as suggested.",
      "created_at": "2025-12-17T15:56:02Z",
      "updated_at": "2025-12-17T16:49:57Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2627621245",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2627621245"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": 15,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 17,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2627719101",
      "pull_request_review_id": 3588536503,
      "id": 2627719101,
      "node_id": "PRRC_kwDOAP4Jqs6cn8-9",
      "diff_hunk": "@@ -134,6 +134,12 @@ SECP_TRY_APPEND_DEFAULT_CFLAGS(SECP_CFLAGS)\n ### Define config arguments\n ###\n \n+AC_ARG_WITH([external-sha256],\n+  AS_HELP_STRING([--with-external-sha256=PATH], [use external SHA256 compression implementation]),\n+  [external_sha256_path=\"$withval\"],\n+  [external_sha256_path=\"\"]\n+)",
      "path": "configure.ac",
      "position": 8,
      "original_position": 8,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2598064155,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Hmm, I see. Those are very good points. Agree this worth a deeper discussion.\r\n\r\nNo problem splitting the changes. We can keep this PR focused on the runtime feature and handle the build-time override design separately. The only change we need from the build-time commit for this PR is exposing the transform function in `hash.h`, so we can initialize the context default function.",
      "created_at": "2025-12-17T16:21:52Z",
      "updated_at": "2025-12-17T16:21:52Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2627719101",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2627719101"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 137,
      "original_start_line": 137,
      "start_side": "RIGHT",
      "line": 141,
      "original_line": 141,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628299244",
      "pull_request_review_id": 3589239735,
      "id": 2628299244,
      "node_id": "PRRC_kwDOAP4Jqs6cqKns",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597556267,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Maybe I should give the \"pass the function to every `write` call\" patch-set another try and compare the resulting changes. I did it early on so maybe it is not as bad as I remember it. Let me see..",
      "created_at": "2025-12-17T19:04:32Z",
      "updated_at": "2025-12-17T19:04:32Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628299244",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628299244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628385281",
      "pull_request_review_id": 3589344182,
      "id": 2628385281,
      "node_id": "PRRC_kwDOAP4Jqs6cqfoB",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597615324,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> I was wondering whether it makes sense to allow for a real return value here to make it possible for the callback to indicate some kind of failure (e.g., couldn't access external hardware, or malloc failed). We could then fall back to our implementation or simply call the error callback in order to crash.\r\n\r\nhmm, how would we actually call the error callback from inside `hash_impl.h`? That would require passing the context all the way down into the sha256 `sha_write` and `sha_finalize` functions (hmac, tagged hashes, etc), which would introduce a `hash_impl.h` dependency on `secp256k1.h` (unless we move the context definition elsewhere). But this seems to be a low-level primitive file that shouldn't receive the context.",
      "created_at": "2025-12-17T19:33:11Z",
      "updated_at": "2025-12-17T19:33:11Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628385281",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628385281"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628521300",
      "pull_request_review_id": 3589502788,
      "id": 2628521300,
      "node_id": "PRRC_kwDOAP4Jqs6crA1U",
      "diff_hunk": "@@ -134,6 +134,12 @@ SECP_TRY_APPEND_DEFAULT_CFLAGS(SECP_CFLAGS)\n ### Define config arguments\n ###\n \n+AC_ARG_WITH([external-sha256],\n+  AS_HELP_STRING([--with-external-sha256=PATH], [use external SHA256 compression implementation]),\n+  [external_sha256_path=\"$withval\"],\n+  [external_sha256_path=\"\"]\n+)",
      "path": "configure.ac",
      "position": 8,
      "original_position": 8,
      "commit_id": "3683e07ef4b6a062eec1776220eeeec0c30bc2ec",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2598064155,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> We can keep this PR focused on the runtime feature and handle the build-time override design separately\r\n\r\nRight, I hadn't considered this option. That's a good idea. (And I see that sipa suggested the same below.)",
      "created_at": "2025-12-17T20:23:33Z",
      "updated_at": "2025-12-17T20:23:34Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628521300",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628521300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 137,
      "original_start_line": 137,
      "start_side": "RIGHT",
      "line": 141,
      "original_line": 141,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628529481",
      "pull_request_review_id": 3589514196,
      "id": 2628529481,
      "node_id": "PRRC_kwDOAP4Jqs6crC1J",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597615324,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> But this seems to be a low-level primitive file that shouldn't receive the context.\r\n\r\nHm, I don't think there is (or should be) a rule that says low-level primitives shouldn't receive the error callback. It doesn't need to be the full context.\r\n\r\nBut let me just resolve this conversation. As I already wrote above, I doubt that my suggestion was useful in the first place.",
      "created_at": "2025-12-17T20:26:39Z",
      "updated_at": "2025-12-17T20:26:39Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628529481",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628529481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628554409",
      "pull_request_review_id": 3589544017,
      "id": 2628554409,
      "node_id": "PRRC_kwDOAP4Jqs6crI6p",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597556267,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Also, exposing an in-use sha256 object across API boundaries is something we should simply never do right?. That feels really ugly.\r\n\r\nIt doesn't feel ugly to me. Of course, we wouldn't share it standalone but inside some other object. For example, like we expose an `secp256k1_scalar` inside an opaque `secp256k1_musig_keyagg_cache`. \r\n\r\nAnd I don't think the use case would be unrealistic. Having a \"hash builder\" is common, and it could very well be part of a high-level function. Just imagine an advanced schnorrsig signing object that lets you append to the message multiple times before finalizing the signatures (e.g., for cases in which you want to sign a long message whose parts you receive step by step).\r\n",
      "created_at": "2025-12-17T20:35:52Z",
      "updated_at": "2025-12-17T20:35:52Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628554409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628554409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628563203",
      "pull_request_review_id": 3589555773,
      "id": 2628563203,
      "node_id": "PRRC_kwDOAP4Jqs6crLED",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597556267,
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> Maybe I should give the \"pass the function to every `write` call\" patch-set another try and compare the resulting changes. I did it early on so maybe it is not as bad as I remember it. Let me see..\r\n\r\nYes, I see that passing the function down is annoying and that it has a non-zero readability and maintenance cost.  But I imagine it's not too bad. (I tend to agree with sipa here: reviewing many obvious diff lines is not an issue.) Seeing the resulting diff would certainly help to see how bad it is. ",
      "created_at": "2025-12-17T20:39:12Z",
      "updated_at": "2025-12-17T20:39:12Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2628563203",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2628563203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2632227231",
      "pull_request_review_id": 3594501006,
      "id": 2632227231,
      "node_id": "PRRC_kwDOAP4Jqs6c5Jmf",
      "diff_hunk": "@@ -10,13 +10,20 @@\n #include <stdlib.h>\n #include <stdint.h>\n \n+typedef void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds);\n+\n+/* Validate user-supplied SHA-256 transform by comparing its output against\n+ * the library's linked implementation */\n+static int secp256k1_sha256_check_transform(sha256_transform_callback fn_transform);\n+\n typedef struct {\n     uint32_t s[8];\n     unsigned char buf[64];\n     uint64_t bytes;\n+    sha256_transform_callback fn_transform;\n } secp256k1_sha256;\n \n-static void secp256k1_sha256_initialize(secp256k1_sha256 *hash);\n+static void secp256k1_sha256_initialize(secp256k1_sha256 *hash, sha256_transform_callback fn_transform);\n static void secp256k1_sha256_write(secp256k1_sha256 *hash, const unsigned char *data, size_t size);\n static void secp256k1_sha256_finalize(secp256k1_sha256 *hash, unsigned char *out32);",
      "path": "src/hash.h",
      "position": 1,
      "original_position": 20,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597556267,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "> > Maybe I should give the \"pass the function to every `write` call\" patch-set another try and compare the resulting changes. I did it early on so maybe it is not as bad as I remember it. Let me see..\r\n> \r\n> Yes, I see that passing the function down is annoying and that it has a non-zero readability and maintenance cost. But I imagine it's not too bad. (I tend to agree with sipa here: reviewing many obvious diff lines is not an issue.) Seeing the resulting diff would certainly help to see how bad it is.\r\n\r\nOk done, both options available https://github.com/bitcoin-core/secp256k1/pull/1777#pullrequestreview-3594435763 ",
      "created_at": "2025-12-18T18:41:21Z",
      "updated_at": "2025-12-18T18:41:21Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2632227231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2632227231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": 25,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2632315854",
      "pull_request_review_id": 3594621649,
      "id": 2632315854,
      "node_id": "PRRC_kwDOAP4Jqs6c5fPO",
      "diff_hunk": "@@ -403,6 +405,29 @@ SECP256K1_API void secp256k1_context_set_error_callback(\n     const void *data\n ) SECP256K1_ARG_NONNULL(1);\n \n+/**\n+ * Set a callback function to override the internal SHA-256 transform.\n+ *\n+ * This installs a function to replace the built-in block-compression\n+ * step used by the library's internal SHA-256 implementation.\n+ * The provided callback must be functionally identical (bit-for-bit)\n+ * to the default transform. Any deviation  will cause incorrect results\n+ * and undefined behaviour.\n+ *\n+ * This API exists to support environments that wish to route the\n+ * SHA-256 compression step through a hardware-accelerated or otherwise\n+ * specialized implementation. It is not meant for modifying the\n+ * semantics of SHA-256.\n+ *\n+ * Args: ctx:    pointer to a context object.\n+ * In: callback: pointer to a function implementing the transform step.\n+ *               (passing NULL restores the default implementation)\n+ */\n+SECP256K1_API void secp256k1_context_set_sha256_transform_callback(\n+        secp256k1_context *ctx,\n+        void (*sha256_transform_callback)(uint32_t *state, const unsigned char *block, size_t rounds)",
      "path": "include/secp256k1.h",
      "position": 1,
      "original_position": 40,
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "original_commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "in_reply_to_id": 2597654756,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "body": "Ok yeah, agree. Adding this just to repeat the compression on the same block doesn’t make much sense, but (idea) what about processing multiple blocks in a row?\r\nAn API for that could be useful since implementations would be able to skip per-block-compression variables initialization, cleanups, etc.",
      "created_at": "2025-12-18T19:05:13Z",
      "updated_at": "2025-12-18T19:05:13Z",
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#discussion_r2632315854",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments/2632315854"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 428,
      "side": "RIGHT"
    }
  ]
}