{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777",
    "id": 3052569091,
    "node_id": "PR_kwDOAP4Jqs618oID",
    "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777",
    "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1777.diff",
    "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1777.patch",
    "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777",
    "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/7fefa9c851d36214a4a03aeae36b59aee9d08263",
    "number": 1777,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Make SHA256 compression pluggable",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "body": "Tackling the long-standing request #702.\r\n\r\nRight now we ship our own SHA256 implementation, a standard baseline version that does not take advantage of any hardware-optimized instruction, and it cannot be accessed by the embedding application - it is for internal usage only.\r\n\r\nThis means embedding applications often have to implement or include a different version for their use cases, wasting space on constrained environments, and in performance-sensitive setups it forces them to use a slower path than what the platform provides. Many projects already rely on tuned SHA-NI / ARMv8 / or other hardware-optimized code, so always using the baseline implementation we ship within the library is not ideal.\r\n\r\nThis PR gives our users a way to bring their own SHA256 compression, either at build time or at runtime, while keeping the default behavior untouched for everyone else.\r\n\r\n#### Compile-time: External SHA256 module\r\n\r\nThe built-in transform is moved out of `hash_impl.h`into a small sha module with its own public header (`secp256k1_sha.h`). The idea is to stop treating the compression step as a private, hidden detail, and instead make it part of a public interface that users can swap out if they want to.\r\nBoth build systems gain optional support for pointing libsecp to an external implementation:\r\n* Autotools: `--with-external-sha256=<path>`\r\n* CMake: `SECP256K1_EXTERNAL_SHA256_PATH`\r\n\r\nNote:\r\nDue to our current limitation of disabling C++ builds (see [this](https://github.com/bitcoin-core/secp256k1/blob/b6c2a3cd7752085d46434921238401766c964c01/src/secp256k1.c#L15)), the provided external implementation must be written in C. (A way to overcome this would be to compile and link this externally instead of doing it within the library).\r\n\r\n#### Runtime: Context callback\r\n\r\nFor setups where we detect the available SHA256 compression function at runtime and cannot re-compile the sources, or when the function is not written in bare C89, there’s a new API:\r\n```C89\r\nsecp256k1_context_set_sha256_transform_callback(ctx, fn_transform)\r\n```\r\n\r\nThis lets users plug-in their hardware-optimized implementation into the `secp256k1_context`, which is required in all functions that compute sha256 hashes.\r\nDuring the initial setting, as a sanity check, this mechanism verifies that the provided compression function is equivalent to the default one.\r\n\r\nAs a quick example, the changes required to implement this in Bitcoin-Core at runtime are very straightforward: https://github.com/furszy/bitcoin-core/commit/f68bef06d95a589859f98fc898dd80ab2e35eb39\r\n\r\nImplementing this at compile time in Bitcoin Core is possible, but it would require changing the C version we build against (which is not recommended). For example, we cannot link the SHA-NI implementation we have in Core (even if rewritten in C89) because it depends on the `arm_neon` library, which requires C99.",
    "labels": [],
    "created_at": "2025-11-27T23:18:33Z",
    "updated_at": "2025-12-01T21:16:51Z",
    "mergeable": true,
    "mergeable_state": "unstable",
    "merged": false,
    "merge_commit_sha": "8cc499c1c2e5d4d39cd06966bcec7b2d96061d0f",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2025_pluggable_sha256_transform",
      "ref": "2025_pluggable_sha256_transform",
      "sha": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 1049838831,
        "node_id": "R_kgDOPpNE7w",
        "name": "secp256k1",
        "full_name": "furszy/secp256k1",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/secp256k1",
        "archive_url": "https://api.github.com/repos/furszy/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/furszy/secp256k1/events",
        "forks_url": "https://api.github.com/repos/furszy/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/furszy/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/furszy/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/furszy/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/furszy/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/furszy/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/furszy/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/furszy/secp256k1/hooks",
        "svn_url": "https://github.com/furszy/secp256k1",
        "language": "C",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 12901,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-12-01T15:22:57Z",
        "created_at": "2025-09-03T15:10:42Z",
        "updated_at": "2025-12-01T15:23:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin-core:master",
      "ref": "master",
      "sha": "e7f7083b530a55c83ce9089a7244d2d9d67ac8b2",
      "user": {
        "login": "bitcoin-core",
        "id": 13464320,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin-core",
        "html_url": "https://github.com/bitcoin-core",
        "followers_url": "https://api.github.com/users/bitcoin-core/followers",
        "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
        "repos_url": "https://api.github.com/users/bitcoin-core/repos",
        "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
        "type": "Organization",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "repo": {
        "id": 16648618,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjY0ODYxOA==",
        "name": "secp256k1",
        "full_name": "bitcoin-core/secp256k1",
        "owner": {
          "login": "bitcoin-core",
          "id": 13464320,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjEzNDY0MzIw",
          "avatar_url": "https://avatars.githubusercontent.com/u/13464320?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin-core",
          "html_url": "https://github.com/bitcoin-core",
          "followers_url": "https://api.github.com/users/bitcoin-core/followers",
          "following_url": "https://api.github.com/users/bitcoin-core/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin-core/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin-core/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin-core/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin-core/orgs",
          "repos_url": "https://api.github.com/users/bitcoin-core/repos",
          "events_url": "https://api.github.com/users/bitcoin-core/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin-core/received_events",
          "type": "Organization",
          "site_admin": false,
          "name": null,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin-core/secp256k1",
        "description": "Optimized C library for EC operations on curve secp256k1",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1",
        "archive_url": "https://api.github.com/repos/bitcoin-core/secp256k1/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin-core/secp256k1/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin-core/secp256k1/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin-core/secp256k1/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin-core/secp256k1/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin-core/secp256k1/downloads",
        "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/events",
        "forks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin-core/secp256k1.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin-core/secp256k1/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin-core/secp256k1/languages",
        "merges_url": "https://api.github.com/repos/bitcoin-core/secp256k1/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin-core/secp256k1/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin-core/secp256k1/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin-core/secp256k1.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin-core/secp256k1/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin-core/secp256k1/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin-core/secp256k1/tags",
        "teams_url": "https://api.github.com/repos/bitcoin-core/secp256k1/teams",
        "trees_url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin-core/secp256k1.git",
        "hooks_url": "https://api.github.com/repos/bitcoin-core/secp256k1/hooks",
        "svn_url": "https://github.com/bitcoin-core/secp256k1",
        "language": "C",
        "forks_count": 1103,
        "stargazers_count": 2352,
        "watchers_count": 2352,
        "size": 13986,
        "default_branch": "master",
        "open_issues_count": 158,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-11-27T16:27:17Z",
        "created_at": "2014-02-08T17:30:06Z",
        "updated_at": "2025-11-30T23:43:55Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1777"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 606,
    "deletions": 313,
    "changed_files": 33,
    "commits": 2,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDc1Y2NmOTlhMDc1MWQ4NGUwOThhYWI3YzRhMTMxNzBlODI1YzA0OTY",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/75ccf99a0751d84e098aab7c4a13170e825c0496",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/75ccf99a0751d84e098aab7c4a13170e825c0496",
      "tree": {
        "sha": "4369e67768fe8938529f460e6a17d0d32b11dc4c",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/4369e67768fe8938529f460e6a17d0d32b11dc4c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4369e67768fe8938529f460e6a17d0d32b11dc4c\nparent e7f7083b530a55c83ce9089a7244d2d9d67ac8b2\nauthor furszy <matiasfurszyfer@protonmail.com> 1764017863 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1764345232 -0500\n\nAdd ability to provide SHA256 compression at compile-time\n\nIntroduces a new `sha` module that exposes the SHA256\ncompression function and allows users to provide their\nown implementation.\n\nThis moves the built-in transform logic out of `hash_impl.h`\ninto a dedicated module (`src/modules/sha`), adds the\ncorresponding public header (`secp256k1_sha.h`), and wires\nthe module through Autotools and CMake via:\n`--with-external-sha256` / SECP256K1_EXTERNAL_SHA256_PATH.\n\nExisting behavior is unchanged; the library compiles and\nlinks the default transform function by default.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmkpxZAACgkQXdI8zGhq\npiOA1hAAnY7CCJxHW2PZINWr5e1oaqsFxWq/pslfVNhVuiNQ8OpSCmUmUT4gEjRp\nJDD9PGj2N0Kaa7xxVvU+a5zYf9FY9ly6u637nnjAhXxDNTLEFyDn4PZZo46coccQ\nefMqaley9OrkhTe7PMUYxrk5XOPbrGGpX6ZXoHElH2wnUoFI0c/U09kL5/r/FDnM\n9TPqXnx5mTsAFq2zq4FCVf66vtosxoiw1sMb4XJ3aVVg++b/1zj4gGUOZOsWQBID\ngMEKTuedDbcZURLzwz7jonMDIw6M/gayJEIzn7bpi5dv38FPZwKyT4iB25kRasZ6\nRtpS2m5kR+h3mljd7ITH0fFhhtu4pEXct5AGHIrK+kc7qy7kjURv7ymBFSnDvJ/5\nAwoQcWEQmfx4O3CIsTQZ3KckcTjNtpiDaSn3ozp1HceCbdO6LZoBeYh+sxSltcf9\n2qc3/A3fNF38TVoKBX5t1q/gQN0iV+3sBK4kOZ/c75vD+xWX/qEdmgt7Jqu05aKS\nCCGdXi0vf+YC5K+M6EdXwEB2KpCkoC45aTIIs9Y/mOApBGrllsoSENkbR1VVAvH/\nCq2nhPMKL4bWURfEMacKazDUeQoMls3QeT3B7OxsM9znYAXzCbKHF45uv9bybts8\nvXPHXu7NFkEFN8NHdWnAGrY/sqhIIDhQXJyc6U4buSb6GhAo9cs=\n=upsF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/e7f7083b530a55c83ce9089a7244d2d9d67ac8b2",
          "sha": "e7f7083b530a55c83ce9089a7244d2d9d67ac8b2",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/e7f7083b530a55c83ce9089a7244d2d9d67ac8b2"
        }
      ],
      "message": "Add ability to provide SHA256 compression at compile-time\n\nIntroduces a new `sha` module that exposes the SHA256\ncompression function and allows users to provide their\nown implementation.\n\nThis moves the built-in transform logic out of `hash_impl.h`\ninto a dedicated module (`src/modules/sha`), adds the\ncorresponding public header (`secp256k1_sha.h`), and wires\nthe module through Autotools and CMake via:\n`--with-external-sha256` / SECP256K1_EXTERNAL_SHA256_PATH.\n\nExisting behavior is unchanged; the library compiles and\nlinks the default transform function by default.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-28T15:53:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-24T20:57:43Z"
      },
      "sha": "75ccf99a0751d84e098aab7c4a13170e825c0496"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOAP4JqtoAKDdmZWZhOWM4NTFkMzYyMTRhNGEwM2FlYWUzNmI1OWFlZTlkMDgyNjM",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin-core/secp256k1/commit/7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "tree": {
        "sha": "1081e61b0df63c4158b797c7e23cc0d6469a9e5b",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/trees/1081e61b0df63c4158b797c7e23cc0d6469a9e5b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1081e61b0df63c4158b797c7e23cc0d6469a9e5b\nparent 75ccf99a0751d84e098aab7c4a13170e825c0496\nauthor furszy <matiasfurszyfer@protonmail.com> 1764012838 -0500\ncommitter furszy <matiasfurszyfer@protonmail.com> 1764345232 -0500\n\nAdd API to override SHA256 transform at runtime\n\nThis introduces `secp256k1_context_set_sha256_transform_callback()`,\nwhich allows users to provide their own SHA256 block-compression\nfunction at runtime.\n\nThis is useful in setups where the optimal implementation is detected\ndynamically, where rebuilding the library is not possible, or when\nthe compression function is not written in bare C89.\n\nThe callback is installed on the `secp256k1_context` and is then used\nby all operations that compute SHA256 hashes. As part of the setup,\nthe library performs sanity checks to ensure that the supplied\nfunction is equivalent to the default transform.\n\nPassing NULL to the callback setter restores the built-in\nimplementation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmkpxZAACgkQXdI8zGhq\npiM6jxAAlsxSoFa3ReINj/mntg6edQ+FiqeNgrTJwlPYnTLwso2AkO/61Ym4t0m/\nrUeHSFoiQiffJ/wzZXBGk5LOQ1LhvaSQp9pM5tHEutTptXaArWMCuV3CPYhpWWAK\nKJwqaCVIclpkzWe1YuQEfeZj8uHyjLiQQDQrAI8qinm6/5+RIs7cwD8D8YTZdYqS\nqjCEt/hKxZsiQk7/2h5motVV55le/BtgkocYFm6GSPO1vOKN0wD0SbkDH/TlZhzb\nJwI/zX8WTGhI1jVW+Fi2/jm4hOWkAb9wCWEqnxY+mdSF5n7VZo17MV3w98kHxhPK\nW6Y504GcGFesgUXuUI858fUr5rcQgWmzVjpHBrjH20wbMsKKCZuM0yeolamIQF6X\nPBUDRC/W8z6DIXxVwsQQkx9sN9HZwYy3VrsCEbIhnfErtpkFrqFlUECnrjcn6+St\nO3d+veAGga088Nr16raExpOw7iS5P4gXXWlg6/bU1+I8V1IVwVEzDMF/L75Jq7sC\nJ3SDfzXURQvjYyI5O86Vz7JYvSOeCEY3QDjimyDMdkeUBxHAtLNtV5lHZaDByHMr\nQ9a8lRxI/Yo54fqWfaKHmjRBVk8Zh8ndh4tt7ISMKMvVg/VBhPIFtBAcylDAj8zd\nh7J3M7c3Zsowma2idos/dumLHFlWqGY290IUjMw7BTFqz6s7X9A=\n=JVHp\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/git/commits/75ccf99a0751d84e098aab7c4a13170e825c0496",
          "sha": "75ccf99a0751d84e098aab7c4a13170e825c0496",
          "html_url": "https://github.com/bitcoin-core/secp256k1/commit/75ccf99a0751d84e098aab7c4a13170e825c0496"
        }
      ],
      "message": "Add API to override SHA256 transform at runtime\n\nThis introduces `secp256k1_context_set_sha256_transform_callback()`,\nwhich allows users to provide their own SHA256 block-compression\nfunction at runtime.\n\nThis is useful in setups where the optimal implementation is detected\ndynamically, where rebuilding the library is not possible, or when\nthe compression function is not written in bare C89.\n\nThe callback is installed on the `secp256k1_context` and is then used\nby all operations that compute SHA256 hashes. As part of the setup,\nthe library performs sanity checks to ensure that the supplied\nfunction is equivalent to the default transform.\n\nPassing NULL to the callback setter restores the built-in\nimplementation.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-28T15:53:52Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-11-24T19:33:58Z"
      },
      "sha": "7fefa9c851d36214a4a03aeae36b59aee9d08263"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 21245030602,
      "node_id": "HRFPE_lADOAP4Jqs7a8JDRzwAAAATyTXDK",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/21245030602",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": "7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "commit_url": "https://api.github.com/repos/furszy/secp256k1/commits/7fefa9c851d36214a4a03aeae36b59aee9d08263",
      "created_at": "2025-11-28T15:54:47Z"
    },
    {
      "event": "commented",
      "id": 3597451370,
      "node_id": "IC_kwDOAP4Jqs7WbMBq",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3597451370",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T16:16:11Z",
      "updated_at": "2025-12-01T16:16:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "I guess this is more of a draft for initial review but I will spell it out anyway: It's currently missing some CI coverage for building with an external library as well as some docs. Curious what people think in terms of docs for something like this: Should there be extensive guidance in which context this is safe to use or would users be left on their own to try it out? Or are we assuming all users that go to this length are competent enough to judge if it's a good idea to bring their own sha256 or use the systems one?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#issuecomment-3597451370",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777"
    },
    {
      "event": "commented",
      "id": 3598403333,
      "node_id": "IC_kwDOAP4Jqs7We0cF",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3598403333",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-01T19:03:53Z",
      "updated_at": "2025-12-01T21:16:51Z",
      "author_association": "MEMBER",
      "body": "Thanks for the feedback fjahr!\r\n\r\n> I guess this is more of a draft for initial review but I will spell it out anyway: It's currently missing some CI coverage for building with an external library as well as some docs. \r\n\r\nYeah, can create a CI job testing the compile-time pluggable compression function very easily. Thanks for reminding that.\r\n\r\nAnd about the missing docs; yeah. I didn't add it because we currently don't have much documentation outside `configure.ac` / `CMakeLists.txt`. Happy to create a file for it.\r\n\r\n> Curious what people think in terms of docs for something like this: Should there be extensive guidance in which context this is safe to use or would users be left on their own to try it out? Or are we assuming all users that go to this length are competent enough to judge if it's a good idea to bring their own sha256 or use the systems one?\r\n\r\nIt’s not that we’re letting people plug in whatever they want. Both introduced features have guardrails:\r\n\r\n1) Compile-time: we run all current tests against the provided implementation, plus a runtime self-test.\r\n2) Runtime: besides the runtime self-test, have introduced an \"equivalence check\" that hashes known inputs and compares them against the library’s internal implementation before accepting the external function.\r\n\r\nSo you can bring your own compression function, but it still has to prove it behaves exactly like ours bit-for-bit.\r\n\r\nAlso, the target user here is someone who's actually written a hardware-optimized SHA256. It’s not like they stumbled into this by accident.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1777#issuecomment-3598403333",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1777"
    }
  ],
  "comments": []
}