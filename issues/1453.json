{
  "type": "issue",
  "issue": {
    "id": 2027753132,
    "node_id": "I_kwDOAP4Jqs543Q6s",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1453",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1453/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1453/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1453/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1453",
    "number": 1453,
    "state": "open",
    "state_reason": null,
    "title": "secp256k1_fe_set_b32_mod doesn't actually reduce anything",
    "body": "`secp256k1_fe_set_b32_mod` method name and comment suggest that it reduces the value mod p and the result is supposed to be `r â‰¡ a (mod p)`  \r\nhttps://github.com/bitcoin-core/secp256k1/blob/d3e29db8bbf81600fe0a6bd70b12fe57a0121b83/src/field.h#L187-L192  \r\n\r\nHowever looking at the implementations they don't actually perform any reduction. It's just a simple conversion from byte[] to uint[] in radix 26 or 52.  \r\nhttps://github.com/bitcoin-core/secp256k1/blob/d3e29db8bbf81600fe0a6bd70b12fe57a0121b83/src/field_impl.h#L270-L277  \r\nhttps://github.com/bitcoin-core/secp256k1/blob/d3e29db8bbf81600fe0a6bd70b12fe57a0121b83/src/field_10x26_impl.h#L293-L304   \r\nhttps://github.com/bitcoin-core/secp256k1/blob/d3e29db8bbf81600fe0a6bd70b12fe57a0121b83/src/field_5x52_impl.h#L235-L270  \r\n\r\nAfter this change the old method (`secp256k1_fe_set_b32_limit`) is still used in most places except something like this \r\nhttps://github.com/bitcoin-core/secp256k1/commit/5b32602295ff7ad9e1973f96b8ee8344b82f4af0#diff-6f71b0372be086d45b4f2740508c03a21835d87008840032fbb767f419fd988a  \r\nAnd it just assumes `secp256k1_fe_set_b32_mod` reduces the result while it doesn't.  \r\n\r\n@sipa ",
    "user": {
      "login": "Coding-Enthusiast",
      "id": 20510382,
      "node_id": "MDQ6VXNlcjIwNTEwMzgy",
      "avatar_url": "https://avatars.githubusercontent.com/u/20510382?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Coding-Enthusiast",
      "html_url": "https://github.com/Coding-Enthusiast",
      "followers_url": "https://api.github.com/users/Coding-Enthusiast/followers",
      "following_url": "https://api.github.com/users/Coding-Enthusiast/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Coding-Enthusiast/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Coding-Enthusiast/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Coding-Enthusiast/subscriptions",
      "organizations_url": "https://api.github.com/users/Coding-Enthusiast/orgs",
      "repos_url": "https://api.github.com/users/Coding-Enthusiast/repos",
      "events_url": "https://api.github.com/users/Coding-Enthusiast/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Coding-Enthusiast/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2023-12-06T06:23:56Z",
    "updated_at": "2023-12-06T13:19:56Z"
  },
  "events": [
    {
      "event": "mentioned",
      "id": 11162984431,
      "node_id": "MEE_lADOAP4Jqs543Q6szwAAAAKZXZ_v",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/11162984431",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T06:23:57Z"
    },
    {
      "event": "subscribed",
      "id": 11162984435,
      "node_id": "SE_lADOAP4Jqs543Q6szwAAAAKZXZ_z",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/11162984435",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T06:23:57Z"
    },
    {
      "event": "commented",
      "id": 1842864718,
      "node_id": "IC_kwDOAP4Jqs5t1-JO",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1842864718",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T13:19:33Z",
      "updated_at": "2023-12-06T13:19:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "You're right that the function `secp256k1_fe_set_b32_mod` itself doesn't perform any modular reductions. But it doesn't need to: the `secp256k1_fe` type itself does: all operations on `secp255k1_fe` automatically perform reductions when the integer used to represent it overflows too much.\n\nIn short, `secp256k1_fe` can *only* represent elements of the finite field \"integers modulo p\". It encapsulates an integer, and that integer can (within certain bounds) exceed p, but the actual integer is hidden by the abstraction: none of the functions operating on the type let you observe the integer.\n\nSo the only difference between `secp256k1_fe_set_b32_mod` and `secp256k1_fe_set_b32_limit` is that the latter detects and fails if the input exceeds p, but then in return gives a stronger guarantee on how normalized (basically, how small the integers inside is guaranteed to be) the resulting field element is.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1453#issuecomment-1842864718",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1453"
    }
  ]
}