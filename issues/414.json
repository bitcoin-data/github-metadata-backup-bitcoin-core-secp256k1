{
  "type": "issue",
  "issue": {
    "id": 175648134,
    "node_id": "MDU6SXNzdWUxNzU2NDgxMzQ=",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/414",
    "number": 414,
    "state": "closed",
    "state_reason": "completed",
    "title": "Unused var assignment (scan-build warning)",
    "body": "```\n124 static void secp256k1_ecmult_gen(const secp256k1_ecmult_gen_context *ctx, secp256k1_gej *r, const secp256k1_scalar *gn) {\n125     secp256k1_ge add;\n126     secp256k1_ge_storage adds;\n127     secp256k1_scalar gnb;\n128     int bits;\n129     int i, j;\n130     memset(&adds, 0, sizeof(adds));\n131     *r = ctx->initial;\n132     /* Blind scalar/point multiplication by computing (n-b)G + bG instead of nG. */\n133     secp256k1_scalar_add(&gnb, gn, &ctx->blind);\n134     add.infinity = 0;\n135     for (j = 0; j < 64; j++) {\n136         bits = secp256k1_scalar_get_bits(&gnb, j * 4, 4);\n137         for (i = 0; i < 16; i++) {\n138             /** This uses a conditional move to avoid any secret data in array indexes.\n139              *   _Any_ use of secret indexes has been demonstrated to result in timing\n140              *   sidechannels, even when the cache-line access patterns are uniform.\n141              *  See also:\n142              *   \"A word of warning\", CHES 2013 Rump Session, by Daniel J. Bernstein and Peter Schwabe\n143              *    (https://cryptojedi.org/peter/data/chesrump-20130822.pdf) and\n144              *   \"Cache Attacks and Countermeasures: the Case of AES\", RSA 2006,\n145              *    by Dag Arne Osvik, Adi Shamir, and Eran Tromer\n146              *    (http://www.tau.ac.il/~tromer/papers/cache.pdf)\n147              */\n148             secp256k1_ge_storage_cmov(&adds, &(*ctx->prec)[j][i], i == bits);\n149         }\n150         secp256k1_ge_from_storage(&add, &adds);\n151         secp256k1_gej_add_ge(r, r, &add);\n152     }\n153     bits = 0;\n\nValue stored to 'bits' is never read\n154     secp256k1_ge_clear(&add);\n155     secp256k1_scalar_clear(&gnb);\n156 }\n```\n",
    "user": {
      "login": "rustyrussell",
      "id": 775844,
      "node_id": "MDQ6VXNlcjc3NTg0NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rustyrussell",
      "html_url": "https://github.com/rustyrussell",
      "followers_url": "https://api.github.com/users/rustyrussell/followers",
      "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
      "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
      "repos_url": "https://api.github.com/users/rustyrussell/repos",
      "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 3,
    "closed_at": "2019-05-29T12:12:33Z",
    "created_at": "2016-09-08T02:04:48Z",
    "updated_at": "2019-05-29T12:12:33Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 247662839,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI0NzY2MjgzOQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/247662839",
      "actor": {
        "login": "llamasoft",
        "id": 4632450,
        "node_id": "MDQ6VXNlcjQ2MzI0NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4632450?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/llamasoft",
        "html_url": "https://github.com/llamasoft",
        "followers_url": "https://api.github.com/users/llamasoft/followers",
        "following_url": "https://api.github.com/users/llamasoft/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/llamasoft/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/llamasoft/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/llamasoft/subscriptions",
        "organizations_url": "https://api.github.com/users/llamasoft/orgs",
        "repos_url": "https://api.github.com/users/llamasoft/repos",
        "events_url": "https://api.github.com/users/llamasoft/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/llamasoft/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-09-16T17:44:28Z",
      "updated_at": "2016-09-16T17:44:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "Looks like a false positive.  \nDuring the loop, `bits` contains private data (4-bit slices from `gn`).  The value is reset at the end of the function to prevent any private data from being read after the function ends.\n",
      "user": {
        "login": "llamasoft",
        "id": 4632450,
        "node_id": "MDQ6VXNlcjQ2MzI0NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4632450?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/llamasoft",
        "html_url": "https://github.com/llamasoft",
        "followers_url": "https://api.github.com/users/llamasoft/followers",
        "following_url": "https://api.github.com/users/llamasoft/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/llamasoft/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/llamasoft/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/llamasoft/subscriptions",
        "organizations_url": "https://api.github.com/users/llamasoft/orgs",
        "repos_url": "https://api.github.com/users/llamasoft/repos",
        "events_url": "https://api.github.com/users/llamasoft/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/llamasoft/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/414#issuecomment-247662839",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414"
    },
    {
      "event": "commented",
      "id": 247751135,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI0Nzc1MTEzNQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/247751135",
      "actor": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-09-17T05:43:21Z",
      "updated_at": "2016-09-17T05:43:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "llamasoft notifications@github.com writes:\n\n> Looks like a false positive.  \n> During the loop, `bits` contains private data (4-bit slices from `gn`).  The value is reset at the end of the function to prevent any private data from being read after the function ends.\n\nThat doesn't work, the compiler will almost certainly optimize out the\nassignment.  And even if it's best-effort, it would be best to comment\nit...\n\nIn fact, from a cursory test with gcc 5.4.0 in x86-64 Ubuntu, you can\ndelete these three lines at the end of secp256k1_ecmult_gen():\n\n```\nbits = 0;\nsecp256k1_ge_clear(&add);\nsecp256k1_scalar_clear(&gnb);\n```\n\nAnd the object produced doesn't change.\n\nCheers,\nRusty.\n",
      "user": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/414#issuecomment-247751135",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "llamasoft",
        "id": 4632450,
        "node_id": "MDQ6VXNlcjQ2MzI0NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4632450?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/llamasoft",
        "html_url": "https://github.com/llamasoft",
        "followers_url": "https://api.github.com/users/llamasoft/followers",
        "following_url": "https://api.github.com/users/llamasoft/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/llamasoft/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/llamasoft/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/llamasoft/subscriptions",
        "organizations_url": "https://api.github.com/users/llamasoft/orgs",
        "repos_url": "https://api.github.com/users/llamasoft/repos",
        "events_url": "https://api.github.com/users/llamasoft/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/llamasoft/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-09-19T15:27:48Z",
      "updated_at": "2016-09-19T15:27:48Z",
      "source": {
        "issue": {
          "id": 177816571,
          "node_id": "MDU6SXNzdWUxNzc4MTY1NzE=",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/418",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/418/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/418/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/418/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/issues/418",
          "number": 418,
          "state": "closed",
          "state_reason": "completed",
          "title": "Compiler optimizing out clearing of sensitive buffers",
          "body": "As noted from Issue #414, it appears that compilers are optimizing out the clearing of sensitive memory.  \nThere are a few ways to work around these shortcomings, discussed in [CWE-14](https://cwe.mitre.org/data/definitions/14.html) and [MSC06-C](https://www.securecoding.cert.org/confluence/display/c/MSC06-C.+Beware+of+compiler+optimizations).\n\nOptions include:\n- Casting to `volatile` during assignment\n- Rolling your own `memset_s` or using C11's version\n- Temporarily disabling optimization using `#pragma` (probably not portable)\n",
          "user": {
            "login": "llamasoft",
            "id": 4632450,
            "node_id": "MDQ6VXNlcjQ2MzI0NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4632450?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/llamasoft",
            "html_url": "https://github.com/llamasoft",
            "followers_url": "https://api.github.com/users/llamasoft/followers",
            "following_url": "https://api.github.com/users/llamasoft/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/llamasoft/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/llamasoft/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/llamasoft/subscriptions",
            "organizations_url": "https://api.github.com/users/llamasoft/orgs",
            "repos_url": "https://api.github.com/users/llamasoft/repos",
            "events_url": "https://api.github.com/users/llamasoft/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/llamasoft/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 1,
          "closed_at": "2019-05-30T18:19:05Z",
          "created_at": "2016-09-19T15:27:48Z",
          "updated_at": "2019-05-30T18:19:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 496910270,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NjkxMDI3MA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/496910270",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-05-29T12:12:33Z",
      "updated_at": "2019-05-29T12:12:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "Replaced by more descriptive #418",
      "user": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/414#issuecomment-496910270",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/414"
    },
    {
      "event": "closed",
      "id": 2374885755,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjM3NDg4NTc1NQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/2374885755",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-05-29T12:12:33Z"
    }
  ]
}