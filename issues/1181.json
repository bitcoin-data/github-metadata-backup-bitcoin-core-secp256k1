{
  "type": "issue",
  "issue": {
    "id": 1503223995,
    "node_id": "I_kwDOAP4Jqs5ZmWC7",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181",
    "number": 1181,
    "state": "open",
    "state_reason": null,
    "title": "Symbol visibility",
    "body": "In certain cases, we export too many symbols:\r\n - [ ] With `CFLAGS=-fvisibility=default`, there's a few exported _variables_ : `secp256k1_ecmult_gen_prec_table`, `secp256k1_pre_g`, `secp256k1_pre_g_128`\r\n - [x] on ARM, all the functions in the `.s` assembly files are visible but none should be visible (solved by https://github.com/bitcoin-core/secp256k1/pull/1242)\r\n - [x] Should we make all test functions static? (solved by https://github.com/bitcoin-core/secp256k1/pull/1190)\r\n - [ ] How to ensure correct visibility going forward (e.g., #1135) ",
    "user": {
      "login": "real-or-random",
      "id": 1071625,
      "node_id": "MDQ6VXNlcjEwNzE2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-or-random",
      "html_url": "https://github.com/real-or-random",
      "followers_url": "https://api.github.com/users/real-or-random/followers",
      "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
      "organizations_url": "https://api.github.com/users/real-or-random/orgs",
      "repos_url": "https://api.github.com/users/real-or-random/repos",
      "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/real-or-random/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 4975362431,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
        "name": "build",
        "description": "",
        "color": "2F66C4",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 11,
    "created_at": "2022-12-19T16:21:34Z",
    "updated_at": "2023-06-24T18:48:09Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1361769350,
      "node_id": "IC_kwDOAP4Jqs5RKvOG",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1361769350",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-21T18:00:11Z",
      "updated_at": "2022-12-21T18:11:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "> * With `CFLAGS=-fvisibility=default`, there's a few exported _variables_ : `secp256k1_ecmult_gen_prec_table`, `secp256k1_pre_g`, `secp256k1_pre_g_128`\r\n\r\nThe reason is that these three variables are not in the main translation unit, in which they're merely declared `extern`. (We cannot simply add `static`, because that would imply internal linkage which conflicts which the external linkage that we need due to the use of multiple compilation units.)  \r\n\r\nThere's no generic C language feature to fix this. But we can fix this in both GCC and clang by any of the following (in descending order of my personal preference).\r\n1. Add `__attribute__ ((visibility (\"hidden\")))` to the `extern` declarations\r\n2. Wrap the `extern` declarations in `#pragma GCC visibility push(hidden)` ... `#pragma GCC visibility pop`. \r\n    1. We could in fact do this with the entire code base (excluding where we include foreign headers). :shrug: Not entirely sure if it doesn't create further problems...\r\n3. Add `-Wl,--exclude-libs,libsecp256k1_precomputed.a` to `LDFLAGS` but that's kind of pointless to cover the case of default visibility, which typically occurs when the user invokes the compiler manually without even caring about `-fvisibility`.\r\n\r\nIn any case, `-fvisibility=hidden` would not be strictly necessary on the command line anymore (except for rather exotic compilers such as `icc` which understand it but not the attribute or the `#pragma`. This would then help [manual builds](https://github.com/bitcoin-core/secp256k1/issues/929) of shared libraries.\r\n\r\n",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1361769350",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "labeled",
      "id": 8159183975,
      "node_id": "LE_lADOAP4Jqs5ZmWC7zwAAAAHmU0Rn",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8159183975",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-05T10:58:52Z",
      "label": {
        "name": "build",
        "color": "571603"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-13T22:14:20Z",
      "updated_at": "2023-03-13T22:14:20Z",
      "source": {
        "issue": {
          "id": 1622351990,
          "node_id": "PR_kwDOAP4Jqs5L8G5m",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1242",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1242/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1242/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1242/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1242",
          "number": 1242,
          "state": "closed",
          "state_reason": null,
          "title": "Set ARM ASM symbol visibility to `hidden`",
          "body": "Solves one item in #1181.\r\n\r\nTo test on arm-32bit hardware, run:\r\n```\r\n$ ./autogen.sh && ./configure --enable-experimental --with-asm=arm && make\r\n```\r\n\r\nOn master branch (427bc3cdcfbc74778070494daab1ae5108c71368):\r\n```\r\n$ nm -D .libs/libsecp256k1.so | grep secp256k1_fe\r\n0000e2bc T secp256k1_fe_mul_inner\r\n0000e8dc T secp256k1_fe_sqr_inner\r\n```\r\n\r\nWith this PR:\r\n```\r\n$ nm -D .libs/libsecp256k1.so | grep secp256k1_fe | wc -l\r\n0\r\n```\r\n\r\nFor reference, see https://sourceware.org/binutils/docs/as/Hidden.html.\r\n",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1242",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1242",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1242.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1242.patch"
          },
          "closed_at": "2023-03-26T03:26:19Z",
          "created_at": "2023-03-13T22:14:20Z",
          "updated_at": "2023-03-26T09:26:08Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1469634101,
      "node_id": "IC_kwDOAP4Jqs5XmNY1",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1469634101",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T09:16:32Z",
      "updated_at": "2023-03-15T09:16:32Z",
      "author_association": "MEMBER",
      "body": ">    * [ ]  on ARM, all the functions in the `.s` assembly files are visible but none should be visible\r\n\r\nSolved by @theuni in #1242.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1469634101",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "mentioned",
      "id": 8752943232,
      "node_id": "MEE_lADOAP4Jqs5ZmWC7zwAAAAIJt1CA",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8752943232",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T09:16:32Z"
    },
    {
      "event": "subscribed",
      "id": 8752943248,
      "node_id": "SE_lADOAP4Jqs5ZmWC7zwAAAAIJt1CQ",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8752943248",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T09:16:32Z"
    },
    {
      "event": "unsubscribed",
      "id": 8754711010,
      "node_id": "UE_lADOAP4Jqs5ZmWC7zwAAAAIJ0kni",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8754711010",
      "actor": {
        "login": "romanz",
        "id": 9900,
        "node_id": "MDQ6VXNlcjk5MDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/romanz",
        "html_url": "https://github.com/romanz",
        "followers_url": "https://api.github.com/users/romanz/followers",
        "following_url": "https://api.github.com/users/romanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/romanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/romanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/romanz/subscriptions",
        "organizations_url": "https://api.github.com/users/romanz/orgs",
        "repos_url": "https://api.github.com/users/romanz/repos",
        "events_url": "https://api.github.com/users/romanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/romanz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T12:13:42Z"
    },
    {
      "event": "commented",
      "id": 1472496663,
      "node_id": "IC_kwDOAP4Jqs5XxIQX",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1472496663",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T18:18:18Z",
      "updated_at": "2023-03-16T18:18:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > * With `CFLAGS=-fvisibility=default`, there's a few exported _variables_ : `secp256k1_ecmult_gen_prec_table`, `secp256k1_pre_g`, `secp256k1_pre_g_128`\r\n> \r\n> The reason is that these three variables are not in the main translation unit, in which they're merely declared `extern`. (We cannot simply add `static`, because that would imply internal linkage which conflicts which the external linkage that we need due to the use of multiple compilation units.)\r\n> \r\n> There's no generic C language feature to fix this. But we can fix this in both GCC and clang by any of the following (in descending order of my personal preference).\r\n> \r\n>     1. Add `__attribute__ ((visibility (\"hidden\")))` to the `extern` declarations\r\n> \r\n>     2. Wrap the `extern` declarations in `#pragma GCC visibility push(hidden)` ... `#pragma GCC visibility pop`.\r\n\r\nI'm afraid you're chasing after some ghosts here because as far as I can tell from my tests it's perfectly possible to use the `export` keyword without forcing default visibility despite what some of the docs say.\r\n\r\nNotice that these exports aren't present in the linux shared libraries, only mingw.\r\n\r\nThe problem as I see it is that mingw is currently using `__attribute__ ((visibility (\"default\")))` to mark its external symbols. However the linker machinery seems to only be activated by `__declspec (dllexport)`. I had always kinda assumed they're equivalent, but minimal test-cases show that the differences are exactly our problems :)\r\n\r\n For me, making that switch (along with #1242) solves all current export problems that I'm aware of.\r\n\r\n```patch\r\ndiff --git a/include/secp256k1.h b/include/secp256k1.h\r\nindex 325f35eb..ed5bbc9a 100644\r\n--- a/include/secp256k1.h\r\n+++ b/include/secp256k1.h\r\n@@ -148,3 +148,3 @@ typedef int (*secp256k1_nonce_function)(\r\n /* Symbol visibility. See libtool manual, section \"Windows DLLs\". */\r\n-#if defined(_WIN32) && !defined(__GNUC__)\r\n+#if defined(_WIN32)\r\n # ifdef SECP256K1_BUILD\r\n```\r\n\r\n(Note that I haven't tested for Darwin though, it's possible that export visibility is different there)",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1472496663",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "commented",
      "id": 1472670567,
      "node_id": "IC_kwDOAP4Jqs5Xxytn",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1472670567",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T20:09:39Z",
      "updated_at": "2023-03-16T20:09:39Z",
      "author_association": "MEMBER",
      "body": "@theuni \r\n> For me, making that switch (along with #1242) solves all current export problems that I'm aware of.\r\n\r\nIt does not change the output of `x86_64-w64-mingw32-nm -g .libs/libsecp256k1-2.dll` for me. What am I doing wrong?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1472670567",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "mentioned",
      "id": 8771680113,
      "node_id": "MEE_lADOAP4Jqs5ZmWC7zwAAAAIK1Tdx",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8771680113",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T20:09:40Z"
    },
    {
      "event": "subscribed",
      "id": 8771680122,
      "node_id": "SE_lADOAP4Jqs5ZmWC7zwAAAAIK1Td6",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8771680122",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T20:09:40Z"
    },
    {
      "event": "commented",
      "id": 1472690535,
      "node_id": "IC_kwDOAP4Jqs5Xx3ln",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1472690535",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T20:25:31Z",
      "updated_at": "2023-03-16T20:25:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "Hmm, it definitely does for me. The difference is more clear with `objdump -p`.\r\n\r\nBefore:\r\n`objdump -p .libs/libsecp256k1-2.dll`:\r\n\r\n>         ...\r\n>         ...\r\n>         [  60] secp256k1_xonly_pubkey_serialize\r\n>         [  61] secp256k1_xonly_pubkey_tweak_add\r\n>         [  62] secp256k1_xonly_pubkey_tweak_add_check\r\n\r\nAfter the patch:\r\n`objdump -p .libs/libsecp256k1-2.dll`:\r\n\r\n>         ...\r\n>         ...\r\n>         [  57] secp256k1_xonly_pubkey_serialize\r\n>         [  58] secp256k1_xonly_pubkey_tweak_add\r\n>         [  59] secp256k1_xonly_pubkey_tweak_add_check\r\n> \r\n\r\nWhere the missing 3 are: `secp256k1_pre_g_128`, `secp256k1_pre_g`, and `secp256k1_ecmult_gen_prec_table`.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1472690535",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "commented",
      "id": 1472728657,
      "node_id": "IC_kwDOAP4Jqs5XyA5R",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1472728657",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T20:57:27Z",
      "updated_at": "2023-03-16T20:57:27Z",
      "author_association": "MEMBER",
      "body": "> Hmm, it definitely does for me. The difference is more clear with `objdump -p`.\r\n\r\nConfirming that it works for me as well. And the `-fvisibility=hidden` C compiler flag becomes redundant.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1472728657",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T21:07:23Z",
      "updated_at": "2023-03-16T21:07:23Z",
      "source": {
        "issue": {
          "id": 1573253318,
          "node_id": "PR_kwDOAP4Jqs5JYBvX",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1209",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1209/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1209/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1209/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1209",
          "number": 1209,
          "state": "closed",
          "state_reason": null,
          "title": "build: Add SECP256K1_API_VAR to fix importing variables from DLLs",
          "body": "... and more Windows fixes, please see the individual commits.\r\n\r\nThe fixed issues were discovered in https://github.com/bitcoin-core/secp256k1/pull/1198.\r\n",
          "user": {
            "login": "real-or-random",
            "id": 1071625,
            "node_id": "MDQ6VXNlcjEwNzE2MjU=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/real-or-random",
            "html_url": "https://github.com/real-or-random",
            "followers_url": "https://api.github.com/users/real-or-random/followers",
            "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
            "organizations_url": "https://api.github.com/users/real-or-random/orgs",
            "repos_url": "https://api.github.com/users/real-or-random/repos",
            "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/real-or-random/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1209",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1209",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1209.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1209.patch"
          },
          "closed_at": "2023-02-21T23:41:21Z",
          "created_at": "2023-02-06T20:46:38Z",
          "updated_at": "2023-06-28T14:24:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1472742440,
      "node_id": "IC_kwDOAP4Jqs5XyEQo",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1472742440",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-16T21:08:34Z",
      "updated_at": "2023-03-16T21:08:34Z",
      "author_association": "MEMBER",
      "body": ">    * [ ]  With `CFLAGS=-fvisibility=default`, there's a few exported _variables_ : `secp256k1_ecmult_gen_prec_table`, `secp256k1_pre_g`, `secp256k1_pre_g_128`\r\n\r\nIntroduced in #1209.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1472742440",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "commented",
      "id": 1473314681,
      "node_id": "IC_kwDOAP4Jqs5X0P95",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1473314681",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T07:51:52Z",
      "updated_at": "2023-03-17T07:51:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "> For me, making that switch (along with #1242) solves all current export problems that I'm aware of.\r\n\r\nNice. https://gcc.gnu.org/wiki/Visibility#How_to_use_the_new_C.2B-.2B-_visibility_support also suggests this. It would be nice to document this deviation from the libtool recommendation in the comment. \r\n\r\nInterestingly the gcc man page says\r\n> with -fvisibility=hidden and \"__attribute__ ((visibility(\"default\")))\" instead of \"__declspec(dllexport)\" you\r\n           get almost identical semantics with identical syntax.  \r\n\r\nYep, *almost* identical...",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1473314681",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "commented",
      "id": 1474024864,
      "node_id": "IC_kwDOAP4Jqs5X29Wg",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1474024864",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T15:36:17Z",
      "updated_at": "2023-03-17T15:36:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I had always kinda assumed they're equivalent\r\n\r\nHeh, I guess this is why:\r\n> Interestingly the gcc man page says\r\n> \r\n> > with -fvisibility=hidden and \"**attribute** ((visibility(\"default\")))\" instead of \"__declspec(dllexport)\" you\r\n> > get almost identical semantics with identical syntax.\r\n> \r\n> Yep, _almost_ identical...\r\n\r\n\r\nYeah, it would seem those docs are wrong, given that we're seeing obvious differences in behavior.\r\n\r\nIt may be that default visibility is _intended_ to be an alias for dllexport on windows, but if that's the case and this is a bug I doubt they'd change the behavior now. So I'd guess the best approach would be to submit an upstream PR to remove that line in the docs.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1474024864",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "commented",
      "id": 1474028086,
      "node_id": "IC_kwDOAP4Jqs5X2-I2",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1474028086",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T15:38:39Z",
      "updated_at": "2023-03-17T15:38:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Nice. https://gcc.gnu.org/wiki/Visibility#How_to_use_the_new_C.2B-.2B-_visibility_support also suggests this. It would be nice to document this deviation from the libtool recommendation in the comment.\r\n> \r\nWill do. I'll PR this as a fix, but I'll wait until the current PR onslaught slows down a bit to avoid piling on :)",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1474028086",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "referenced",
      "id": 8846427450,
      "node_id": "REFE_lADOAP4Jqs5ZmWC7zwAAAAIPScU6",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/8846427450",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "464a9115b4eda46b464d22829ece4f51985944bf",
      "commit_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits/464a9115b4eda46b464d22829ece4f51985944bf",
      "created_at": "2023-03-26T03:26:19Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-04T16:29:43Z",
      "updated_at": "2023-05-04T16:29:43Z",
      "source": {
        "issue": {
          "id": 1696320127,
          "node_id": "PR_kwDOAP4Jqs5Py1jK",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1295",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1295/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1295/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1295/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1295",
          "number": 1295,
          "state": "closed",
          "state_reason": null,
          "title": "abi: Use dllexport for mingw builds",
          "body": "Addresses the first part of #1181. See the discussion there for more context and history.\r\n\r\nAfter this, all that remains is a (platform-independent) exports checker for c-i. Or perhaps a linker script or .def file could be tricked into testing as a side-effect.\r\n\r\nThis should fix mingw exports, specifically hiding the following:\r\n`secp256k1_pre_g_128`\r\n`secp256k1_pre_g`\r\n`secp256k1_ecmult_gen_prec_table`\r\n\r\nThis changes our visibility macros to look more like [gcc's recommendation](https://gcc.gnu.org/wiki/Visibility#How_to_use_the_new_C.2B-.2B-_visibility_support).\r\n\r\nEdit:\r\nNote that we could further complicate this by supporting `__attribute__ ((dllexport))` as well, though I didn't bother as I'm not sure what compiler combo would accept that but not the bare dllexport syntax.\r\n\r\nEdit2:\r\nAs the title implies, this affects this ABI and could affect downstream libs/apps in unintended ways (though it's hard to imagine any real downside). Though because it's win32 only, I'm imagining very little real-world impact at all.",
          "user": {
            "login": "theuni",
            "id": 417043,
            "node_id": "MDQ6VXNlcjQxNzA0Mw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theuni",
            "html_url": "https://github.com/theuni",
            "followers_url": "https://api.github.com/users/theuni/followers",
            "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
            "organizations_url": "https://api.github.com/users/theuni/orgs",
            "repos_url": "https://api.github.com/users/theuni/repos",
            "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theuni/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1295",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1295",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1295.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1295.patch"
          },
          "closed_at": "2023-06-24T08:38:07Z",
          "created_at": "2023-05-04T16:29:43Z",
          "updated_at": "2023-06-24T08:38:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 9625124253,
      "node_id": "REFE_lADOAP4Jqs5ZmWC7zwAAAAI9s72d",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/9625124253",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "926dd3e9620fd19152aab9faad18c7e1bbe09db7",
      "commit_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits/926dd3e9620fd19152aab9faad18c7e1bbe09db7",
      "created_at": "2023-06-24T08:38:06Z"
    },
    {
      "event": "commented",
      "id": 1605678789,
      "node_id": "IC_kwDOAP4Jqs5ftLbF",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/1605678789",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-24T18:29:40Z",
      "updated_at": "2023-06-24T18:48:09Z",
      "author_association": "MEMBER",
      "body": "> But we can fix this in both GCC and clang by any of the following (in descending order of my personal preference).\r\n> \r\n>    1. Add `__attribute__ ((visibility (\"hidden\")))` to the `extern` declarations\r\n> \r\n>    2. Wrap the `extern` declarations in `#pragma GCC visibility push(hidden)` ... `#pragma GCC visibility pop`.\r\n\r\n~FWIW, neither works for macOS's DYLIB.~\r\n\r\nAre we happy with a non-macOS solution?\r\n\r\nUPD. It seems, there is a solution...",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1181#issuecomment-1605678789",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1181"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-26T12:16:23Z",
      "updated_at": "2023-06-26T12:16:23Z",
      "source": {
        "issue": {
          "id": 1774647707,
          "node_id": "PR_kwDOAP4Jqs5T6dkI",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1359",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1359/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1359/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1359/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1359",
          "number": 1359,
          "state": "open",
          "state_reason": null,
          "title": "Fix symbol visibility issues, add test for it",
          "body": "Closes https://github.com/bitcoin-core/secp256k1/issues/1181.\r\n\r\nReplaces https://github.com/bitcoin-core/secp256k1/pull/1135.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 165017692,
              "node_id": "MDU6TGFiZWwxNjUwMTc2OTI=",
              "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/assurance",
              "name": "assurance",
              "description": "",
              "color": "A6DF3D",
              "default": false
            },
            {
              "id": 4975362431,
              "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
              "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
              "name": "build",
              "description": "",
              "color": "2F66C4",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/1359",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/1359",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/1359.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/1359.patch"
          },
          "created_at": "2023-06-26T12:16:22Z",
          "updated_at": "2023-07-13T17:47:54Z"
        },
        "type": "issue"
      }
    }
  ]
}