{
  "type": "issue",
  "issue": {
    "id": 463482044,
    "node_id": "MDU6SXNzdWU0NjM0ODIwNDQ=",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/645",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/645/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/645/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/645/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/645",
    "number": 645,
    "state": "closed",
    "state_reason": "completed",
    "title": "Better output in failed tests  ",
    "body": "When a test fails, it currently outputs only the failed assertion (with file and line) to stderr. The seed is output to stdout only. Moreover, neither stdout nor stderr are output on `make check`. Instead, the stderr is written to `./test-suite.log`\r\n\r\nAs a consequence, a non-reproducible failure on Travis is somewhat useless to us because we just see the FAIL but we have no idea what failed because we don't see the contents of the log file. (This just happened downstream in secp256k1-zkp).  A similar issue was the failed PR build on a Fedora build server, which contained only stderr https://github.com/bitcoin-core/secp256k1/pull/558#issuecomment-495379966 and thus we didn't get the seed.\r\n\r\nWe should probably\r\n * output the seed to stderr, at least if the test fails.\r\n * output the log file in travis using `after_script` or `after_failure`, see https://docs.travis-ci.com/user/job-lifecycle/#the-job-lifecycle \r\n",
    "user": {
      "login": "real-or-random",
      "id": 1071625,
      "node_id": "MDQ6VXNlcjEwNzE2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-or-random",
      "html_url": "https://github.com/real-or-random",
      "followers_url": "https://api.github.com/users/real-or-random/followers",
      "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
      "organizations_url": "https://api.github.com/users/real-or-random/orgs",
      "repos_url": "https://api.github.com/users/real-or-random/repos",
      "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/real-or-random/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 0,
    "closed_at": "2019-11-25T14:09:05Z",
    "created_at": "2019-07-02T23:48:08Z",
    "updated_at": "2019-11-25T14:09:05Z"
  },
  "events": [
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-11-02T19:52:36Z",
      "updated_at": "2019-11-02T19:52:36Z",
      "source": {
        "issue": {
          "id": 516702357,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzM1OTI2NjQ4",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/685",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/685/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/685/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/685/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/685",
          "number": 685,
          "state": "closed",
          "state_reason": null,
          "title": "Fix issue where travis does not show the ./tests seed…",
          "body": "…by removing stdout buffering and always cat tests.log after a travis run. Fixes #645. \r\n\r\nI noticed that according to the [doc](https://www.gnu.org/software/automake/manual/html_node/Parallel-Test-Harness.html) tests.log should contain stdout as well as stderr. But it doesn't because stdout isn't flushed. I removed buffering completely to avoid having to call `fflush` twice.\r\n\r\nTravis is instructed to always show the seed which seems helpful with `after_script` by `cat`ing `./tests.log`. In case the tests fail it looks like https://travis-ci.org/jonasnick/secp256k1/jobs/606446234.\r\n",
          "user": {
            "login": "jonasnick",
            "id": 2582071,
            "node_id": "MDQ6VXNlcjI1ODIwNzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonasnick",
            "html_url": "https://github.com/jonasnick",
            "followers_url": "https://api.github.com/users/jonasnick/followers",
            "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
            "organizations_url": "https://api.github.com/users/jonasnick/orgs",
            "repos_url": "https://api.github.com/users/jonasnick/repos",
            "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonasnick/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/685",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/685",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/685.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/685.patch"
          },
          "closed_at": "2019-11-25T14:09:06Z",
          "created_at": "2019-11-02T19:52:36Z",
          "updated_at": "2019-11-25T14:09:06Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "closed",
      "id": 2828231500,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjgyODIzMTUwMA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/2828231500",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0db61d25c9fd84bf3fab80ec0c6afd03e948fa8b",
      "commit_url": "https://api.github.com/repos/bitcoin-core/secp256k1/commits/0db61d25c9fd84bf3fab80ec0c6afd03e948fa8b",
      "created_at": "2019-11-25T14:09:05Z"
    }
  ]
}