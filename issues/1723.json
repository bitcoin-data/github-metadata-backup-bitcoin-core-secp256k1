{
  "type": "issue",
  "issue": {
    "id": 3313650849,
    "node_id": "I_kwDOAP4Jqs7Fgkyh",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1723",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1723/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1723/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1723/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1723",
    "number": 1723,
    "state": "open",
    "state_reason": null,
    "title": "(RFC) Have CMake generate `vector.h` files for test vectors",
    "body": "Opening this as a follow-up to https://github.com/bitcoin-core/secp256k1/pull/1698#discussion_r2268280579\n\n---\n\nCurrently, test vector headers are generated from python files automatically as part of the `make` build system. It's particularly nice when developing, as you can just modify the python script and the vector.h file gets regenerated automatically.\n\nI was curious how hard this would be in CMake, so tried to hack something together here: https://github.com/josibake/secp256k1/commit/953953d1f44b08b8ce75525c86eaa7091c3af15b\n\nThis works-ish, in that I was able to generate the test vector files in the build directory and verified that changing the python scripts automatically regenerates the files. The main issue is CMake generates the header files out of tree, whereas the makefile generates them in tree. I don't see a clear way to support both? The natural thing in mind would be to have these files be stubs and have generated header files in the build directory (the way that CMake is doing it).\n\nI do think it would be nice to have the build systems consistent, but curious if others thing this is wanted/needed before I spend more time refining it. As mentioned in https://github.com/bitcoin-core/secp256k1/pull/1698#discussion_r2269261738, another perhaps even simpler approach would be to decouple the test vector generation from the build system entirely.",
    "user": {
      "login": "josibake",
      "id": 7444140,
      "node_id": "MDQ6VXNlcjc0NDQxNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/josibake",
      "html_url": "https://github.com/josibake",
      "followers_url": "https://api.github.com/users/josibake/followers",
      "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
      "organizations_url": "https://api.github.com/users/josibake/orgs",
      "repos_url": "https://api.github.com/users/josibake/repos",
      "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/josibake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 4975353639,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI3fJw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/feature",
        "name": "feature",
        "description": "",
        "color": "731E95",
        "default": false
      },
      {
        "id": 4975362431,
        "node_id": "LA_kwDOAP4Jqs8AAAABKI4Bfw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/build",
        "name": "build",
        "description": "",
        "color": "2F66C4",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 1,
    "created_at": "2025-08-12T10:43:07Z",
    "updated_at": "2025-08-12T10:57:36Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3178825812,
      "node_id": "IC_kwDOAP4Jqs69eQhU",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/3178825812",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T10:57:26Z",
      "updated_at": "2025-08-12T10:57:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept NACK\n\n> I do think it would be nice to have the build systems consistent,\n\nHm yes, in a world with infinite resources, yes. But I think if we're pragmatic, then this just isn't worth the effort. I claim it's fine if you are required to use autotools if you are a developer changing the test vectors. (And it's not even true: You can still use CMake and run the scripts manually.)",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1723#issuecomment-3178825812",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1723"
    },
    {
      "event": "labeled",
      "id": 19109563996,
      "node_id": "LE_lADOAP4Jqs7FgkyhzwAAAARzBM5c",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/19109563996",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T10:57:36Z",
      "label": {
        "name": "feature",
        "color": "731E95"
      }
    },
    {
      "event": "labeled",
      "id": 19109564011,
      "node_id": "LE_lADOAP4Jqs7FgkyhzwAAAARzBM5r",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/19109564011",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T10:57:36Z",
      "label": {
        "name": "build",
        "color": "2F66C4"
      }
    }
  ]
}