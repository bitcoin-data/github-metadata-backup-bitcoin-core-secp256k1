{
  "type": "issue",
  "issue": {
    "id": 504360763,
    "node_id": "MDU6SXNzdWU1MDQzNjA3NjM=",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/670",
    "number": 670,
    "state": "closed",
    "state_reason": "completed",
    "title": "naming: privkey vs seckey",
    "body": "We have a bunch of `secp256k1_ec_privkey_` functions but then we have `secp256k1_ec_seckey_verify`. I think we should create a `privkey` alias for this function.\r\n\r\n\r\nMore generally, we sometimes write \"private key\" and sometimes \"secret key\", and all the `privkey` functions expect a `seckey` argument. This should be made consistent too.",
    "user": {
      "login": "real-or-random",
      "id": 1071625,
      "node_id": "MDQ6VXNlcjEwNzE2MjU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/real-or-random",
      "html_url": "https://github.com/real-or-random",
      "followers_url": "https://api.github.com/users/real-or-random/followers",
      "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
      "organizations_url": "https://api.github.com/users/real-or-random/orgs",
      "repos_url": "https://api.github.com/users/real-or-random/repos",
      "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/real-or-random/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 3,
    "closed_at": "2020-03-31T12:26:41Z",
    "created_at": "2019-10-09T01:38:31Z",
    "updated_at": "2020-03-31T12:26:42Z"
  },
  "events": [
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-10-09T19:39:30Z",
      "updated_at": "2019-10-09T19:39:30Z",
      "source": {
        "issue": {
          "id": 504852309,
          "node_id": "MDU6SXNzdWU1MDQ4NTIzMDk=",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/671",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/671/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/671/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/671/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/issues/671",
          "number": 671,
          "state": "closed",
          "state_reason": "completed",
          "title": "Make ec_ arithmetic more consistent and add documentation",
          "body": "As brought up by @afk11 on #secp256k1 there are a couple of undocumented and inconsistent surprises in the ec arithmetic functions (that is `secp256k1_ec_pub/privkey_neg`, `_tweak_add` and `tweak_mul`.\r\n\r\nIn particular:\r\n\r\n1. Right now, `ec_privkey_neg`, `ec_privkey_tweak_add` and `ec_privkey_tweak_mul` do not fail if the seckey is invalid, but they may give unexpected results in that case (f.e. #488). In order to avoid that, the user should call `ec_seckey_verify` before calling these functions, but that's not documented. Alternatively, these functions could call `ec_seckey_verify` themselves. In any case we should define what a valid `seckey` is (in the documentation of `ec_seckey_verify` for example) and refer to that in the argument documentation of other functions.\r\n2. `ec_privkey_tweak_add` and `ec_privkey_tweak_mul` can fail (return 0). As a result the seckey argument will be zeroized. This is not documented. There's conflicting ideas whether this is a good idea:\r\n    * \"preserving any entropy in the bad input is the safer behaviour (e.g. the data in it might get fed elsewhere into some rng hash or something)\" (@gmaxwell in #668).\r\n    * vs.\r\n        ```\r\n        17:25 < andytoshi> leaving it alone sounds very dangerous, presumably the original key will \"work\" in subsequent algos\r\n        17:25 < andytoshi> while a 0 key is pretty visible and will cause failures pretty-much no matter what you do with it\r\n        ```\r\n        However, right now we wouldn't detect the 0 key in `ec_privkey_tweak_add` and `tweak_mul`\r\n\r\n3. ~~`privkey_tweak_add` and `privkey_tweak_mul` fail if the resulting privkey is 0 but not if it overflows. That's not ideal because you won't be able to sign for it. Additionally, the documentation for `privkey_tweak_add` is wrong: `returns: [...] 0 the resulting private key [...] would be invalid (only when the tweak is the complement of the corresponding private key)` (same for `pubkey_tweak_add`). An overflowing private key is also invalid.~~ (EDIT: actually the privkey can not overflow in these functions)\r\n4. All this behavior should be tested\r\n5. See #670 for naming improvements (seckey vs. privkey)\r\n",
          "user": {
            "login": "jonasnick",
            "id": 2582071,
            "node_id": "MDQ6VXNlcjI1ODIwNzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonasnick",
            "html_url": "https://github.com/jonasnick",
            "followers_url": "https://api.github.com/users/jonasnick/followers",
            "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
            "organizations_url": "https://api.github.com/users/jonasnick/orgs",
            "repos_url": "https://api.github.com/users/jonasnick/repos",
            "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonasnick/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/1",
            "html_url": "https://github.com/bitcoin-core/secp256k1/milestone/1",
            "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/1/labels",
            "id": 1276306,
            "node_id": "MDk6TWlsZXN0b25lMTI3NjMwNg==",
            "number": 1,
            "state": "open",
            "title": "stable release (1.0.0-rc.1)",
            "description": "Motivation: libsecp is already widely used today, but often in a terribly outdated version. It's likely that a release process would help with that. Moreover, it simplifies using libsecp which may prevent developers from using less well tested alternatives. Lastly, without releases it's difficult to update the library in an organized fashion and communicate these updates.\r\n\r\nRelease Goals:\r\n\r\n- Stabilize API and documentation for functionality that exist today.\r\n- Fix a few known bugs.\r\n- Make ECDH non-experimental.\r\n\r\nThis milestone can be discussed in issue https://github.com/bitcoin-core/secp256k1/issues/286.",
            "creator": {
              "login": "gmaxwell",
              "id": 858454,
              "node_id": "MDQ6VXNlcjg1ODQ1NA==",
              "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/gmaxwell",
              "html_url": "https://github.com/gmaxwell",
              "followers_url": "https://api.github.com/users/gmaxwell/followers",
              "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
              "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
              "repos_url": "https://api.github.com/users/gmaxwell/repos",
              "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 12,
            "closed_issues": 26,
            "created_at": "2015-08-27T18:21:31Z",
            "updated_at": "2023-04-10T15:36:41Z"
          },
          "locked": false,
          "comments": 4,
          "closed_at": "2020-04-30T16:14:48Z",
          "created_at": "2019-10-09T19:39:30Z",
          "updated_at": "2020-04-30T16:14:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 540895233,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU0MDg5NTIzMw==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/540895233",
      "actor": {
        "login": "kroggen",
        "id": 7624275,
        "node_id": "MDQ6VXNlcjc2MjQyNzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7624275?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kroggen",
        "html_url": "https://github.com/kroggen",
        "followers_url": "https://api.github.com/users/kroggen/followers",
        "following_url": "https://api.github.com/users/kroggen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kroggen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kroggen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kroggen/subscriptions",
        "organizations_url": "https://api.github.com/users/kroggen/orgs",
        "repos_url": "https://api.github.com/users/kroggen/repos",
        "events_url": "https://api.github.com/users/kroggen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kroggen/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-10-11T04:16:56Z",
      "updated_at": "2019-10-11T04:16:56Z",
      "author_association": "NONE",
      "body": "What about using the `privkey` as default and let the `seckey` as the alias? So the function names are consistent.\r\n\r\nMy vote goes to have the arguments named `privkey` too. Decreasing the amount of different names makes the code easier to understand.",
      "user": {
        "login": "kroggen",
        "id": 7624275,
        "node_id": "MDQ6VXNlcjc2MjQyNzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7624275?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kroggen",
        "html_url": "https://github.com/kroggen",
        "followers_url": "https://api.github.com/users/kroggen/followers",
        "following_url": "https://api.github.com/users/kroggen/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kroggen/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kroggen/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kroggen/subscriptions",
        "organizations_url": "https://api.github.com/users/kroggen/orgs",
        "repos_url": "https://api.github.com/users/kroggen/repos",
        "events_url": "https://api.github.com/users/kroggen/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kroggen/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/670#issuecomment-540895233",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670"
    },
    {
      "event": "commented",
      "id": 541032566,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU0MTAzMjU2Ng==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/541032566",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-10-11T11:52:25Z",
      "updated_at": "2019-10-11T11:52:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "The thing is called `seckey` everywhere except the `ec_privkey` function names. So let's keep that as a default.",
      "user": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/670#issuecomment-541032566",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670"
    },
    {
      "event": "commented",
      "id": 606594891,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYwNjU5NDg5MQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/606594891",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-31T12:26:41Z",
      "updated_at": "2020-03-31T12:26:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Superseded by https://github.com/bitcoin-core/secp256k1/issues/671",
      "user": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/670#issuecomment-606594891",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/670"
    },
    {
      "event": "closed",
      "id": 3183050322,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzE4MzA1MDMyMg==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/3183050322",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-31T12:26:41Z"
    }
  ]
}