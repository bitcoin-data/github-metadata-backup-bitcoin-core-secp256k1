{
  "type": "issue",
  "issue": {
    "id": 597099191,
    "node_id": "MDU6SXNzdWU1OTcwOTkxOTE=",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/734",
    "number": 734,
    "state": "closed",
    "state_reason": "completed",
    "title": "build: OpenSSL EC detection fails on macOS",
    "body": "```bash\r\n./configure --enable-openssl-tests\r\n...\r\nchecking for libcrypto... yes\r\nchecking for main in -lcrypto... yes\r\nchecking for EC functions in libcrypto... no\r\nconfigure: error: OpenSSL tests requested but OpenSSL with EC support is not available\r\n```\r\n\r\nconfig.log\r\n```\r\nconfigure:14672: checking for EC functions in libcrypto\r\nconfigure:14696: gcc -c -O2 -fvisibility=hidden -std=c89 -pedantic -Wall -Wextra -Wcast-align -Wnested-externs -Wshadow -Wstrict-prototypes -Wno-unused-function -Wno-long-long -Wno-overlength-strings -W -g  conftest.c >&5\r\nconftest.c:36:14: fatal error: 'openssl/ec.h' file not found\r\n    #include <openssl/ec.h>\r\n             ^~~~~~~~~~~~~~\r\n1 error generated.\r\n```\r\n\r\nI can PR a fix shortly if no-one beats me to it.",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 2,
    "closed_at": "2020-04-13T19:51:12Z",
    "created_at": "2020-04-09T08:04:25Z",
    "updated_at": "2020-04-13T19:51:12Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 611392118,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTM5MjExOA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/611392118",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-09T08:05:45Z",
      "updated_at": "2020-04-09T08:05:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Well do you have that file?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/734#issuecomment-611392118",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734"
    },
    {
      "event": "commented",
      "id": 611393758,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxMTM5Mzc1OA==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/comments/611393758",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-09T08:09:33Z",
      "updated_at": "2020-04-09T08:09:33Z",
      "author_association": "MEMBER",
      "body": "> Well do you have that file?\r\n\r\nYes, but it needs to come from the [`brew` installed OpenSSL](https://github.com/bitcoin-core/secp256k1/blob/master/configure.ac#L44). Which isn't being used during this check.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/secp256k1/issues/734#issuecomment-611393758",
      "issue_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/734"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-09T09:41:32Z",
      "updated_at": "2020-04-09T09:41:32Z",
      "source": {
        "issue": {
          "id": 597156603,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDAxMzE5NTg5",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/735",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/735/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/735/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/735/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/735",
          "number": 735,
          "state": "closed",
          "state_reason": null,
          "title": "build: fix OpenSSL EC detection on macOS",
          "body": "Fixes #734.\r\n\r\nThe first commit fixes OpenSSL EC detection on macOS, by making `CRYPTO_CPPFLAGS` available during configure. Similar to how `GMP_CPPFLAGS` are used.\r\n\r\nThe second commit, which I'd like feedback on, fixes a compilation error:\r\n```bash\r\n  CC       src/bench_verify.o\r\nsrc/bench_verify.c:15:10: fatal error: 'openssl/bn.h' file not found\r\n#include <openssl/bn.h>\r\n         ^~~~~~~~~~~~~~\r\n1 error generated.\r\n```\r\n\r\nas `CRYPTO_CPPFLAGS` are then needed in bench_verify, and are not included otherwise. \r\n\r\nNot sure if this is the way you'd like to fix this, as its a bit of a hack for macOS.\r\n\r\n",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/735",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/735",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/735.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/735.patch"
          },
          "closed_at": "2020-04-13T19:51:12Z",
          "created_at": "2020-04-09T09:41:32Z",
          "updated_at": "2020-07-22T00:16:37Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "elichai",
        "id": 2167860,
        "node_id": "MDQ6VXNlcjIxNjc4NjA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/elichai",
        "html_url": "https://github.com/elichai",
        "followers_url": "https://api.github.com/users/elichai/followers",
        "following_url": "https://api.github.com/users/elichai/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/elichai/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/elichai/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
        "organizations_url": "https://api.github.com/users/elichai/orgs",
        "repos_url": "https://api.github.com/users/elichai/repos",
        "events_url": "https://api.github.com/users/elichai/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/elichai/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-12T14:36:25Z",
      "updated_at": "2020-04-12T14:36:25Z",
      "source": {
        "issue": {
          "id": 598498983,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDAyMzQ3Nzk5",
          "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/738",
          "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
          "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/738/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/738/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/738/events",
          "html_url": "https://github.com/bitcoin-core/secp256k1/pull/738",
          "number": 738,
          "state": "open",
          "state_reason": null,
          "title": "Replace OpenSSL in cross-testing with micro-ecc(uECC)",
          "body": "Adding cross testing against non-openssl implementation was suggested multiple times\r\nhttps://github.com/bitcoin-core/secp256k1/issues/691\r\nI attempted to do it in https://github.com/bitcoin-core/secp256k1/pull/641 but there wasn't good consensus to add rust even to the testing suite.\r\n\r\n@gmaxwell suggested in https://github.com/bitcoin-core/secp256k1/issues/716 that we can use https://github.com/kmackay/micro-ecc for that.\r\n\r\nSo I integrated uECC into our tests build system and replaced the current openssl cross testing with uECC tests.\r\n\r\nThis is IMHO better for a couple of reasons:\r\n1. uECC is a simpler implementation, so this allows us to test that the different approaches don't produce anything wrong.\r\n2. uECC has a deterministic ECDSA implementation so we also test signatures equivalence(there was a small bug there I had to fix).\r\n3. We replace an external dependency(OpenSSL) with a small vendored one,  which makes things simpler.\r\n4. We could also add BIP-Schnorr impl into uECC when they get merged.\r\n\r\ncc https://github.com/bitcoin-core/secp256k1/issues/736 https://github.com/bitcoin-core/secp256k1/issues/734",
          "user": {
            "login": "elichai",
            "id": 2167860,
            "node_id": "MDQ6VXNlcjIxNjc4NjA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2167860?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/elichai",
            "html_url": "https://github.com/elichai",
            "followers_url": "https://api.github.com/users/elichai/followers",
            "following_url": "https://api.github.com/users/elichai/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/elichai/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/elichai/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/elichai/subscriptions",
            "organizations_url": "https://api.github.com/users/elichai/orgs",
            "repos_url": "https://api.github.com/users/elichai/repos",
            "events_url": "https://api.github.com/users/elichai/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/elichai/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 165017692,
              "node_id": "MDU6TGFiZWwxNjUwMTc2OTI=",
              "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/assurance",
              "name": "assurance",
              "description": "",
              "color": "A6DF3D",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 24,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/secp256k1/pulls/738",
            "html_url": "https://github.com/bitcoin-core/secp256k1/pull/738",
            "diff_url": "https://github.com/bitcoin-core/secp256k1/pull/738.diff",
            "patch_url": "https://github.com/bitcoin-core/secp256k1/pull/738.patch"
          },
          "created_at": "2020-04-12T14:36:24Z",
          "updated_at": "2023-05-08T14:49:00Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "closed",
      "id": 3228340409,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzIyODM0MDQwOQ==",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/3228340409",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-13T19:51:12Z"
    }
  ]
}