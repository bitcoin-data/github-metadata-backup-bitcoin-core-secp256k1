{
  "type": "issue",
  "issue": {
    "id": 3294256020,
    "node_id": "I_kwDOAP4Jqs7EWluU",
    "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1718",
    "repository_url": "https://api.github.com/repos/bitcoin-core/secp256k1",
    "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1718/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1718/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/1718/events",
    "html_url": "https://github.com/bitcoin-core/secp256k1/issues/1718",
    "number": 1718,
    "state": "open",
    "state_reason": null,
    "title": "Clarify API doc of ecdsa_recover return value",
    "body": "The API doc for `ecdsa_recover` states the following:\n\n```C\n/** Recover an ECDSA public key from a signature.\n *\n *  Returns: 1: public key successfully recovered (which guarantees a correct signature).\n *           0: otherwise.\n```\n\nAfter reading this, one may assume that when `ecdsa_recover` successfully recovers a pubkey, `ecdsa_verify` on the same signature, message and public key will never fail. Or more precisely, the assertion in the following code snippet never fails:\n\n```C\nsecp256k1_ecdsa_signature sig;\nsecp256k1_ecdsa_recoverable_signature rsig;\n\n/* Set rsig to something */\n/* ... */\n\nif (secp256k1_ecdsa_recover(ctx, pubkey, rsig, msg)) {\n    secp256k1_ecdsa_recoverable_signature_convert(ctx, &sig, &rsig);\n    assert(secp256k1_ecdsa_verify(CTX, &sig, msg, &pubkey));\n\n}\n```\n\nHowever, this is **not** true due to \"s-malleability\" of ECDSA signatures: `ecdsa_verify` requires low-s while `ecdsa_recover` does not. Thus, if we add\n```\n    secp256k1_ecdsa_signature_normalize(CTX, &sig, &sig);\n```\nafter the `ecdsa_recoverable_signature_convert` call in above code snipped, then the assertion *never* fails.\n\nIn other words, `ecdsa_recover` returning 1 *does* guarantee a correct signature, but `ecdsa_verify` passes only after the signature is normalized. We should document this fact more clearly.\n\nThanks to @erickcestari for reporting this!",
    "user": {
      "login": "jonasnick",
      "id": 2582071,
      "node_id": "MDQ6VXNlcjI1ODIwNzE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonasnick",
      "html_url": "https://github.com/jonasnick",
      "followers_url": "https://api.github.com/users/jonasnick/followers",
      "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
      "organizations_url": "https://api.github.com/users/jonasnick/orgs",
      "repos_url": "https://api.github.com/users/jonasnick/repos",
      "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jonasnick/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 165020207,
        "node_id": "MDU6TGFiZWwxNjUwMjAyMDc=",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/user-documentation",
        "name": "user-documentation",
        "description": "user-facing documentation",
        "color": "C5DEF5",
        "default": false
      },
      {
        "id": 5492448291,
        "node_id": "LA_kwDOAP4Jqs8AAAABR2AcIw",
        "url": "https://api.github.com/repos/bitcoin-core/secp256k1/labels/tweak/refactor",
        "name": "tweak/refactor",
        "description": "",
        "color": "FBCA04",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/9",
      "html_url": "https://github.com/bitcoin-core/secp256k1/milestone/9",
      "labels_url": "https://api.github.com/repos/bitcoin-core/secp256k1/milestones/9/labels",
      "id": 13315105,
      "node_id": "MI_kwDOAP4Jqs4Ayywh",
      "number": 9,
      "state": "open",
      "title": "0.7.1",
      "description": "",
      "creator": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "open_issues": 3,
      "closed_issues": 0,
      "created_at": "2025-07-22T09:26:32Z",
      "updated_at": "2025-09-08T15:17:17Z",
      "due_on": "2025-10-17T07:00:00Z"
    },
    "locked": false,
    "comments": 0,
    "created_at": "2025-08-05T19:51:42Z",
    "updated_at": "2025-09-08T15:16:49Z"
  },
  "events": [
    {
      "event": "mentioned",
      "id": 18998775523,
      "node_id": "MEE_lADOAP4Jqs7EWluUzwAAAARsak7j",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18998775523",
      "actor": {
        "login": "erickcestari",
        "id": 96489518,
        "node_id": "U_kgDOBcBQLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/96489518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erickcestari",
        "html_url": "https://github.com/erickcestari",
        "followers_url": "https://api.github.com/users/erickcestari/followers",
        "following_url": "https://api.github.com/users/erickcestari/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erickcestari/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erickcestari/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erickcestari/subscriptions",
        "organizations_url": "https://api.github.com/users/erickcestari/orgs",
        "repos_url": "https://api.github.com/users/erickcestari/repos",
        "events_url": "https://api.github.com/users/erickcestari/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erickcestari/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-05T19:51:43Z"
    },
    {
      "event": "subscribed",
      "id": 18998775549,
      "node_id": "SE_lADOAP4Jqs7EWluUzwAAAARsak79",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/18998775549",
      "actor": {
        "login": "erickcestari",
        "id": 96489518,
        "node_id": "U_kgDOBcBQLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/96489518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/erickcestari",
        "html_url": "https://github.com/erickcestari",
        "followers_url": "https://api.github.com/users/erickcestari/followers",
        "following_url": "https://api.github.com/users/erickcestari/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/erickcestari/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/erickcestari/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/erickcestari/subscriptions",
        "organizations_url": "https://api.github.com/users/erickcestari/orgs",
        "repos_url": "https://api.github.com/users/erickcestari/repos",
        "events_url": "https://api.github.com/users/erickcestari/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/erickcestari/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-05T19:51:43Z"
    },
    {
      "event": "labeled",
      "id": 19003433239,
      "node_id": "LE_lADOAP4Jqs7EWluUzwAAAARssWEX",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/19003433239",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-06T03:21:55Z",
      "label": {
        "name": "user-documentation",
        "color": "C5DEF5"
      }
    },
    {
      "event": "labeled",
      "id": 19003433246,
      "node_id": "LE_lADOAP4Jqs7EWluUzwAAAARssWEe",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/19003433246",
      "actor": {
        "login": "real-or-random",
        "id": 1071625,
        "node_id": "MDQ6VXNlcjEwNzE2MjU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1071625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/real-or-random",
        "html_url": "https://github.com/real-or-random",
        "followers_url": "https://api.github.com/users/real-or-random/followers",
        "following_url": "https://api.github.com/users/real-or-random/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/real-or-random/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/real-or-random/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/real-or-random/subscriptions",
        "organizations_url": "https://api.github.com/users/real-or-random/orgs",
        "repos_url": "https://api.github.com/users/real-or-random/repos",
        "events_url": "https://api.github.com/users/real-or-random/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/real-or-random/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-06T03:21:55Z",
      "label": {
        "name": "tweak/refactor",
        "color": "FBCA04"
      }
    },
    {
      "event": "milestoned",
      "id": 19567716904,
      "node_id": "MIE_lADOAP4Jqs7EWluUzwAAAASOU6oo",
      "url": "https://api.github.com/repos/bitcoin-core/secp256k1/issues/events/19567716904",
      "actor": {
        "login": "jonasnick",
        "id": 2582071,
        "node_id": "MDQ6VXNlcjI1ODIwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2582071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasnick",
        "html_url": "https://github.com/jonasnick",
        "followers_url": "https://api.github.com/users/jonasnick/followers",
        "following_url": "https://api.github.com/users/jonasnick/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasnick/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasnick/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasnick/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasnick/orgs",
        "repos_url": "https://api.github.com/users/jonasnick/repos",
        "events_url": "https://api.github.com/users/jonasnick/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasnick/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-08T15:16:49Z",
      "milestone": {
        "title": "0.7.1"
      }
    }
  ]
}